<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/ctf-challenges/" rel="category tag">CTF Challenges</a>, <a href="https://www.hackingarticles.in/category/ctf-challenges/vulnhub/" rel="category tag">VulnHub</a></span>            </div>
            <h1 class="post-title entry-title">Hack the Skytower (CTF Challenge)</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/hack-the-skytower-ctf-challenge/" rel="bookmark"><time class="entry-date published" datetime="2016-11-06T05:01:36+00:00">November 6, 2016</time><time class="updated" datetime="2025-06-10T20:30:28+00:00">June 10, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">Hello everyone. Today we’ll be walking through skytower CTF challenge. This CTF was designed by Telspace Systems for the CTF at the ITWeb Security Summit and BSidesCPT (Cape Town). The aim is to test intermediate to advanced security enthusiasts in their ability to attack a system using a multi-faceted approach and obtain the “flag”.</span></p>
<p><span style="color: #000000;"><strong>Level: Medium</strong></span></p>
<p><span style="color: #000000;"><strong>Aim: </strong>find flag.txt in the victim’s PC and obtain the root password.</span></p>
<p><span style="color: #000000;">Let’s go then!</span></p>
<p><span style="color: #000000;">Download the skytower lab from <span style="color: #0000ff;"><a style="color: #0000ff;" href="https://www.vulnhub.com/entry/skytower-1,96/">here</a>.</span></span></p>
<p><span style="color: #000000;">Once downloaded, let us run the<strong> netdiscover</strong> command on our terminal to find out the IP address. By this method, we found out that the IP address of the vulnerable lab is 192.168.1.123 since I am running it on the local network.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-0uQsGGVCP7c/W0GZnKqNoyI/AAAAAAAAX0w/PPxHXP7ynQobjkhjon6IH6cTfb-aVKhqQCLcBGAs/s1600/1.png"/></span></p>
<p><span style="color: #000000;">Now let’s move towards enumeration in context to identify running services and open of victim’s machine by using the most popular tool Nmap.</span></p>
<pre class="lang:default decode:true ">nmap -A 192.168.1.123</pre>
<p><span style="color: #000000;">By this scan, we found that port 80 is open so it must have a webpage associated with it.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-jpXVFyaqYtU/W0GZo0NMBsI/AAAAAAAAX1A/uwcvo-EAWa86BrwfjOV4KQM4ZYdDQjMOgCLcBGAs/s1600/2.png"/></span></p>
<p><span style="color: #000000;">There is also an SSH port and a proxy port too but let’s focus on webpage first. A login form opened up when I typed in the IP in the address bar of my browser that requires email ID and password to login.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-ajlhtrZ6EfQ/W0GZpeF8dVI/AAAAAAAAX18/GL8HguNX3OcECFfuqJLP59B17jGn5FQNQCEwYBhgL/s1600/3.png"/></span></p>
<p><span style="color: #000000;">Let’s try by typing :</span></p>
<pre class="lang:default decode:true">Email: '*'
Password: '*'</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-JsUhEUhPOjk/W0GZp_frsKI/AAAAAAAAX1o/4gg_ZbeN0L4HbZ6iduNEWNK-22WNeG_XACEwYBhgL/s1600/4.png"/></span></p>
<p><span style="color: #000000;"><strong>Voila</strong>! Our blind SQL injection worked here and the SSH account details were given to us on the login.php page.</span></p>
<p><span style="color: #000000;">Now, we could have tried connecting to it via normal SSH but the problem is that the SSH is filtered. And since we are seeing a proxy on port 3128, let’s try and route our SSH connection through the proxy server.</span></p>
<p><span style="color: #000000;">Type <strong>gedit /etc/proxychains.conf</strong> and add this statement in the end:</span></p>
<pre class="lang:default decode:true">http 192.168.1.123 3128</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-Sm5VlovM3bY/W0GZqXFsp3I/AAAAAAAAX1s/oAZhQSq2rEgRSYyOsUjp0xu5nbUhS1MTwCEwYBhgL/s1600/5.png"/></span></p>
<p><span style="color: #000000;">save and exit the config file. On a new terminal window, let’s try SSH connection via that proxy.</span></p>
<pre class="lang:default decode:true">proxychains ssh john@192.168.1.123</pre>
<p><span style="color: #000000;"><strong><img decoding="async" src="https://1.bp.blogspot.com/-q8H3aZRKQzU/W0GZqyxOLpI/AAAAAAAAX10/nCUDiv_YLQAz4oGkGeXd45Evwli9jwtGwCEwYBhgL/s1600/6.png"/></strong></span></p>
<p><span style="color: #000000;">As we can see, it immediately closed the connection upon us when we typed in the username as <strong>john </strong>and password as <strong>hereisjohn.</strong></span></p>
<p><span style="color: #000000;">So, that gives us an idea that we won’t get a shell. Let’s try suffixing /bin/bash with the ssh command only</span></p>
<pre class="lang:default decode:true">proxychains ssh john@192.168.1.123 /bin/bash</pre>
<p><span style="color: #000000;"><strong> <img decoding="async" src="https://1.bp.blogspot.com/-DsHhtWKwuyY/W0GZrST3suI/AAAAAAAAX1w/lkj-NVNNi_gMRxXCoC6uYjyxCmObzmEVQCEwYBhgL/s1600/7.png"/></strong></span></p>
<p><span style="color: #000000;">Voila! It did the trick. Type id to check the privileges.</span></p>
<p><span style="color: #000000;">Now, let’s check the current directory and the elements in it by:</span></p>
<pre class="lang:default decode:true">pwd
ls –la</pre>
<p><span style="color: #000000;">We can see a bashrc file. Probably this is the file that is causing trouble in giving a shell. Let’s remove this file by:</span></p>
<p><span style="color: #000000;"><strong>rm .bashrc</strong></span></p>
<p><span style="color: #000000;"><strong> <img decoding="async" src="https://3.bp.blogspot.com/-FQLKj135YyA/W0GZr0rRKfI/AAAAAAAAX10/0rZZ9z-I2f0W72fBHwCtCjq4E_AAJjXhgCEwYBhgL/s1600/8.png"/></strong></span></p>
<p><span style="color: #000000;">With .bashrc gone, let’s try SSHing once more.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-MhNWA68hB-U/W0GZsTNh7dI/AAAAAAAAX18/5kos3tRwUFY5ngW02nF-dwSxHjK5c4VQwCEwYBhgL/s1600/9_0.png"/></span></p>
<p><span style="color: #000000;">Perfect! It did give us a proper shell. Let’s type in <strong>sudo –l </strong> to check sudoers list but as you can see, john is not in the sudoers list. And we don’t know any other user too!</span></p>
<p><span style="color: #000000;">Let’s type <strong>netstat -antp</strong> and hope there is some service that would allow us to look for any other user.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-8sAOxRHaXWs/W0GZs-lSJ_I/AAAAAAAAX14/1e364ew1LUYpWNyrwLAlYFvamufwLM8FwCEwYBhgL/s1600/9_1.png"/></span></p>
<p><span style="color: #000000;">Port 3306 is listening which means MySQL database would have the info of some other users for sure!</span></p>
<p><span style="color: #000000;">But the problem is that we don’t have the database name and the login credentials.</span></p>
<p><span style="color: #000000;">Remember that we have an SQL error on page 192.168.1.123/login.php maybe if we read its source code, we could find the database name and the login credentials.</span></p>
<p><span style="color: #000000;">Let’s read it by:</span></p>
<pre class="lang:default decode:true">cat /var/www/login.php</pre>
<p><span style="color: #000000;"><strong> <img decoding="async" src="https://3.bp.blogspot.com/-MZuY2GcUJ9Y/W0GZnFgU63I/AAAAAAAAX1k/2C1DpWWW1BseoQq25Wt2bRfr0SwK7ZTfgCEwYBhgL/s1600/10.png"/></strong></span></p>
<p><span style="color: #000000;">We can see that the database name is “<strong>SkyTech</strong>,” the username and password both are “<strong>root.”</strong></span></p>
<p><span style="color: #000000;">Login to MySQL via:</span></p>
<pre class="lang:default decode:true ">mysql –u root –p root</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-MxQvbCnbYms/W0GZnEfJfAI/AAAAAAAAX18/SXlkyOrSnLYQlnI8Jn1LGEPKoS0cps4GQCEwYBhgL/s1600/11.png"/></span></p>
<p><span style="color: #000000;">Here, we run:</span></p>
<pre class="lang:default decode:true">show tables;
select * from login;</pre>
<p><span style="color: #000000;">Following database appeared:</span></p>
<table width="607">
<tbody>
<tr>
<td width="202"><span style="color: #000000;">1</span></td>
<td width="202"><span style="color: #000000;"><a style="color: #000000;" href="mailto:john@skytech.com">john@skytech.com</a></span></td>
<td width="202"><span style="color: #000000;">hereisjohn</span></td>
</tr>
<tr>
<td width="202"><span style="color: #000000;">2</span></td>
<td width="202"><span style="color: #000000;"><a style="color: #000000;" href="mailto:sara@skytech.com">sara@skytech.com</a></span></td>
<td width="202"><span style="color: #000000;">ihatethisjob</span></td>
</tr>
<tr>
<td width="202"><span style="color: #000000;">3</span></td>
<td width="202"><span style="color: #000000;">william@skytech.com</span></td>
<td width="202"><span style="color: #000000;">senseable</span></td>
</tr>
</tbody>
</table>
<p><span style="color: #000000;">So, let’s try logging in via ssh as the user Sara.</span></p>
<pre class="lang:default decode:true">ssh sara@localhost -t /bin/sh</pre>
<p><span style="color: #000000;">Type in the password as <strong>ihatethisjob</strong></span></p>
<pre class="lang:default decode:true">sudo -l</pre>
<p><span style="color: #000000;">Now, we have a clear list of sudoers.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-plDWJzzBcJM/W0GZn-zDxiI/AAAAAAAAX1w/mcT40no_4fU8aT0jAZ5F47uZOL5WLIZ8QCEwYBhgL/s1600/12.png"/></span></p>
<p><span style="color: #000000;">We finally have a directory with no password required. So, let’s try and check the contents in the directory /accounts.</span></p>
<p><span style="color: #000000;">We type </span></p>
<pre class="lang:default decode:true">sudo ls /accounts/../../../root</pre>
<p><span style="color: #000000;">And a file called “<strong>flag.txt</strong>” appears!</span></p>
<pre class="lang:default decode:true ">sudo cat /accounts/../../../root/flag.txt</pre>
<p><span style="color: #000000;">to read the flag.txt file and we get the root password!</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-Q-p6gaGnd98/W0GZoddGoZI/AAAAAAAAX1o/lAa1AR7Ypo0QaD9mUokVs87JL3B16B2cgCEwYBhgL/s1600/13.png"/></span></p>
<p><span style="color: #000000;">Congrats! We solved the Skytower CTF challenge!</span></p>
<p><span style="color: #000000;"><strong>Author: Harshit Rajpal </strong>is an InfoSec researcher and has a keen interest in technology. contact<strong> <a style="color: #000000;" href="https://www.facebook.com/harshit.rajpal1">here</a></strong></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
