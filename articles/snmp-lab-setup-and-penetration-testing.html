<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/penetration-testing/" rel="category tag">Penetration Testing</a>, <a href="https://www.hackingarticles.in/category/pentest-lab-setup/" rel="category tag">Pentest Lab Setup</a></span>            </div>
            <h1 class="post-title entry-title">SNMP Lab Setup and Penetration Testing</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/snmp-lab-setup-and-penetration-testing/" rel="bookmark"><time class="entry-date published" datetime="2018-03-18T17:49:42+00:00">March 18, 2018</time><time class="updated" datetime="2025-05-13T09:00:56+00:00">May 13, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <h3><span style="color: #800000;"><strong>What is SNMP?</strong></span></h3>
<p><span style="color: #000000;">Simple Network Management Protocol (SNMP) is a protocol for network management. It is used for collecting information from and configuring, network devices, such as servers, printers, hubs, switches, and routers on an Internet Protocol (IP) network. It usually runs on UDP port 161.</span></p>
<p><span style="color: #000000;">Download from <a href="http://iso.linuxquestions.org/vyos/vyos-1.1.8/#vyos-1.1.8-amd64"><strong>Here</strong></a></span></p>
<p><span style="color: #000000;">Create a New Virtual Machine using the VMware and change the Network Adapter to <strong>Bridged</strong> as shown in the given screenshot.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-4fcSxitNbzc/Wq6hHdW6SRI/AAAAAAAAVWg/y51uaAJMyMIA2vs_IeF4N1HBkdYvpl1hQCEwYBhgL/s1600/1.PNG"/></span></p>
<p><span style="color: #000000;">After completing the initial setup in the VMware Boot the Newly created Virtual Machine by clicking on the Power on the Virtual Machine.</span></p>
<p><span style="color: #000000;">The Default Login Credentials for Vyos are</span></p>
<pre class="lang:default decode:true">Username: vyos
Password: vyos</pre>
<p><span style="color: #000000;">The Initial Boot of Vyos will be as shown below:</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-oG1Is_8-xrw/Wq6hJtpXBjI/AAAAAAAAVXA/5PXW7gt0HZsSh8R4W_OP8ZPnGtMMYKJSACEwYBhgL/s1600/2.PNG"/></span></p>
<p><span style="color: #000000;">This is a Live Boot of the vyos, so we will install the vyos to use it properly.</span></p>
<p><span style="color: #000000;">We will use the ISO<strong> image</strong> to install vyos. Type the following command:</span></p>
<pre class="lang:default decode:true">install image</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-SsfqUnitXTs/Wq6hMBpCznI/AAAAAAAAVXo/O4sZJ63q4H47X87IBPtM4bERImPtbAh7gCEwYBhgL/s1600/3.PNG"/></span></p>
<p><span style="color: #000000;">Enter “<strong>Yes</strong>” where it asks to continue.</span></p>
<p><span style="color: #000000;">Next, it will ask about the partition management.</span></p>
<p><span style="color: #000000;">Enter “<strong>Auto</strong>” where it asks about Partition.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-Ctofuix6qgA/Wq6hL0V7EwI/AAAAAAAAVXk/z2WTtmb6LfgC9lOFe2IECBWbdGEg5omfACEwYBhgL/s1600/4.PNG"/></span></p>
<p><span style="color: #000000;">It will detect the drives in the Virtual System and ask you to select the particular drive in which you want to install vyos.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-bAxIR_tjTrA/Wq6hMI55DRI/AAAAAAAAVYI/OXJyNSxea7YrGvi61EoLvRvU_-VFsnW_ACEwYBhgL/s1600/5.PNG"/></span></p>
<p><span style="color: #000000;">Enter “<strong>sda</strong>” where it asks about the location for installation.</span></p>
<p><span style="color: #000000;">Next, it will ask about the size for the root partition for the vyos.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-Onjx0cM26ZQ/Wq6hMY-DzPI/AAAAAAAAVXw/KqrnNU7q-Zk_RgUwG_UcgNTgbNXQZikcACEwYBhgL/s1600/6.PNG"/></span></p>
<p><span style="color: #000000;">You can enter any size from 1000MB to 21474MB. But it is recommended to keep it maximum i.e. 21474MB.</span></p>
<p><span style="color: #000000;">Next, it will ask about the name for the image.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-IfPZJFAj2Qc/Wq6hMqBTMjI/AAAAAAAAVYE/ppLXX3hmQEESxVblqr6yhAfOfdRf5wCQQCEwYBhgL/s1600/7.PNG"/></span></p>
<p><span style="color: #000000;">By default, the name is set to the version number that is 1.1.8. You can either give a personalized name or you can leave it default.</span></p>
<p><span style="color: #000000;">Next, it will ask about the location to copy the sda.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-0EIja_-YTjA/Wq6hM_oFBxI/AAAAAAAAVYE/i-WX6C2SU5IbWFQ-M_To0lSBko9MOoeIACEwYBhgL/s1600/8.PNG"/></span></p>
<p><span style="color: #000000;">It is recommended to keep it default.</span></p>
<p><span style="color: #000000;">After that, it will ask for the password to be kept for the administrator account.</span></p>
<p><span style="color: #000000;">By default, it is kept vyos. But from the security point of view, it is recommended to change it to something complex which is difficult to guess or brute force.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-BcCIO73HtoA/Wq6hNBrmJPI/AAAAAAAAVYM/y_XRf2dsDQU_W9vjW4vFmtWIStN6absLQCEwYBhgL/s1600/9.PNG"/></span></p>
<p><span style="color: #000000;">Now it will ask for the drive on which you want to set up GRUB Boot-loader? Again <strong>leave it to default</strong> to “sda”.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-U4a1QT-UVhc/Wq6hHP1XLLI/AAAAAAAAVWY/JsWml8DbvhgeNyM2rMFLWvZzgq7I7zdhwCEwYBhgL/s1600/10.PNG"/></span></p>
<p><span style="color: #000000;">After that, we have completed the vyos setup. Reboot using the command</span></p>
<pre class="lang:default decode:true">reboot</pre>
<p><span style="color: #000000;">After reboot, it will ask for login credentials, Enter the credential that you entered during the installation.</span></p>
<p><span style="color: #000000;">Now we will configure the Network Interface. To do that, we will have to enter the configuration mode.</span></p>
<pre class="lang:default decode:true">configure</pre>
<p><span style="color: #000000;">After entering into configuration mode set up the Network interface</span></p>
<p><span style="color: #000000;"><strong>Syntax:</strong> set interface ethernet [network interface] address [Static IPv4 Address]</span></p>
<pre class="lang:default decode:true">set interface ethernet eth0 address 192.168.1.125/24</pre>
<p><span style="color: #000000;">Now Commit and Save the Configuration</span></p>
<pre class="lang:default decode:true ">commit
save</pre>
<p><span style="color: #000000;">After that type “<strong>exit</strong>” to get out of configuration mode and then reboot the machine using “<strong>reboot</strong>” command</span></p>
<p><span style="color: #000000;">We are rebooting because the configuration changes come in effect only after a reboot.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-gAKSRdE7Siw/Wq6hHd2bW_I/AAAAAAAAVYM/BQe5mdXFA3AmwsgGSPlUf7uKjBZ7jyV4gCEwYBhgL/s1600/11.PNG"/></span></p>
<p><span style="color: #000000;">You can then view the interface which we configured by using the command</span></p>
<pre class="lang:default decode:true">show interfaces</pre>
<p><span style="color: #000000;"><strong>Note:</strong> Above command will run in configuration mode.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-oDtroc8IPwc/Wq6hHxzyRTI/AAAAAAAAVYA/GJM7gKfeJ98M-hhpjwHXevtDnv3p5qVBQCEwYBhgL/s1600/12.PNG"/></span></p>
<h3><span style="color: #800000;"><strong>Start SNMP service</strong></span></h3>
<p><span style="color: #000000;">Now we will set up the SNMP service in the Vyos.</span></p>
<p><span style="color: #000000;">For that, we will enter configuration mode using the command</span></p>
<pre class="lang:default decode:true">configure</pre>
<p><span style="color: #000000;">Now to set up the SNMP service we will need to add a community string and give it an authorization. To do that:</span></p>
<p><span style="color: #000000;"><strong>Syntax:</strong> set service SNMP community [community-string] authorization [auth-mode]</span></p>
<p><span style="color: #000000;">[community-string]: It can be anything but normally it is either public or private. But from a security point of view, it is recommended to keep it that cannot be easily guessed or brute-forced.</span></p>
<p><span style="color: #000000;">[auth-mode]: It is the Authorization Mode. We have two options</span></p>
<ol>
<li><span style="color: #000000;">[ro]: <strong>Read Only</strong> Authorization (It can only be used to read or extract data, we can change it using this string)</span></li>
<li><span style="color: #000000;">[rw]: <strong>Read Write</strong> Authorization (It can be used to change the data using the string)</span></li>
</ol>
<pre class="lang:default decode:true">set service snmp community ignite123 authorization ro
set service snmp community ignite321 authorization rw</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-WUUX1Sz9gJo/Wq6hIcvK9EI/AAAAAAAAVYA/3mXnQ1BKNtYil1nT0ok1k24FKQoQAPg3ACEwYBhgL/s1600/13.PNG"/></span></p>
<p><span style="color: #000000;">Now let’s set a user for the system.</span></p>
<p><span style="color: #000000;">Firstly Enter the <strong>Configuration Mode.</strong></span></p>
<pre class="lang:default decode:true">configure</pre>
<p><span style="color: #000000;">Now to add a user we will use the following command,</span></p>
<p><span style="color: #000000;"><strong>Syntax:</strong> set system login user [username] authentication plaintext-password [password]</span></p>
<pre class="lang:default decode:true">set system login user ignite authentication plaintext-password ignite123</pre>
<p><span style="color: #000000;">After this commit the configuration and <strong>save it</strong>. Also, <strong>reboot </strong>the machine so that changes may take effect.</span></p>
<p><span style="color: #000000;">We have successfully completed the SNMP Lab in Vyos.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-gakjs556jR4/Wq6hIS2tirI/AAAAAAAAVYA/H45n0SIb5L4rBdhTyPYvOsR2i83Ij56twCEwYBhgL/s1600/14.PNG"/></span></p>
<h3><span style="color: #800000;"><strong>SNMP Enumeration using Kali Linux</strong></span></h3>
<p><span style="color: #000000;">Now that we have set up the SNMP service let’s pentest it through Kali Linux inbuilt tools one by one, where We can read and extract information using the community string that has the authorization of reading only but to change the information we will have to use the community string with the read and write authorization.</span></p>
<h3><span style="color: #800000;"><strong>Nmap </strong></span></h3>
<p><span style="color: #000000;">Let’s check using nmap in Kali Linux Machine which is running on the same network.</span></p>
<pre class="lang:default decode:true">nmap –sU –p161,162 192.168.1.125</pre>
<p><span style="color: #000000;">[-sU]: UDP Ports as SNMP service runs on UDP port</span></p>
<p><span style="color: #000000;">[-p]: Specify Port Number; SNMP service runs on port 161 and 162</span></p>
<p><span style="color: #000000;">From given below image you can be observed that it has also shown port 161 is open.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-4_VozrhZLOk/Wq6hI8kgdOI/AAAAAAAAVWw/CUMpXd20nzcBK7p-uEWx5fmGpM_wbj-3gCEwYBhgL/s1600/15.png"/></span></p>
<h3><span style="color: #800000;"><strong>Snmpwalk</strong></span></h3>
<p><span style="color: #000000;"><strong>snmpwalk</strong> is an SNMP application that uses SNMP GETNEXT requests to query a network entity for a tree of information.</span></p>
<pre class="lang:default decode:true">snmpwalk -v1 -c ignite321 192.168.1.125</pre>
<p><span style="color: #000000;">Here</span></p>
<p><span style="color: #000000;">[-v]: Specifies what SNMP version to use (1, 2c, 3)<br/>
</span></p>
<p><span style="color: #000000;">[-c]: Community String</span></p>
<p><span style="color: #000000;">From given below image you can observe all details that are specified for “STRING”</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-Vwohsa3jHRY/Wq6hIzblDCI/AAAAAAAAVW4/yl7IGHjt9Ys32AgkygUqnpS315yifkxZACEwYBhgL/s1600/16.png"/></span></p>
<p><span style="color: #000000;"><strong>Snmpwalk</strong></span></p>
<p><span style="color: #000000;">We can manipulate these details using the iso id, using another tool snmpset. Here we are renaming the host string from vyos to hacked</span></p>
<pre class="lang:default decode:true">snmpset –v1 –c ignite321 192.168.1.125 iso.3.6.1.2.1.1.5.0.s Hacked</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-jzlQlE-MlLQ/Wq6hJA9SQzI/AAAAAAAAVYM/bTF0GnL-6R4Ip3Pu_7Jb72R-QWaRre89wCEwYBhgL/s1600/17.png"/></span></p>
<p><span style="color: #000000;">Let’s check if the changes we implemented had an effect using snmpwalk</span></p>
<pre class="lang:default decode:true">snmpwalk –v1 –c ignite321 192.168.1.125</pre>
<p><span style="color: #000000;">As you can see that we have successfully change the hostname from vyos to hacked. </span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-0ZhX_G6kGec/Wq6hJRM0DUI/AAAAAAAAVYE/cTcH8BrSHUYuWeCRqoMtbK5NUK-X_RS3wCEwYBhgL/s1600/18.png"/></span></p>
<p><span style="color: #000000;">We can extract the number of information using snmpwalk</span></p>
<pre class="lang:default decode:true">snmpwalk –v1 -c ignite321 192.168.1.125 1.3.6.1.2.1.25.4.2.1.2</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-9NL-AQ7OOh0/Wq6hJhM9aBI/AAAAAAAAVYE/mVMHUq3v378jg_GemtXx_6w59naUY3b_ACEwYBhgL/s1600/19.png"/></span></p>
<pre class="lang:default decode:true">snmpwalk –v1 -c ignite321 192.168.1.125 1.3.6.1.2.1.6.13.1.3</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-VujHjqpD6KA/Wq6hKS8rxvI/AAAAAAAAVYA/uGK8-Ht3pIM1F3cQRmbPBlPugf6x4J8CgCEwYBhgL/s1600/20.png"/></span></p>
<pre class="lang:default decode:true">snmpwalk -v1 –c ignite321 192.168.1.125 1.3.6.1.2.1.25.6.3.1.2</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-yw5XiRchZ2k/Wq6hKEXu82I/AAAAAAAAVYI/8X61h8UoHUA8ymkKiHMrRJqKXiQWN0zigCEwYBhgL/s1600/21.png"/></span></p>
<p><span style="color: #000000;">As the data extracted by SNMP walk is quite large we can extract that into a text file by using the command below</span></p>
<pre class="lang:default decode:true">snmpwalk –v1 -c ignite321 192.168.1.125 &gt; snmpout.txt</pre>
<p><span style="color: #000000;">We can use gedit to view the extracted information</span></p>
<pre class="lang:default decode:true">gedit snmpout.txt</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-SZpPpAN_diQ/Wq6hKfHB5nI/AAAAAAAAVYA/td0LFQLAX7Aha7GnKYsNfMn0binYWP_wgCEwYBhgL/s1600/22.png"/></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-a4z0ocv5ky4/Wq6hK1buhvI/AAAAAAAAVYE/65hB35jWP6A3JeqkK66k-lheec1WhRGAwCEwYBhgL/s1600/23.png"/></span></p>
<h3><span style="color: #800000;"><strong>SNMP-Check</strong></span></h3>
<p><span style="color: #000000;">Like to snmpwalk, SNMP-check allows you to enumerate the SNMP devices and places the output in a very human readable friendly format. It could be useful for penetration testing or systems monitoring.</span></p>
<pre class="lang:default decode:true">snmp-check 192.168.1.125 -p 161 -c ignite123</pre>
<p><span style="color: #000000;">Here,</span></p>
<p><span style="color: #000000;">[-p]: To specify the port</span></p>
<p><span style="color: #000000;">[-c]: To specify Community String</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-x38ITyyLZ0c/Wq6hK3VbuYI/AAAAAAAAVYE/D0zL_Gl0FGsD2iG-3jWl_bYSgkB-A2bowCEwYBhgL/s1600/24.png"/></span></p>
<h3><span style="color: #800000;"><strong>Braa</strong></span></h3>
<p><span style="color: #000000;">Braa is a mass SNMP scanner. The intended usage of such a tool is, of course, making SNMP queries – but unlike snmpwalk from net-snmp, it is able to query dozens or hundreds of hosts simultaneously, and in a single process. Thus, it consumes very few system resources and does the scanning VERY fast.</span></p>
<p><span style="color: #000000;">Braa implements its OWN snmp stack, so it does NOT need any SNMP libraries like net-snmp.</span></p>
<p><span style="color: #000000;"><strong>Syntax:</strong> braa [Community-string]@[IP of SNMP server]:[iso id]</span></p>
<pre class="lang:default decode:true">braa ignite123@192.168.1.125:.1.3.6.*</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-aj-zCDXhXnM/Wq6hK6fPW4I/AAAAAAAAVYI/ut85rOOAZTUtw8OEP9zS8CfehBnWdZizgCEwYBhgL/s1600/25.png"/></span></p>
<h3><span style="color: #800000;"><strong>Metasploit </strong></span></h3>
<p><span style="color: #000000;">We can enumerate SNMP using a Metasploit module called snmp_enum.</span></p>
<pre class="lang:default decode:true ">use auxiliary/scanner/snmp/snmp_enum
msf auxiliary(scanner/snmp/snmp_enum) &gt; set rhosts 192.168.1.125
msf auxiliary(scanner/snmp/snmp_enum) &gt; set community ignite123
msf auxiliary(scanner/snmp/snmp_enum) &gt; run</pre>
<p><span style="color: #000000;">We have fetched the same result from Metasploit as above.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-EAW8LKAEdS4/Wq6hLrtxTbI/AAAAAAAAVYM/OCIb5K6HuL4vXldA3T34xtg-_BO7QAvKACEwYBhgL/s1600/26.png"/></span></p>
<p><span style="color: #000000;"><strong>Author: Pavandeep Singh</strong> is a Technical Writer, Researcher and Penetration Tester Contact <a style="color: #000000;" href="https://www.linkedin.com/in/pavandeep-singh-6b1074132"><strong>here</strong></a></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
