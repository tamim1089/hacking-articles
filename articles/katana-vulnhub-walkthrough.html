<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/ctf-challenges/" rel="category tag">CTF Challenges</a>, <a href="https://www.hackingarticles.in/category/ctf-challenges/vulnhub/" rel="category tag">VulnHub</a></span>            </div>
            <h1 class="post-title entry-title">Katana: Vulnhub Walkthrough</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/katana-vulnhub-walkthrough/" rel="bookmark"><time class="entry-date published" datetime="2020-05-17T19:10:55+00:00">May 17, 2020</time><time class="updated" datetime="2025-06-10T20:10:37+00:00">June 10, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">Katana VM is made by SunCSR Team. This VM is a purposely built vulnerable lab with the intent of gaining experience in the world of penetration testing. It is of intermediate level and is very handy in order to brush up your skills as a penetration tester. The ultimate goal of this challenge is to get root and to read the root flag.</span></p>
<p><span style="color: #000000;">Since these labs are available on the Vulnhub Website. We will be downloading the lab file from this <span style="color: #0000ff;"><a style="color: #0000ff;" href="https://www.vulnhub.com/entry/katana-1,482/"><strong>link</strong></a></span>.</span></p>
<h3><span style="color: #800000;"><strong>Penetration Methodologies</strong></span></h3>
<p><span style="color: #000000;"><strong>Network Scanning</strong></span></p>
<ul>
<li><span style="color: #000000;">Netdiscover</span></li>
<li><span style="color: #000000;">Nmap</span></li>
</ul>
<p><span style="color: #000000;"><strong>Enumeration</strong></span></p>
<ul>
<li><span style="color: #000000;">Browsing HTTP Service</span></li>
<li><span style="color: #000000;">Directory Scanning (Dirb)</span></li>
</ul>
<p><span style="color: #000000;"><strong>Exploiting</strong></span></p>
<ul>
<li><span style="color: #000000;">Uploading PHP Reverse Shell</span></li>
</ul>
<p><span style="color: #000000;"><strong>Privilege Escalation</strong></span></p>
<ul>
<li><span style="color: #000000;">Capability</span></li>
</ul>
<p><span style="color: #000000;"><strong>Walkthrough</strong></span></p>
<h3><span style="color: #800000;"><strong>Network Scanning</strong></span></h3>
<p><span style="color: #000000;">Let’s start by scanning the network for targets using Netdiscover.</span></p>
<pre class="lang:default decode:true">netdiscover</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-y2tDfmjIj04/XsGKtGIrnCI/AAAAAAAAkFc/ZWSkPeK3XK4yjziOeAp9u1yXwtiOR3lTgCLcBGAsYHQ/s1600/1.png"/></span></p>
<p><span style="color: #000000;">We found the target IP Address 192.168.1.119. Let’s begin with basic port scanning with NMAP.</span></p>
<pre class="lang:default decode:true">nmap -p- -A 192.168.1.11</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-NMubObNVUfQ/XsGKtHDZh8I/AAAAAAAAkFg/tVfHdgn3zgY-IKHDHclNanJt984EXU-awCLcBGAsYHQ/s1600/2.png"/></span></p>
<h3><span style="color: #800000;"><strong>Enumeration</strong></span></h3>
<p><span style="color: #000000;">For more details, we will navigate to a web browser for exploring HTTP service since port 80 is open. It clearly is not enough for a clue to proceed.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-FXariQTKtZg/XsGKtBwpVtI/AAAAAAAAkFk/uM8x5bpTNY43Ird0UMCAAfGbn-HcM1kFgCLcBGAsYHQ/s1600/3.png"/></span></p>
<p><span style="color: #000000;">Till now we didn’t find any hint to establish our foothold, therefore we chose DIRB for directory brute force attack on port 8088. After a few tries we found URL for an HTML page for upload, Let’s browse it and see what service it has.</span></p>
<pre class="lang:default decode:true">dirb http://192.168.1.119:8088/ -X .html</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-biWiDzJxA94/XsGKuA_9tUI/AAAAAAAAkFo/bPwwTwoHlF85cAOO3vaJWVPWky-KyEsXwCLcBGAsYHQ/s1600/4.png"/></span></p>
<h3><span style="color: #800000;"><strong>Exploiting</strong></span></h3>
<p><span style="color: #000000;">On browsing the page we saw the page consist of file upload option but why does it have two upload options. This is interesting. We went for the second upload option and upload the pentestmonkey’s php reverse shell. Let’s see if we can shell this machine.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-Pe5YpWZt22k/XsGKuRhu3JI/AAAAAAAAkFs/hGV4EgOIU4s1xX3_1uw88vP1K8hInk2WgCLcBGAsYHQ/s1600/6.png"/></span></p>
<p><span style="color: #000000;">After successfully uploading our file, it asked us to wait for 1 minute. The message that made us curious was the shell upload was internally redirected to another directory after being uploaded. The only thing left is to execute our shell.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-cKcom4nQPaU/XsGKutOcvVI/AAAAAAAAkFw/7HqNyRCvWX44g8wRdiPiys_MzLgf3mBIgCLcBGAsYHQ/s1600/7.png"/></span></p>
<p><span style="color: #000000;">After a few tries, we changed the port from 8088 to 8715 because the previous hint gave a clue that the file has been internally redirected. So changing port and executing the file got us the shell.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-Np9c-OuiMiM/XsGKvB_jPPI/AAAAAAAAkF0/XdCRNdcj1kgot7FZxkw4A6p-JBLL6Ky9ACLcBGAsYHQ/s1600/8.png"/></span></p>
<h3><span style="color: #800000;"><strong>Privilege Escalation</strong></span></h3>
<p><span style="color: #000000;">Thus, we explored further and looked for weak service configuration such as SUDO and SUID permission but found nothing related to it. After spending some more time, we saw capability with +ep permission is set on python2.7. We have used this command to remove the file capability.</span></p>
<pre class="lang:default decode:true">getcap -r / 2&gt;/dev/null</pre>
<p><span style="color: #000000;">There we got out shell. The only thing left is to get the root access. We looked for system capabilities and found empty capability (ep) over suid is given python2.7 for www-data that means all privilege is assigned to www-data for that program, therefore taking advantage of this permission we can escalate into high privilege from low privilege shell using the command below.</span></p>
<pre class="lang:default decode:true  ">/usr/bin/python2.7 -c 'import os; os.setuid(0); os.system("/bin/bash")'</pre>
<p><span style="color: #000000;"><strong>*NOTE- For Privilege Escalation through Capabilities. Please refer the link below.</strong></span></p>
<p><span style="color: #000000;"><a style="color: #000000;" href="https://www.hackingarticles.in/linux-privilege-escalation-using-capabilities/"><strong>https://www.hackingarticles.in/linux-privilege-escalation-using-capabilities/</strong></a></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-4UB7OlRz4jY/XsGKvI07CkI/AAAAAAAAkF4/HM_waQ4hVA4_Kg7QxgD3lh_xlZ6qb7EvQCLcBGAsYHQ/s1600/9.png"/></span></p>
<p><span style="color: #000000;"><strong>Author:</strong> Ashray Gupta is a Security Researcher and Technical Writer at Hacking Articles. Contributing his 3 years in the field of security as a Penetration Tester and Security Analyst. Contact <span style="color: #0000ff;"><strong><a style="color: #0000ff;" href="https://www.linkedin.com/in/ashray-gupta-b77221b6/">Here</a></strong></span></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
