<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/ctf-challenges/" rel="category tag">CTF Challenges</a>, <a href="https://www.hackingarticles.in/category/ctf-challenges/vulnhub/" rel="category tag">VulnHub</a></span>            </div>
            <h1 class="post-title entry-title">Hack the Pentester Lab: from SQL injection to Shell VM</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/hack-pentester-lab-sql-injection-shell-vm/" rel="bookmark"><time class="entry-date published" datetime="2017-01-10T15:12:21+00:00">January 10, 2017</time><time class="updated" datetime="2025-06-10T20:12:51+00:00">June 10, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">Hello friends!! Today we are going to solve another CTF challenge “From SQL injection to Shell I”. This VM is developed by Pentester Lab.  You can download it from here: https://www.vulnhub.com/entry/pentester-lab-from-sql-injection-to-shell,80/</span></p>
<p><span style="color: #000000;">Install the iso image in VM ware and start it. The task given in this lab is to gain access to administration console and upload PHP webshell.</span></p>
<p><span style="color: #000000;"><strong>Level:</strong> Beginner</span></p>
<h3><span style="color: #800000;"><strong>Penetrating Methodologies</strong></span></h3>
<ul>
<li><span style="color: #000000;">Network Scanning (Nmap)</span></li>
<li><span style="color: #000000;">Vulnerable to Error Base SQL Injection</span></li>
<li><span style="color: #000000;">Exploiting SQL Injection (SQLMAP)</span></li>
<li><span style="color: #000000;">Uploading Web shell</span></li>
<li><span style="color: #000000;">Spawning Shell (Netcat)</span></li>
</ul>
<p><span style="color: #000000;"><strong>Walkthrough </strong></span></p>
<p><span style="color: #000000;">The target holds 192.168.1.103 as network IP; now using nmap lets find out open ports.</span></p>
<pre class="lang:default decode:true ">nmap -A 192.168.1.103</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-IxRasGjcT1s/W3Z_KCVrUII/AAAAAAAAZy0/ED1CZ1xnNDAkFibw3H53lvpDewT4BN0DwCLcBGAs/s1600/1.png"/></span></p>
<p><span style="color: #000000;">Since port for HTTP is open, so we explored target IP in the web browser and welcome by My Awesome Photoblog web page. It contains some tags: home; test; ruxcon; 2010; all pictures; admin. Click on the <strong>test</strong>.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-NOFKynofuxQ/W3Z_K44aGTI/AAAAAAAAZzI/3w2TIRcC7LMcxASp-srUIl9xJq32bOCJACLcBGAs/s1600/2.png"/></span></p>
<p><span style="color: #000000;">The above URL: http://192.168.1.103/cat.php?id=1 will run a query for ID 1 now let try to find out whether the above URL is vulnerable to SQL injection or not by adding ‘ at last of URL:</span></p>
<pre class="lang:default decode:true">http://192.168.1.103/cat.php?id=1'</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-5quunAxrf6k/W3Z_LVIsDdI/AAAAAAAAZzM/22NBx50MIHMAiQyf3SKVW5mlrqfmhQs7QCLcBGAs/s1600/3.png"/></span></p>
<pre class="lang:default decode:true">sqlmap -u http://192.168.1.103/cat.php?id=1 --dbs --batch</pre>
<p><span style="color: #000000;">If you remembered the title of the web page was “An Awesome Photoblog” hence name of the database should be a photoblog.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-b06W0sI60gY/W3Z_LRYCenI/AAAAAAAAZzQ/hTtXtV4dUqoL-btHwi1TXYjCz_ulh6K8ACLcBGAs/s1600/4.png"/></span></p>
<p><span style="color: #000000;">Now let’s fetch entire data under photoblog database through the following command:</span></p>
<pre class="lang:default decode:true">sqlmap –u http://192.168.1.103/cat.php?id=1 –D photoblog --dump-all --batch</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-g4b5E0m859M/W3Z_LvtYZWI/AAAAAAAAZzU/m6RogB3CZIUQF8aNz3nKoSSsiSBudsiCQCLcBGAs/s1600/5.png"/></span></p>
<p><span style="color: #000000;">The first task was to gain access to the administration console for which we required the login: password of his account. Through sqlmap command, we have got login as <strong>admin</strong> and password as <strong>P4ssw0rd.</strong></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-bb5MFaqtvq8/W3Z_L6H-HlI/AAAAAAAAZzY/Y3bvV7icEcQtgCbFN8E3KANqdGB5RoaKQCLcBGAs/s1600/6.png"/></span></p>
<p> </p>
<p><span style="color: #000000;">Congrats!!! The first task is completed.</span></p>
<p><span style="color: #000000;">Now the last task is to upload PHP webshell. Under administration console, you will see a link <strong>Add a new picture</strong> to upload an image in this web server. Click on <em>Add a new picture </em>to upload an image.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-5c0DnrqOoag/W3Z_L_dGSzI/AAAAAAAAZzc/StPxDYImA6sgkcp5YXYhvcgyp7O-lNBrACLcBGAs/s1600/7.png"/></span></p>
<p><span style="color: #000000;">Traverse to the directory: /usr/share/webshells/php/php-reverse-shell.php</span></p>
<p><span style="color: #000000;">Open it with a text editor and <strong>add listening</strong> <strong>IP </strong>and <strong>port</strong> to get the reverse connection of victim’s machine and save this file with a php extension. Then launch netcat listener at listening port.</span></p>
<pre class="lang:default decode:true">nc -lvp 1234</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-gHWyixCSN9k/W3Z_MLS9KrI/AAAAAAAAZzg/OMJtAEHE_AEMLy3Ub0gfE0EShYsYCd8_gCLcBGAs/s1600/8.png"/></span></p>
<p><span style="color: #000000;">Then I uploaded our malicious PHP script.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-YIw8u4KdT3c/W3Z_MfbDa-I/AAAAAAAAZzk/8KCpsYWUxGAbRW05gRqLjqE6UUee7tN8wCLcBGAs/s1600/9.png"/></span></p>
<p><span style="color: #000000;">It gives error NO PHP!! It means there is some whitelist for filtering PHP/php extension. </span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-TJOj0_kW_x8/W3Z_KZ422uI/AAAAAAAAZy4/Dih3iMOc3ycH0CdkWRco-Rqgn23z9wEHQCLcBGAs/s1600/10.png"/></span></p>
<p><span style="color: #000000;">Then I rename the malicious script as <strong>shell.pHP</strong> and try to upload it again.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-EZQ95yj4U9I/W3Z_KEFZ-LI/AAAAAAAAZy8/r9xTacHU2f4i2NwVUbcszDxCiaV4Q6h7wCLcBGAs/s1600/11.png"/></span></p>
<p><span style="color: #000000;">Now you can perceive that a new row is added as a shell which contains our backdoor shell.pHP, now to execute a backdoor <strong>click</strong> on shell and you will get a reverse connection at netcat.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-PDlk89nKL6A/W3Z_KjJwrOI/AAAAAAAAZzA/YOrVA6mHVIAsvsYXechyi2VTJ-P0L-aBACLcBGAs/s1600/12.png"/></span></p>
<p><span style="color: #000000;">Wonderful!!! We completed our last challenge also here we have spawned victim web shell.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-panIzkgvwrE/W3Z_K5UmvZI/AAAAAAAAZzE/ZaJPYbVimGsV17jljRRWhGTI1n5m965MwCLcBGAs/s1600/14.png"/></span></p>
<p><span style="color: #000000;"><strong>Author: </strong>Aarti Singh is a Researcher and Technical Writer at Hacking Articles an Information Security Consultant Social Media Lover and Gadgets. Contact<strong><a style="color: #000000;" href="https://www.linkedin.com/in/aarti--singh/"> here</a></strong></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
