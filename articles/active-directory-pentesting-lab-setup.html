<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/pentest-lab-setup/" rel="category tag">Pentest Lab Setup</a>, <a href="https://www.hackingarticles.in/category/red-teaming/" rel="category tag">Red Teaming</a></span>            </div>
            <h1 class="post-title entry-title">Active Directory Pentesting: Lab Setup</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/active-directory-pentesting-lab-setup/" rel="bookmark"><time class="entry-date published" datetime="2021-03-09T18:34:19+00:00">March 9, 2021</time><time class="updated" datetime="2025-05-13T08:59:59+00:00">May 13, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p class="" data-start="458" data-end="862"><span style="color: #000000;">Today in this article, we will be learning about the <strong data-start="511" data-end="552">Active Directory Pentesting Lab Setup</strong>. Active Directory is Microsoft’s directory-based identity-related service developed for Windows Domain networks. In this guide, we’ll walk through the <strong data-start="704" data-end="753">step-by-step setup of an Active Directory lab</strong> using Windows Server 2016 and a virtual machine. So, let’s get started with configuring the lab environment.</span></p>
<h3><span style="color: #800000;">Table of Contents</span></h3>
<ul>
<li><strong><span style="color: #000000;">Introduction to Active Directory</span></strong></li>
<li><strong><span style="color: #000000;">Lab Requirements</span></strong></li>
<li><strong><span style="color: #000000;">Configuring Windows Server 2016</span></strong></li>
<li><strong><span style="color: #000000;">Installing AD DS </span></strong></li>
<li><strong><span style="color: #000000;">Network Configurations</span></strong></li>
<li><strong><span style="color: #000000;">Post-Deployment Configurations</span></strong></li>
<li><strong><span style="color: #000000;">Create OU and user</span></strong></li>
<li><strong><span style="color: #000000;">Add Client to the Domain</span></strong></li>
</ul>
<h3><span style="color: #800000;">Introduction to Active Directory</span></h3>
<p><span style="color: #000000;">The role of a directory is to store information about the objects present within it, but the Active Directory not only stores data but also provides it to the Network Administrators and the users of that particular domain whenever it is requested. It generally stores important information about the users like their names, passwords, contact information, etc and provides it to other users with authority in the same network to make use of the available information.</span></p>
<p><span style="color: #000000;">Active Directory stores data in a structured form hierarchically. It can have upright security with logon authentications and by having access control over the objects present in the Active Directory. For easy management one can also implement policy-based administration.</span></p>
<h3><span style="color: #800000;">Lab Requirements</span></h3>
<ul>
<li><span style="color: #000000;">Virtual Machine (VMware Work Station/Player)</span></li>
<li><span style="color: #000000;">Windows Server 2016</span></li>
<li><span style="color: #000000;">Windows 10 Pro Operating System (Client)</span></li>
</ul>
<h3><span style="color: #800000;">Configuring Windows Server 2016</span></h3>
<p><span style="color: #000000;">Power on your VMware, and let’s begin with the installation by creating a new Virtual machine from the File option. Here you will personalise your Windows system by providing it with your username and the password that you want to set. Then click on Next to proceed.</span></p>
<p><span style="color: #000000;"><img fetchpriority="high" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-oSrQsYaGKxE/YEe2evCaZhI/AAAAAAAAuk8/97d5KR3Iza0MZeBPzuM7bRrbM6mti9uEACLcBGAsYHQ/s16000/1.png" alt="Active Directory Pentesting Lab Setup" width="429" height="425"/></span></p>
<p><span style="color: #000000;">Now go to Virtual Machine settings and click on Network Adapter settings and make sure that there is a bridged connection where the host system’s physical network connection will be replicated. Let’s close this and move ahead.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-Nb5XcGGW_sg/YEe44RQL8lI/AAAAAAAAulE/bHKoG0-IYQYpgBefqExVyltISkrhMJv8ACLcBGAsYHQ/s16000/2.png"/></span></p>
<p><span style="color: #000000;">Here you see that the setup did not proceed, therefore let’s go back and fix this error from occurring.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-b3VPUfSm9FQ/YEe48GsnnmI/AAAAAAAAulI/IMBqv2GJ_j0yVlN-IpWk7nfq5NQoOiQeQCLcBGAsYHQ/s16000/3.png"/></span></p>
<p><span style="color: #000000;">We will go back to Virtual Machine settings and click on Floppy, there under the connection option and choose the Use floppy image file option to make it work like a charm and proceed.</span></p>
<p><span style="color: #000000;"><img decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-1W7QGIGTM7g/YEe4_iAuZYI/AAAAAAAAulM/EgSgl_8UtUUEnurgQ48FXlaK_JGrF_mkACLcBGAsYHQ/s16000/4.png" alt="Active Directory Pentesting Lab Setup" width="698" height="680"/></span></p>
<p><span style="color: #000000;">Now you will select the operating system to install from the four options given below. Here we use Standard Edition with the GUI to have a better user-interface. The Desktop Edition provides much better features as compared to the server-core as it has very limited functions. Click on next to proceed.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-0bRjr6KPw8A/YEe5Gk_nScI/AAAAAAAAulQ/ETv8OSlB8jw7wf_eOsw9ITCEuvLbpt-xQCLcBGAsYHQ/s16000/50.png"/></span></p>
<p><span style="color: #000000;">The operating system should start installing and under the customize setting option enter the password you want to put for the default administrator account.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-USFHaFd_t2g/YEe5MzD5qNI/AAAAAAAAulc/lJTzvGzYeWImCjA67uoCLKWba8PyIOtNgCLcBGAsYHQ/s16000/51.png"/></span></p>
<p><span style="color: #000000;">Now you see that your server is installed and ready to use and can find all the basic details on the server under the system option of the control panel.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-Tr49u3Cei2g/YEe5RyCn7eI/AAAAAAAAulk/H-0B_9j1ArgQuxx7c-UfQFRYbaXonL13gCLcBGAsYHQ/s16000/52.png"/></span></p>
<h3><span style="color: #000000;"><span style="color: #800000;">Installing AD DS</span> </span></h3>
<p><span style="color: #000000;">Now let us open the system properties from the ‘Local Server’ option and let us make changes to the domain name.</span></p>
<p><span style="color: #000000;"><img decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-qIazwPUb32Y/YEe5Z-rQCrI/AAAAAAAAuls/nDjdgZAAwscS-WBsvDm_QcqJNckTfjnqwCLcBGAsYHQ/s16000/53.png" alt="Active Directory Pentesting Lab Setup" width="403" height="459"/></span></p>
<p><span style="color: #000000;">Let’s keep the computer name as DC 1 and make it the member of the workgroup with the name ‘WorkGroup’. On finishing this, click on ‘OK’ to proceed.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-Mv-kK5GZI4U/YEe5d_kuSWI/AAAAAAAAul0/cOv4aVGVtKQ7ErBnsQsoQZsqZyscowaJgCLcBGAsYHQ/s16000/54.png"/></span></p>
<p><span style="color: #000000;">Come back to the dashboard and now let’s begin with configuring the Active Directory role. Click on the Manage option at the top of the Dashboard. Then click on ‘Add roles and features.</span></p>
<p><span style="color: #000000;"><strong> <img decoding="async" src="https://1.bp.blogspot.com/-cZGMRI6JaPU/YEe5iq80-3I/AAAAAAAAul4/dBI38u5Fy5gGi4pw74b9vraqLZAITabSwCLcBGAsYHQ/s16000/55.png"/></strong></span></p>
<p><span style="color: #000000;">You see the installation wizard before you and click on ‘next’ to proceed.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-l-h_FiVRVs4/YEe5m5feM_I/AAAAAAAAul8/7hEZ6njqEvgIkmJKLtm7Z1WsV2ojzyZRQCLcBGAsYHQ/s16000/56.png"/></span></p>
<p><span style="color: #000000;">Then select Role-based or feature-based installation as it allows you to manually configure all the prefered roles at your convenience.</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-FEJWtJr9xb4/YEe5qjH9o2I/AAAAAAAAumA/LbhPeQJ0QH8pKm0WcTOMVyLBQsOu9qt6ACLcBGAsYHQ/s16000/57.png" alt="Active Directory Pentesting Lab Setup" width="780" height="550"/></span></p>
<p><span style="color: #000000;">Choose the server you have created from the server pool that is available before you.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-FEJWtJr9xb4/YEe5qjH9o2I/AAAAAAAAumA/LbhPeQJ0QH8pKm0WcTOMVyLBQsOu9qt6ACLcBGAsYHQ/s16000/57.png"/></span></p>
<p><span style="color: #000000;">Now choose the server roles you want to add. Here we require Active Directory Domain Services. We check that option and click next to proceed.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-9WfxzcdoUow/YEe5zBOhEEI/AAAAAAAAumQ/8y2DPcYyNN4uXEJYboXqdsJg7-sHcbEfwCLcBGAsYHQ/s16000/59.png"/></span></p>
<p><span style="color: #000000;">In features installation Choose Group Policy Management. It is a management feature in Windows that allows you to control multiple users and computer configurations present in an Active Directory environment. Click on Next to proceed.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-9WfxzcdoUow/YEe5zBOhEEI/AAAAAAAAumQ/8y2DPcYyNN4uXEJYboXqdsJg7-sHcbEfwCLcBGAsYHQ/s16000/59.png"/></span></p>
<p><span style="color: #000000;">Now let us confirm the selections you have made for the installation of the Active Directory Domain Server and proceed.</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-ZBrP8NByS4Q/YEe57k86RRI/AAAAAAAAumc/SESJK6CCGkoB4nqHPf7jt9bzDyBvexLSwCLcBGAsYHQ/s16000/61.png" alt="Active Directory Pentesting Lab Setup" width="777" height="550"/></span></p>
<p><span style="color: #000000;">Let us wait for the installation to complete and close the window when it is ready.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-cpWJhuPJ0bQ/YEe5_gQpNfI/AAAAAAAAumk/I68aY02iANMtfnHTnyOaMeoZOabhRvdjQCLcBGAsYHQ/s16000/62.png"/></span></p>
<h3><span style="color: #800000;">Network Configurations</span></h3>
<p><span style="color: #000000;">Enable the ethernet connection and click on Properties. Double click on Internet Protocol Version TCP/IPv4.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-5TrvDjFcRCI/YEe6FVl3oPI/AAAAAAAAumo/-OKEk9JRuewDMZWGp9wj5IfOvsEna9vdwCLcBGAsYHQ/s16000/63.png"/></span></p>
<p><span style="color: #000000;">Now assign the Static IP address and the subnet mask will be automatically be assigned. Also, assign the default gateway. Then assign DNS Server address.</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-IincueAaD1o/YEe6Ndt8PcI/AAAAAAAAumw/8EdWOAUqJcYtPRyXFiymRoXpRQPoT__JACLcBGAsYHQ/s16000/64.png" alt="Active Directory Pentesting Lab Setup" width="394" height="453"/></span></p>
<h3><span style="color: #800000;">Post-Deployment Configurations</span></h3>
<p><span style="color: #000000;">Once the AD DS feature installation is completed you see a flag notification, so let us move on to the configurations that are required in the post-deployment phase. Click on Promote this server to a domain controller to proceed.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-sV-MDMokxfk/YEe6WSYqdFI/AAAAAAAAum8/2KPdB2f28sASa9siU1buuPKK5Ib4fn-mgCLcBGAsYHQ/s16000/65.png"/></span></p>
<p><span style="color: #000000;">In Deployment Configuration let’s create a new forest with the root domain name as ignite.local. A forest in the Active Directory is of the highest level of organisation. Each forest has the potential to share a single database, a global address list and security boundaries. Therefore, by default one use or even for that matter an administrator belonging to one forest cannot make us of another forest.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-khF8hwsNICA/YEe6bk-dRCI/AAAAAAAAunA/8-pe9PaB6yUHW7yjU1jGwOHKO4RK3-COgCLcBGAsYHQ/s16000/66.png"/></span></p>
<p><span style="color: #000000;">Now let’s configure the domain controller capabilities by checking the first two boxes which allow DNS server and Global Catalog. Also, enter the Directory Services Restore Mode password which is a safe mode booting method for windows server domain controllers. The Domain functional level will depend on the forest functional level. Click on Next to proceed.</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-IxfITlTZGA8/YEe6w9xJ7QI/AAAAAAAAunY/2zqNegPWFQ4G4AWYkuwK7ah5bKrfdHdmQCLcBGAsYHQ/s16000/67.png" alt="Active Directory Pentesting Lab Setup" width="757" height="552"/></span></p>
<p><span style="color: #000000;">You can skip this option and click on Next.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-V_XMZayXOnY/YEe6361NX2I/AAAAAAAAunc/SX5CSvZ8lqUEPOLQd6XwMmIs9mzzac8dgCLcBGAsYHQ/s16000/68.png"/></span></p>
<p><span style="color: #000000;">In the additional option, you can verify your NetBIOS name as entered prior and proceed.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-KaM4wfAGlTs/YEe67jnb8DI/AAAAAAAAung/8vP-SB5_c1oaRYkQ6HeLp0lDMZT8K1KvgCLcBGAsYHQ/s16000/69.png"/></span></p>
<p><span style="color: #000000;">Mention the path for creating AD DS database, log files and SYSVOL storage and proceed.</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-Id0qdWEK2jI/YEe6_QjVFRI/AAAAAAAAunk/bdbFGRtm0icyJNkkDFZjTJUNGZ9gZDoBQCLcBGAsYHQ/s16000/70.png" alt="Active Directory Pentesting Lab Setup" width="753" height="554"/></span></p>
<p><span style="color: #000000;">Check all the specifications that you have set are correct and Install the configuration. On finishing the installation, the server will reboot itself and ask you to login again.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-xkYyhCdGWGs/YEe7DdJ_-OI/AAAAAAAAuno/UFWqw0AllhIyRD4iHYr8XZ4rG-tVyBBogCLcBGAsYHQ/s16000/71.png"/></span></p>
<h3><span style="color: #800000;">Create OU and user</span></h3>
<p><span style="color: #000000;">Now let us proceed to create users in our Active Directory by clicking on <strong>Tools/Active Directory Users and Computers. </strong>It will open a new window; click on the domain name you have created and then click on <strong>New/Organisational Unit</strong>.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-dysT7Vp7j7E/YEe7JlYBGdI/AAAAAAAAunw/ZvrkcepCktAM4vkyuncURtwNXA_zg2VZQCLcBGAsYHQ/s16000/73.png"/></span></p>
<p><span style="color: #000000;">A new window will appear for creating a new object. You can name it as per your requirement and proceed.</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-XTBo53cCx3I/YEe7RMCI-TI/AAAAAAAAun8/cBTORdOh1fsCUHiDubSX03pBZJz4D443QCLcBGAsYHQ/s16000/74.png" alt="Active Directory Pentesting Lab Setup" width="433" height="377"/></span></p>
<p><span style="color: #000000;">A window to create a new object which is a user will appear. Enter all the required details of the user and proceed.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-c0CGp6DKHuE/YEe7pYanfvI/AAAAAAAAuoM/ism52nIIuKMO679cqUpfZwyumXWa-EQoQCLcBGAsYHQ/s16000/76.png"/></span></p>
<p><span style="color: #000000;">Enter the password for the newly created user and then proceed ahead. Voila! Your user has been created.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-uHa09oapAwM/YEe70NXSegI/AAAAAAAAuoQ/mJTLCk-MzUcx4cYuVso3UO364NaULN_pACLcBGAsYHQ/s16000/77.png"/></span></p>
<p><span style="color: #000000;">Subsequently you can create multiple users under an organisational unit.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-oZdRMXsNuk4/YEe75JISSVI/AAAAAAAAuoY/csoVsMwbnIAoXzzIWwSCkvw5zIc0omp8gCLcBGAsYHQ/s16000/78.png"/></span></p>
<h3><span style="color: #800000;">Add Client to the Domain</span></h3>
<p><span style="color: #000000;">Here in the Windows 10 system before connecting it to the domain, we have to set a Static IP for the system and mention the IP address of the Domain Controller in the DNS server address.</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-6UE5dP2EDsc/YEe7-01uyRI/AAAAAAAAuoc/IdafVCSh7jsN1K-vRpfZm6J3BmqgTBtRQCLcBGAsYHQ/s16000/79.png" alt="Active Directory Pentesting Lab Setup" width="398" height="451"/></span></p>
<p><span style="color: #000000;">Go to the control panel and check the basic information of your system and change the computer name settings.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-8FzOneyGsSg/YEe8EThzoWI/AAAAAAAAuok/eh6jj3OblWsIenDzZzM9-ET_b-2_XyVowCLcBGAsYHQ/s16000/80.png"/></span></p>
<p><span style="color: #000000;">Now click on the change option to join the domain.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-EAloBSi-ASM/YEe8IvwgRoI/AAAAAAAAuoo/E-IninFS4v8BFEik7AEQsrBD2vvAuVO2gCLcBGAsYHQ/s16000/81.png"/></span></p>
<p><span style="color: #000000;">It will display your computer name and click on domain under the member and you will be prompted to enter the username and password of the domain changes that you are making.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-vZ_8EiFHBlM/YEe8NTT4PeI/AAAAAAAAuos/wepJ10hFXFkTzXnacN2np99MPA9-aZMxgCLcBGAsYHQ/s16000/82.png"/></span></p>
<p><span style="color: #000000;">Once, you are done with this, restart your system and you can login with your username and password to sign in under the domain that you had previously created.</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-8EYQ9S_C_IQ/YEe8SId1itI/AAAAAAAAuo0/NCU7-hjhlcU9IDlJ69Rn3vlOXbg23-UvQCLcBGAsYHQ/s16000/83.png" alt="Active Directory Pentesting Lab Setup" width="601" height="615"/></span></p>
<p><span style="color: #000000;">After logging in you can open the command prompt and go too the directory in which your user is present. Make use of the net user command and mention the user’s name with domain. You will get details about the user</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">net user yashika /domain</pre>
<p><span style="color: #000000;"><strong> <img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-hmQ3XPUV1oY/YEe8WTdtocI/AAAAAAAAuo8/7HssW0E3L1cbjq8B2Xt8ALsSoYALIqx0QCLcBGAsYHQ/s16000/84.png" alt="Active Directory Pentesting Lab Setup" width="639" height="504"/></strong></span></p>
<p><span style="color: #000000;">Hence here your Active Directory Pentesting Lab setup is complete and ready to use. Happy Pentesting!<br/>
For more Active Directory Pentesting refer this: <strong><a href="https://www.hackingarticles.in/tag/active-directory/">Link</a></strong></span></p>
<p><span style="color: #000000;"><strong>Author: </strong>Jeenali Kothari is a Digital Forensics enthusiast and enjoys technical content writing. You can reach her on<strong><a style="color: #000000;" href="https://www.linkedin.com/in/jeenali-kothari"> <span style="color: #0000ff;">Here</span></a></strong></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
