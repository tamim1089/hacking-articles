<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/android-penetration-testing/" rel="category tag">Android Penetration Testing</a>, <a href="https://www.hackingarticles.in/category/pentest-lab-setup/" rel="category tag">Pentest Lab Setup</a></span>            </div>
            <h1 class="post-title entry-title">Android Pentest Lab Setup &amp; ADB Command Cheatsheet</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/android-pentest-lab-setup-adb-command-cheatsheet/" rel="bookmark"><time class="entry-date published" datetime="2020-12-07T17:57:22+00:00">December 7, 2020</time><time class="updated" datetime="2025-05-13T09:00:02+00:00">May 13, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">To learn Android pentest in a much handier way, we’ll be setting up an Android Pentest environment on our own system rather than conducting an experiment on a live device. We should note that you can conduct these practicals on a phone with the USB debugging option on as well, but we’ll be using an Android virtual machine, also known as the Android Emulator. Genymotion is an example of an Android emulator available for download in the market, which can be very helpful for Android penetration testing. It is a preferred choice while setting up a lab for Android pen testing because it is easy to setup, offers ADB support, and Google Apps support. We’ll be using Genymotion to demonstrate all of our examples in this series, but an individual can use any other emulator that provides basic functionality support, as Genymotion does. Let’s begin.</span></p>
<h3><span style="color: #800000;">Table of Content</span></h3>
<ol>
<li><span style="color: #000000;">Installation of Virtual Environment</span></li>
<li><span style="color: #000000;">Getting Started with Debugging</span></li>
<li><span style="color: #000000;">ADB Command Cheatsheet</span></li>
</ol>
<h3><span style="color: #800000;">Installation of Virtual Environment</span></h3>
<p><span style="color: #000000;">To download genymotion for free head over to <strong><span style="color: #0000ff;">this </span></strong>website and download genymotion. If you have VirtualBox installed you can choose without Virtualbox edition and otherwise with VirtualBox. Once you download, you can log in on the main screen and accept the license document to get started.</span></p>
<p><span style="color: #000000;"><img fetchpriority="high" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-J_sEeUNGaik/X85CXGv_AiI/AAAAAAAAre0/4FrHksNIDYIDuNGyFmB-vdECJ8quaq5gwCLcBGAsYHQ/s16000/Screenshot_1.png" alt="ADB Command Cheatsheet" width="1023" height="796"/></span></p>
<h4><span style="color: #000000;">Creation of Android Virtual Machine (AVM)</span></h4>
<p><span style="color: #000000;">After you log in, you’ll see a blank screen with 5 different options on the sidebar and a big plus button (+) that you will use to create an Android virtual machine. Click on this plus sign.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-7k6_rYg5Wfc/X85g7NDfxRI/AAAAAAAAre8/mrJEjdpof0oT5t5Ep8jYzRzR3Wc4xRLRwCLcBGAsYHQ/s16000/Screenshot_2.png"/></span></p>
<p><span style="color: #000000;">Upon clicking you’ll see a screen like following that’ll have various options available for different specifications of the virtual machine. You can choose your testing device and Android API you want to install. We’ll be using <strong>Google Pixel 2</strong> with Android <strong>API 28.</strong></span></p>
<p><span style="color: #000000;"><img decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-bbMHPuaAJKc/X85hCKNmyMI/AAAAAAAArfA/nkdjgNrlzJcYDPRngoMx4LCcLaGu5vEmQCLcBGAsYHQ/s16000/Screenshot_3.png" alt="ADB Command Cheatsheet" width="973" height="718"/></span></p>
<h5><span style="color: #000000;"><strong>What is Android APIs? </strong></span></h5>
<p><span style="color: #000000;">Android API refers to the collection of various software modules having different versions that make an Android SDK. In simpler words, A specific API version will correspond to a specific Android release as follows: –</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-D6EAm6SkyTA/X85hIMrakMI/AAAAAAAArfE/AbtSNHqYFF8bnyI0FyVrxqUFjKsI6LpSQCLcBGAsYHQ/s16000/Screenshot_4.1.png"/></span></p>
<p><span style="color: #000000;">We recommend performing testing only on newer APIs.</span></p>
<p><span style="color: #000000;">The next step is to configure cores, RAM, and networking mode. I’ll be setting up 1 core for processing, 1GB of RAM, and NAT mode as follows</span></p>
<p><span style="color: #000000;"><img decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-3B9gvBc3uDk/X85hTtnHdqI/AAAAAAAArfM/0x7FBmxVvmotibIFa0N0CLydI5cK_lAnwCLcBGAsYHQ/s16000/Screenshot_4.png" alt="ADB Command Cheatsheet" width="1017" height="796"/></span></p>
<p><span style="color: #000000;">Once you click the install button, the system will first download the respective API if it is not already available in the SDK, and then the machine will be ready to launch as follows. Right-click on it and press start.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-QccAt81_Zco/X85hZjwY0aI/AAAAAAAArfU/mFat4s3XXRAz_jugfGbxk2L_NG6n7rxfgCLcBGAsYHQ/s16000/Screenshot_5.png"/></span></p>
<p><span style="color: #000000;">This will initiate a virtual box instance under genymotion’s window and the first thing that we’ll do is start networking on the virtual machine by clicking the signal icon.</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-Ul9jq9rH0kw/X85hizEaXaI/AAAAAAAArfY/zqQhuK75KBATAAtDSJ_33TIHbtJ3n_KDACLcBGAsYHQ/s16000/Screenshot_6.png" alt="ADB Command Cheatsheet" width="572" height="618"/></span></p>
<p><span style="color: #000000;">next is to turn the switch to ON and choose the respective networking adapter you want to allocate. In my case a Wi-Fi connection is active so I’ll be allocating Wi-Fi to the machine.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-6mWaxM9ne24/X85hoZrmWvI/AAAAAAAArfg/D_OJdeqag0U735G-dEuJwT1UUkMAPahBACLcBGAsYHQ/s16000/Screenshot_7.png"/></span></p>
<p><span style="color: #000000;">Next is to install Google apps in the virtual machine which won’t come preloaded in the API. You need this in situations where you have to download and test an app from the Play Store or use some other Google app within this virtual machine. We’ll do this by clicking the Open GAPPS button.</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-0Ht_V7bSEuQ/X85hxpDnpyI/AAAAAAAArfo/N_5zqoTkhLMtGPe7GIIqwt45DxJxzW14wCLcBGAsYHQ/s16000/Screenshot_8.png" alt="ADB Command Cheatsheet" width="550" height="557"/></span></p>
<p><span style="color: #000000;">Simply accept the agreement and we’re good to go.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-kSRYAtiBtFo/X85h4rFONyI/AAAAAAAArf0/HaEJc3nKbuwaZWAwpz5LNQEp8EcVjfy_wCLcBGAsYHQ/s16000/Screenshot_9.png"/></span></p>
<h5><span style="color: #000000;"><strong>IMPORTANT</strong>: </span></h5>
<p><span style="color: #000000;">In many scenarios, this type of installation may fail giving an “<strong>archive error</strong>”. In such cases, it is recommended to download Open GApps archive from their website <a style="color: #000000;" href="https://www.opengapps.org">here</a>.</span></p>
<p><span style="color: #000000;">I chose x86 architecture and android version 9.0 with stock variant</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-K2cUIK4hUcM/X85h_IztIEI/AAAAAAAArf4/ibY0qAFvusIG1K8PHVoIPdfTE38bUP-mACLcBGAsYHQ/s16000/Screenshot_10.png" alt="ADB Command Cheatsheet" width="513" height="727"/></span></p>
<p><span style="color: #000000;">After download, simply drag and drop the archive in genymotion window to install the apps. After installation and reboot, you’ll see the Google Apps have been successfully installed.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-PQLC0AO1aUc/X85iFvORocI/AAAAAAAArgA/WnXVNGWdk0A25Y2Buv1jVwEtwDDWDKBOACLcBGAsYHQ/s16000/Screenshot_11.png"/></span></p>
<h3><span style="color: #800000;">Getting Started With Debugging</span></h3>
<p><span style="color: #000000;">Now we are done with our environment setup. In previous screenshots, you must have noticed the IP address of the virtual machine on the title bar. In my case, it is <strong>192.168.52.104</strong>. It is time to try and connect to this virtual machine using the Android Debug Bridge (adb tool).</span></p>
<p><span style="color: #000000;">We head over to Kali and type the following command: –</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">apt install adb
adb connect 192.168.52.104
adb devices -l</pre>
<p><span style="color: #000000;"><strong> <img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-ReOFDl28dfQ/X85iPgXYTuI/AAAAAAAArgM/xLFf0rnoC1UQnC7VOhbIjc8ResbtMMhZACLcBGAsYHQ/s16000/Screenshot_12.png" alt="ADB Command Cheatsheet" width="718" height="203"/></strong></span></p>
<p><span style="color: #000000;"><strong>What is USB debugging? </strong>Debugging is a way for an Android device to communicate with the Android SDK over a USB connection. It allows an Android device to receive commands, files etc from the PC, and allows the PC to pull crucial information like log files from the Android device.</span></p>
<p><span style="color: #000000;"><strong>What is ADB? </strong>Android Debug Bridge is a utility that provides debugging features for android devices. ADB can be used to conduct debugging over USB as well as over TCP. We’ll learn more about ADB in detail in the next section.</span></p>
<h3><span style="color: #000000;"><span style="color: #800000;">ADB Command Cheatsheet</span> </span></h3>
<h4><span style="color: #000000;">Basics</span></h4>
<h5><span style="color: #000000;"><strong>Shell</strong> </span></h5>
<p><span style="color: #000000;"> As we are aware, Android has a Linux kernel. To spawn a shell in the connected device using ADB, we’ll use the command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb connect 192.168.52.104
adb shell
getprop | grep abi</pre>
<p><span style="color: #000000;">The last command helps you view the architecture of the device you’re using.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-pZa3pQ4yKHc/X85ijq6IWsI/AAAAAAAArgc/79ZuL_fWHFMT9hcSWgM0IDmZBNi-zLVYQCLcBGAsYHQ/s16000/t_2%2B%25282%2529.png"/></span></p>
<h5><span style="color: #000000;"><strong>Installation of APK in device</strong></span></h5>
<p><span style="color: #000000;">Let’s say we have an APK kept in the downloads folder of our system that we want to install in one of the devices. Here, I’ve downloaded DIVA from <span style="color: #0000ff;"><strong><a style="color: #0000ff;" href="http://www.payatu.com/wp-content/uploads/2016/01/diva-beta.tar.gz">this</a> </strong></span>link. We can do that in adb using the following command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">cd Downloads/
tar -xvf diva-beta.tar.gz
adb install diva-beta.apk</pre>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-Px7DsKrp_6A/X85isQooXPI/AAAAAAAArgk/qWZTGOKQ-5MUMH6VnVxvhvjNMbPadiKmACLcBGAsYHQ/s16000/t_3.png" alt="ADB Command Cheatsheet" width="416" height="270"/></span></p>
<p><span style="color: #000000;">And sure enough, the application was found in the device.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-oDAWPP9xAIE/X85iyggkKII/AAAAAAAArgo/Y9rvZygVIS4pPxmxjat7HmgliYG8dTeHACLcBGAsYHQ/s16000/t_3_1.png"/></span></p>
<h5><span style="color: #000000;"><strong> Viewing Installed Applications</strong></span></h5>
<p><span style="color: #000000;">All the applications installed in the device is kept under /data/data folder. So, we’ll simply traverse to the folder and view the 10 recent installed applications.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell
cd data/data/
ls | tail -10</pre>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-EqumMewHvzI/X85i9ZcrwnI/AAAAAAAArg0/Mf23IUT68m8BDCJkCRAndglgITs9fw9vACLcBGAsYHQ/s16000/t_4.png" alt="ADB Command Cheatsheet" width="391" height="247"/></span></p>
<h5><span style="color: #000000;"> Starting and Stopping adb service</span></h5>
<p><span style="color: #000000;">This is simply done by the following two commands:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb start-server
adb kill-server</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-dC9Tw4GiM1Q/X85jE_R0crI/AAAAAAAArg4/rU1TFcWkONglEDGz3ZNBuE1sxJ6CW0RnQCLcBGAsYHQ/s16000/t_4_1.png"/></span></p>
<p><span style="color: #000000;">Please note that many of the commands in the upcoming demonstration would require you to run them as root on the android device and hence, we’ll run adb as root. To run it as root you need the following commands:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb root</pre>
<p><span style="color: #000000;">To revert back to unroot status:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb unroot</pre>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-UeKnfO08exs/X85jOG2SzDI/AAAAAAAArhA/s4ERm30EBn0TQuo1oECqr8Xm7WMCfBMSACLcBGAsYHQ/s16000/t_4_2.png" alt="ADB Command Cheatsheet" width="318" height="103"/></span></p>
<h4><strong><span style="color: #000000;">Logs</span></strong></h4>
<ol>
<li><span style="color: #000000;">To monitor device logs we’ll use the logcat tool.</span></li>
</ol>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb logcat</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-npFBfO3Onu0/X85jWflnA1I/AAAAAAAArhI/GhVruPT-NkINqaph7EjmMg1obBjsRqswACLcBGAsYHQ/s16000/t_6.png"/></span></p>
<p><span style="color: #000000;">As you can see all types of logs are now visible. We input credit card number in one of the functions in DIVA and that’s also visible here demonstrating insecure logging vulnerability.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-zcdQ9DOUD2w/X85jg4BMXsI/AAAAAAAArhQ/qsKJVREktKEqy1yvbaKi7V0jiizPZWmmACLcBGAsYHQ/s16000/t_7.png"/></span></p>
<p><span style="color: #000000;">We can explore much other filters and options in logcat under the man page like prioritizing logs, writing logs to log files, dumping logs, rotating log files etc in the master page here.</span></p>
<h4><span style="color: #000000;">Pulling and Pushing Files</span></h4>
<p><span style="color: #000000;">To copy a file from system to android and android to the system, one can use the adb push and pull. Let’s consider copying file to the Android device using push.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">echo "Say my name" &gt; file.txt
adb push file.txt /sdcard/</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-XFk3N5K3M74/X85joWZfQaI/AAAAAAAArhY/ZvplVv8F5w4dO9fdh9x7LuIOFA7CiHo6QCLcBGAsYHQ/s16000/t_8.png"/></span></p>
<p><span style="color: #000000;">To ensure that we transfer the file to the location /sdcard/, we first delete the original file and then pull that file and access it.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">rm file.txt
adb pull /sdcard/file.txt /home/kali/Downloads/new_file.txt
cat new_file.txt</pre>
<pre class="lang:default decode:true"><span style="color: #000000;"><strong> <img decoding="async" src="https://1.bp.blogspot.com/-FY-kXrAemdE/X85jugR4zpI/AAAAAAAArhc/J55hEE--BtcS6dlCRgupxHfU9_baG0WKACLcBGAsYHQ/s16000/t_9.png"/></strong></span></pre>
<h4><span style="color: #000000;">pm tool</span></h4>
<h5><span style="color: #000000;"><strong> Listing</strong>: </span></h5>
<p><span style="color: #000000;">Package Management in Android refers to the management of all the installed packages/ applications in the android. ex: <strong>DIVA</strong> app’s package name is <strong>jakhar.aseem.diva </strong>as visible in the list packages command below:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell pm list packages | tail -10</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-ITpZTdBd2PE/X85j0-mUUuI/AAAAAAAArhg/pVbbD2hIEG8SuPqtdD619U8225gFly76QCLcBGAsYHQ/s16000/t_10.png"/></span></p>
<h5><span style="color: #000000;"><strong> Listing system apps: </strong></span></h5>
<p><span style="color: #000000;">There are some filters you can apply to sort these packages, like to list all the system apps:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell pm list packages -s</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-IAjsFPzavKA/X85j73GHoZI/AAAAAAAArho/rz9uR9DcDvsoRmymWC-_zZ1_ZL8VIcOWwCLcBGAsYHQ/s16000/t_11.png"/></span></p>
<h5><span style="color: #000000;"><strong> Listing third-party apps: </strong></span></h5>
<p><span style="color: #000000;">Similarly, to view all the third-party apps, we have the command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell pm list packages –3</pre>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-pd0i3IBFMjY/X85kDXqxanI/AAAAAAAArhw/ZH6vVVG_PMEEdo8VUmg7spbjoa_9D5liwCLcBGAsYHQ/s16000/t_12.png" alt="ADB Command Cheatsheet" width="376" height="108"/></span></p>
<h5><span style="color: #000000;"><strong> Clearing data of an application</strong>: </span></h5>
<p><span style="color: #000000;">This process is the same as going to the settings and getting rid of its data. To do that we have the following command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell pm clear jakhar.aseem.diva</pre>
<p><span style="color: #000000;"><strong><img decoding="async" src="https://1.bp.blogspot.com/-bWmCmJoqL5o/X85kLXPWgTI/AAAAAAAArh4/eAysFFpJFKQf454yF3LwhiZROgF64LjhwCLcBGAsYHQ/s16000/t_13.png"/><br/>
</strong></span></p>
<h5><span style="color: #000000;"><strong> Display the installation path of a package: </strong></span></h5>
<p><span style="color: #000000;">Can be done using the pm tool like:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell pm path jakhar.aseem.diva</pre>
<p><span style="color: #000000;"><strong><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-kpAO4_wePUQ/X85kUxh5a5I/AAAAAAAAriA/yZz8mDvf7qUYptzyNAZtYsbaniiyftf7QCLcBGAsYHQ/s16000/t_14.png" alt="ADB Command Cheatsheet" width="710" height="580"/></strong></span></p>
<h4><span style="color: #000000;">dumpsys tool</span></h4>
<h5><span style="color: #000000;"><strong> View running services in a package: </strong></span></h5>
<p><span style="color: #000000;">You use the dumpsys command in the shell. Dumpsys is a tool that runs on Android devices and provides info about system services, which you can call from the command line using adb. To view running services in a package:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell dumpsys activity services jakhar.aseem.diva</pre>
<p><span style="color: #000000;">It is interesting to note that this displays services related to diva package. If we input this command without a package name, all the services will be output.</span></p>
<p><span style="color: #000000;"><strong><img decoding="async" src="https://1.bp.blogspot.com/-ULqicOcm4yA/X85kbVhNJcI/AAAAAAAAriI/0xsdoBmZ7OEZkHI_FZ8BXWmXMSx70k9UgCLcBGAsYHQ/s16000/t-13-1.png"/></strong></span></p>
<h5><span style="color: #000000;"> Extracting information about a package: </span></h5>
<p><span style="color: #000000;">A package will have components like actions, activities, content providers etc as mentioned in the previous article and to view this information about a specific package we use the following command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell dumpsys package jakhar.aseem.diva</pre>
<p><span style="color: #000000;"><strong><img decoding="async" src="https://1.bp.blogspot.com/-V45VnbSX6s4/X85koQERmPI/AAAAAAAAriQ/49g4GNyWRRsxq_VRsJn_27DTnEQfVmeSwCLcBGAsYHQ/s16000/t-15.png"/></strong></span></p>
<h5><span style="color: #000000;"><strong> View foreground activity: </strong></span></h5>
<p><span style="color: #000000;">You can display the activity that is currently on the main screen with the following command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell dumpsys activity activities | grep mResumedActivity</pre>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-rmZONxLGS7s/X85kvkhrnsI/AAAAAAAAriY/IlbH2S0x1xYqKTX310BhepZKglbIsjcDgCLcBGAsYHQ/s16000/t-16.png" alt="ADB Command Cheatsheet" width="867" height="389"/></span></p>
<h5><span style="color: #000000;"><strong> Information about activities in a specific package: </strong></span></h5>
<p><span style="color: #000000;">To view the details of activities like current activity paused, history of all the activities opened etc, type in the following command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell dumpsys activity activities | grep jakhar.aseem.diva</pre>
<p><span style="color: #000000;"><strong><img decoding="async" src="https://1.bp.blogspot.com/-ZF1yvbpnXLw/X85k28P0A7I/AAAAAAAAric/OVIUcRWgu1oE5Qx_c9eecN1CGLIb5qXFACLcBGAsYHQ/s16000/t-17.png"/></strong></span></p>
<h5><span style="color: #000000;"><strong> Viewing running services of a package: </strong></span></h5>
<p><span style="color: #000000;">The package name is optional in this command as that will open the running services related to that package. It is as follows:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell dumpsys activity services jakhar.aseem.diva</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-f-K5y-lQ5ys/X85lExXoOvI/AAAAAAAArio/tT4Pimolxw40Q0DXFkTGUblG8V_3Z-qcwCLcBGAsYHQ/s16000/t-18.png"/></span></p>
<h5><span style="color: #000000;"><strong> Viewing detailed information about a package: </strong></span></h5>
<p><span style="color: #000000;">A package has many details ike components, permissions info, version name and code etc. To view these details:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell dumpsys package jakhar.aseem.diva</pre>
<p><span style="color: #000000;"><strong><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-tYbw-m4pJQs/X85lORfzjbI/AAAAAAAAriw/XiAuArPJAXIBCRta6XttJ6fu4gwNl9bhQCLcBGAsYHQ/s16000/t-19.png" alt="ADB Command Cheatsheet" width="704" height="787"/></strong></span></p>
<h4><span style="color: #000000;">am tool</span></h4>
<p><span style="color: #000000;">Developers code activities in Java to perform specific tasks. What’s interesting is that users can also play around with these activities using adb. Another tool called am, installed in Android, provides information about activities by performing many of these functions.</span></p>
<h5><span style="color: #000000;"><strong> Starting Activity: </strong></span></h5>
<p><span style="color: #000000;">To start an activity, in this case, main activity using adb, we type in the following command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell am start -n jakhar.aseem.diva/.APICredsActivity
adb shell am start -n jakhar.aseem.diva/.APICreds2Activity</pre>
<p><span style="color: #000000;"><strong><img decoding="async" src="https://1.bp.blogspot.com/-Fi5vlqe7RbY/X85lVJTCQxI/AAAAAAAAri4/siQ_Lla9CfcbR-qpiklY1-LgAAc2hJJ5ACLcBGAsYHQ/s16000/t-20.png"/></strong></span></p>
<p><span style="color: #000000;">This would open up APICredsActivity activity like this:</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-v1Tuj689qqE/X85laQC7EFI/AAAAAAAAri8/uFDNWcXSmk0aXYKpsQWnNZn_msBk2IwigCLcBGAsYHQ/s16000/t-20-1.png" alt="ADB Command Cheatsheet" width="399" height="562"/></span></p>
<p><span style="color: #000000;">And the other activity too:</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-5qHahVOxYR0/X85lftOU6yI/AAAAAAAArjE/sijWSFiRhywJu4sUJbaafmrwwp8BWF7agCLcBGAsYHQ/s16000/t-20-2.png"/></span></p>
<h5><span style="color: #000000;"><strong> Start/Stop Service: </strong></span></h5>
<p><span style="color: #000000;">To stop a service we use the following command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell am stopservice -n com.android.systemui/.SystemUIService</pre>
<p><span style="color: #000000;">This command will stop the System UI. There would be a blank screen until we start it again using this command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell am startservice -n com.android.systemui/.SystemUIService</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-rmh3d5q2lHY/X85llVO950I/AAAAAAAArjI/e7Kr2VXHpMEL9jLIP67bXgFeve_0REQ2gCLcBGAsYHQ/s16000/t-22.png"/></span></p>
<h4><span style="color: #000000;">Miscellaneous</span></h4>
<h5><span style="color: #000000;"><strong> Capturing a screenshot: </strong></span></h5>
<p><span style="color: #000000;">screencap is a handy tool installed in Android to take screenshots. This tool runs behind the screenshot feature and you can call it using ADB like:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell screencap /sdcard/ss_2.png</pre>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-63gNQUXUyy0/X85lscopMMI/AAAAAAAArjQ/dLgkqE8kQ5gthcZClxDiQnHiJz_kLN28wCLcBGAsYHQ/s16000/t-28.png" alt="ADB Command Cheatsheet" width="389" height="81"/></span></p>
<p><span style="color: #000000;">2<sup>nd</sup> argument is the local path where the screenshot will be stored, and we can customise it. In this case, I’ve put in <strong>sdcard/ </strong>as the path and we traverse to that folder to see ss_2.png there:</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/--lZ2vDEh-3A/X85lzKBaclI/AAAAAAAArjY/waUsQWPup9sjr0vRwtoeU69SnhRhSNbUQCLcBGAsYHQ/s16000/t-29.png"/></span></p>
<h5><span style="color: #000000;"><strong> Recording the screen: </strong></span></h5>
<p><span style="color: #000000;">Just like you can take screenshots, you can also create a video recording of the screen using the screenrecord tool in Android with the following command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell screenrecord /sdcard/demo.mp4 --size 400x400 --bit-rate 200000 --time-limit 5 --rotate --verbose</pre>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-wPkt2u4wHsA/X85l5xgggFI/AAAAAAAArjg/5cOCrEPXhYUX71poyWA58BmE-oldKDY6wCLcBGAsYHQ/s16000/t-31.png" alt="ADB Command Cheatsheet" width="799" height="278"/></span></p>
<p><span style="color: #000000;"><strong>/sdcard/demo.mp4 </strong>– Path to store the recording</span></p>
<p><span style="color: #000000;"><strong>size </strong>– The size in pixelxpixel (heightxwidth) in which the video will be recorded</span></p>
<p><span style="color: #000000;"><strong>bit-rate </strong>– Corresponds to the quality of the video in short</span></p>
<p><span style="color: #000000;"><strong>time-limit </strong>– Max time for which screen will be recorded</span></p>
<p><span style="color: #000000;"><strong>rotate </strong>– Makes default portrait orientation upside down and vice versa in the recording. Can be customised for specific angles.</span></p>
<p><span style="color: #000000;">We’ll see output like the following:</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-3IA5lDk1TGg/X85mAmdhMzI/AAAAAAAArjo/6SfcBOvYC8Y5V1kLEIjTNUAPY-9lOSm8QCLcBGAsYHQ/s16000/t-32.png"/></span></p>
<h5><span style="color: #000000;"><strong> Viewing the process ID of a package: </strong></span></h5>
<p><span style="color: #000000;">It is important from a pentester’s point of view to know the process ID of an application package. This can be done by:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell pidof jakhar.aseem.diva</pre>
<p><span style="color: #000000;">For example, I have to inspect the logs of this package, I can filter it out using grep and the PID like:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb logcat | grep 7399</pre>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-O5dAM9nsoYQ/X85mI7yi5yI/AAAAAAAArjw/xzE8hySNFXgJIINgYUh1yGB8qKHK1VOwgCLcBGAsYHQ/s16000/t-33.png" alt="ADB Command Cheatsheet" width="783" height="395"/></span></p>
<h5><span style="color: #000000;"><strong> Viewing Battery Status: </strong></span></h5>
<p><span style="color: #000000;">You can dump all the information, from voltage to level, using the dumpsys battery command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell dumpsys battery</pre>
<p><span style="color: #000000;">We can play around with the battery level by the following command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell dumpsys battery set level 0</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-p-fhh99CRwY/X85mP_PUpmI/AAAAAAAArj4/vNHbyrYzcNQJWSWLHUve7KiwzTsBEqjhACLcBGAsYHQ/s16000/t-34.png"/></span></p>
<p><span style="color: #000000;">Sure enough, let’s see how the battery now looks like:</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-bKaGViy5a-o/X85mW2v3xtI/AAAAAAAArkA/s2VqrtcV2eobvY0KpDbIBgYXArsehbKiwCLcBGAsYHQ/s16000/t-35.png"/></span></p>
<h5><span style="color: #000000;"><strong>Key events in Android: </strong></span></h5>
<p><span style="color: #000000;">A sequence of key events describes each key in Android. You can describe these as follows:</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-2WwBg6N0MFs/X85mc77KJUI/AAAAAAAArkI/yuMNkAXrpv8ziRD3VwaRfD2kSQHMEPq1wCLcBGAsYHQ/s16000/t-36.png" alt="ADB Command Cheatsheet" width="626" height="319"/></span></p>
<p><span style="color: #000000;">Let’s try out keyevent 3. Here is a page with a random activity opened up:</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-zngL51zzjkY/X85ml9_8p7I/AAAAAAAArkQ/TLYbm7LUMSUAIJww5l1c1DOwG-4ZVDTAwCLcBGAsYHQ/s16000/t-37.png"/></span></p>
<p><span style="color: #000000;">Now, the command to send key event 3 is:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell input keyevent 3</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-dUq4IYqDj3I/X85mq1uX1WI/AAAAAAAArkY/H6cENiPeQNMobVK_liB76qoHO6BvVNjlwCLcBGAsYHQ/s16000/t-38.png"/></span></p>
<p><span style="color: #000000;">After the command, the user presses the home button and the screen looks like:</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-Z28aew1TpBc/X85mvoj3oSI/AAAAAAAArkg/V52KZ-PUk3wrf44j0EFvEZWe2CMhQ3-yACLcBGAsYHQ/s16000/t-39.png"/></span></p>
<h5><span style="color: #000000;"><strong> Viewing kernel logs: </strong></span></h5>
<p><span style="color: #000000;">To view kernel logs for testing purposes we can type in the following command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell dmesg</pre>
<p><span style="color: #000000;">The list would be too long so I’ll just view first 20 logs:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell dmesg | head -20</pre>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/--b526ZMPiwE/X85m0tASrRI/AAAAAAAArkk/JnDGZJPAieU374WKsMaYoILiBB-EFbZQwCLcBGAsYHQ/s16000/t-40.png" alt="ADB Command Cheatsheet" width="735" height="542"/></span></p>
<h5><span style="color: #000000;"><strong> Enumerating device: </strong></span></h5>
<p><span style="color: #000000;">Use the getprop tool in Android to find the model of the phone you’re connected to:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell getprop ro.product.model</pre>
<ul>
<li><span style="color: #000000;"><strong>wm tool</strong>– wm tool in Android relates and gives information about windows. To find out the window resolution, we use the following command:</span></li>
</ul>
<h4><span style="color: #000000;">adb shell wm size</span></h4>
<p><span style="color: #000000;">To find information about display screen like DPI, Display ID number etc we type in the following command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell dumpsys window displays</pre>
<p><span style="color: #000000;"><strong><img decoding="async" src="https://1.bp.blogspot.com/-Z9iMoyCLo-c/X85m6pJSEdI/AAAAAAAArko/LGJ2cWEnbz47eQeDZRiUuSrTp16TQaVegCLcBGAsYHQ/s16000/t-41.png"/></strong></span></p>
<p><span style="color: #000000;">We can modify the screen resolution as well with wm tool using the following command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell wm size 480x1024
adb reboot</pre>
<p><span style="color: #000000;">where the size is in pixels.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-rWNc1pf8eAg/X85m_2gjlbI/AAAAAAAArkw/dtMtSVfeICYdx_AKTT2u2PEhTfF0-JgXgCLcBGAsYHQ/s16000/t-41-1.png"/></span></p>
<p><span style="color: #000000;">Finally, after reboot, the window will look something like this:</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-EcekqaZJjeU/X85nFcPR27I/AAAAAAAArk4/csMK_pPOZ-w-NmLisyT3xQJ5qNI_4LK4QCLcBGAsYHQ/s16000/t-41-2.png" alt="ADB Command Cheatsheet" width="494" height="827"/></span></p>
<ul>
<li><span style="color: #000000;"><strong>Secure Android ID and IMEI number: </strong>The system generates a 64-bit Secure Android ID on the first boot. Users can also find this ID in the settings. It remains constant. On the other hand, the device has a unique telephony IMEI number. Users can view them with the following commands:</span></li>
</ul>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">adb shell settings get secure android_id
adb shell dumpsys iphonesubinfo</pre>
<p><span style="color: #000000;"><strong><img decoding="async" src="https://1.bp.blogspot.com/-Q58y_4Fw-3M/X85nKdlu7bI/AAAAAAAArk8/Q6z6-SJZmxEfCQRZmcWzChF8yn8oB3vJgCLcBGAsYHQ/s16000/t-42.png"/></strong></span></p>
<h3><span style="color: #800000;">Conclusion</span></h3>
<p><span style="color: #000000;">In this article, we have looked how to set up a testing environment in our PC using Genymotion Android Emulator and performing various functions on it using ADB tool that we installed in Kali. In upcoming articles we’ll have a look at various other tools, OWASP methodology for testing, understanding what are android vulnerabilities and of course, automated tool for android security testing. Thanks for reading.</span></p>
<p><span style="color: #000000;">To learn more about Android Penetration Testing. Follow this <strong><a href="https://www.hackingarticles.in/category/android-penetration-testing/">Link.</a></strong></span></p>
<p><span style="color: #000000;"><strong>Author: Harshit Rajpal </strong>is an InfoSec researcher and a left and right brain thinker. Contact<strong> <span style="color: #0000ff;"><a class="broken_link" style="color: #0000ff;" href="https://in.linkedin.com/in/harshit-rajpal-79bb43103">here</a></span></strong></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
<!-- YARPP Thumbnails -->
<h3>Related posts:</h3>
<div class="yarpp-thumbnails-horizontal">
<a class="yarpp-thumbnail" rel="norewrite" href="https://www.hackingarticles.in/file-transfer-cheatsheet-windows-and-linux/" title="File Transfer Cheatsheet: Windows and Linux">
<span class="yarpp-thumbnail-default"><img src="https://www.hackingarticles.in/wp-content/plugins/yet-another-related-posts-plugin/images/default.png" alt="Default Thumbnail" data-pin-nopin="true"/></span><span class="yarpp-thumbnail-title">File Transfer Cheatsheet: Windows and Linux</span></a>
<a class="yarpp-thumbnail" rel="norewrite" href="https://www.hackingarticles.in/msfvenom-cheatsheet-windows-exploitation/" title="Msfvenom Cheatsheet: Windows Exploitation">
<span class="yarpp-thumbnail-default"><img src="https://www.hackingarticles.in/wp-content/plugins/yet-another-related-posts-plugin/images/default.png" alt="Default Thumbnail" data-pin-nopin="true"/></span><span class="yarpp-thumbnail-title">Msfvenom Cheatsheet: Windows Exploitation</span></a>
</div>
</div>
            </div><!-- .entry-content -->
            <footer class="post-footer entry-footer">
                                                
            </footer><!-- .entry-footer -->
            
	<nav class="navigation post-navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://www.hackingarticles.in/linux-for-beginners-a-small-guide-part-3/" rel="prev">Linux for Beginners: A Small Guide (Part 3)</a></div><div class="nav-next"><a href="https://www.hackingarticles.in/comprehensive-guide-on-autopsy-tool-windows/" rel="next">Comprehensive Guide on Autopsy Tool (Windows)</a></div></div>
	</nav>        </div>
