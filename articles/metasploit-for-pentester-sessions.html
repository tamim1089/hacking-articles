<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/penetration-testing/" rel="category tag">Penetration Testing</a></span>            </div>
            <h1 class="post-title entry-title">Metasploit for Pentester: Sessions</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/metasploit-for-pentester-sessions/" rel="bookmark"><time class="entry-date published" datetime="2021-07-07T10:40:20+00:00">July 7, 2021</time><time class="updated" datetime="2025-05-12T21:17:38+00:00">May 12, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">In this series of articles, we will be focusing on the various mechanisms of the Metasploit Framework that can be used by Penetration Testers. Today we are going to learn about the session’s command of the Metasploit Framework.  Sessions command helps us to interact and manipulate the various sessions created through the exploits while hacking. Sessions command is usually just used to get into the session but it is far more useful than just that.</span></p>
<h3><span style="color: #800000;"><strong>Table of Contents</strong></span></h3>
<ul>
<li><span style="color: #000000;"><strong>Introduction</strong></span></li>
<li><span style="color: #000000;"><strong>Sessions List</strong></span></li>
<li><span style="color: #000000;"><strong>Concurrent Shell Commands</strong></span></li>
<li><span style="color: #000000;"><strong>Verbose Sessions Details</strong></span></li>
<li><span style="color: #000000;"><strong>Naming Sessions</strong></span></li>
<li><span style="color: #000000;"><strong>List Active Sessions</strong></span></li>
<li><span style="color: #000000;"><strong>Interacting with Session</strong></span></li>
<li><span style="color: #000000;"><strong>Concurrent Meterpreter Commands</strong></span></li>
<li><span style="color: #000000;"><strong>Quiet Mode</strong></span></li>
<li><span style="color: #000000;"><strong>Killing a Particular Session</strong></span></li>
<li><span style="color: #000000;"><strong>Extended Session Details</strong></span></li>
<li><span style="color: #000000;"><strong>Kill All Sessions</strong></span></li>
<li><span style="color: #000000;"><strong>Upgrading Shell to Meterpreter</strong></span></li>
<li><span style="color: #000000;"><strong>Conclusion</strong></span></li>
</ul>
<h3><span style="color: #800000;"><strong>Introduction</strong></span></h3>
<p><span style="color: #000000;">Sessions command can run a single command on multiple sessions, and also upgrade a normal shell to meterpreter among other things. Before beginning with the sessions command there are certain pre-requisites. Since the sessions commands is used to manage multiple sessions inside the Metasploit Framework. We will need to generate those multiple sessions. We have compromised some machines to generate the required sessions. You can use <a style="color: #000000;" href="https://www.hackingarticles.in/msfvenom-tutorials-beginners/">this article</a> to get an understanding of gaining a session using Metasploit.</span></p>
<p><span style="color: #000000;">Once you have obtained the victim’s machine session you can perform many operations in the victim’s system for retrieving important information. Using the help option we can check the list of options that we can use with the sessions command.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions -h</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-6_WPDMdo4No/YOVRFt9kDHI/AAAAAAAAxU4/Zx186yFDfwM3BjNBb5_chVPj9NFh4xmvQCLcBGAsYHQ/s16000/1.png"/></span></p>
<h3><span style="color: #800000;"><strong>Sessions List</strong></span></h3>
<p><span style="color: #000000;">While working with multiple sessions on Metasploit, you may require to observe the various sessions that you generated. Some exploits generate multiple sessions. Some payloads while working with privilege escalation will generate a session. Also, if you want to use any post-exploitation module in Metasploit then you would require to list all the sessions that you have acquired. This can be done just by typing sessions without any parameters or options. </span></p>
<p><span style="color: #000000;">In the image provided below, it can be observed that there are two sessions generated with identifiers 2 and 3 respectively. Session 2 is a session generated on a Windows 7 Machine and session 3 is generated on a Windows 10 Machine. Both machines have the session for the user raj and IP Addresses of the machines are 192.168.1.16 for Windows 7 and 192.168.1.41 for Windows 10. We can also see that both the sessions were generated using the same exploit i.e., meterpreter x86/windows.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-x4cmJEOd-X8/YOVRKaI-PPI/AAAAAAAAxU8/PDZ4MqBxl1UJzfq4pkPoh1urCYC0BeThACLcBGAsYHQ/s16000/2.png"/></span></p>
<h3><span style="color: #800000;"><strong>Concurrent Shell Commands</strong></span></h3>
<p><span style="color: #000000;">Next, we have the -c option that can be used with the sessions command. It can be used in scenarios where you want to run a particular shell command on multiple sessions at once. One of the things to be kept in mind is that all the sessions must pertain to the same operating system since we are talking about the shell commands. Since we have the Windows-based operating system on both sessions, we can run the net user command on both sessions at once as shown in the image below.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions -c "net user" -i 2,3</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-WBentG64PE8/YOVRV_LR8dI/AAAAAAAAxVE/F_Lb1S3S-8Q7gUVkRhbUix0ma0CY7UAXQCLcBGAsYHQ/s16000/3.png"/></span></p>
<h3><span style="color: #800000;"><strong>Verbose Sessions Details</strong></span></h3>
<p><span style="color: #000000;">During penetration testing assessments, there comes a time when we want a general summary of the session that we acquired. This is where we can use the verbose option of the sessions command. It will print information about all the active sessions verbosely. The information includes Name of the Sessions (if any), Type of Session, Operating System, User, Domain, Tunnel used, Exploit, Encryption status and type, UUID, Check-ins’ and Registration Status.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions -v</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-dNIDid9Dob0/YOVRdjdk4PI/AAAAAAAAxVM/gzYgAmoXxQs0NL7UYoxOFlHpKX3F4cu6wCLcBGAsYHQ/s16000/4.png"/></span></p>
<h3><span style="color: #800000;"><strong>Naming Sessions</strong></span></h3>
<p><span style="color: #000000;">From the verbose details that can sometimes overwhelm, let’s try out something that can be used to identify and differentiate our sessions from one another. It is possible to provide a name for each of the sessions you attain. It can be anything from the Machine Name or anything that can help you identify the session acquired. To name a session all that is required is the sessions command followed by the -n option with the Name that you want to apply the session and the session identifier for that particular session. In our demonstration below, we can see that we named session 2 as Raj and session 3 as Pavan.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions -n Raj -i 2
sessions -n Pavan -i 3
sessions</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-D0X2w3DhO0Q/YOVRjhFntlI/AAAAAAAAxVQ/HhYKLVrpIpYyNvbYM0eXUNYhMctUAsKdgCLcBGAsYHQ/s16000/5.png"/></span></p>
<h3><span style="color: #800000;"><strong>List Active Sessions</strong></span></h3>
<p><span style="color: #000000;">When you want to get a list of all the sessions that you might have acquired then you can use the -l parameter to list all the active sessions. The sessions that are not active anymore will not be part of this list. There are two ways to list the sessions. One is the usage of the -l option or you can just type sessions as demonstrated earlier.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions -l</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-TCfk_1PnHo8/YOVRqJ9psXI/AAAAAAAAxVY/7LJ0xHD7Wr4P1mMB_5MkMG1WDFavyYbEwCLcBGAsYHQ/s16000/6.png"/></span></p>
<h3><span style="color: #800000;"><strong>Interacting with Sessions</strong></span></h3>
<p><span style="color: #000000;">It is possible that most penetration testers already know. It is interacting with a session. Most exploits inside Metasploit tend to move the user directly into the session as soon as they get one. However, there is a chance that one might get out of a session and then want to get back into one or change from one session to another. In both scenarios the -i option can come handy. When on the Metasploit shell you can use sessions -i followed by the session identifier to get into the session as demonstrated below.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions -i 2</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-evEk6tkg36w/YOVRvVHm0YI/AAAAAAAAxVg/7BLyt_AQbyUn_BUSRI_xtvZUn3fWi1ifACLcBGAsYHQ/s16000/7.png"/></span></p>
<p><span style="color: #000000;">The syntax that we discussed right now isn’t the only method to get into a session. Using the -i interacting with sessions seems logical but it is possible to do this just by typing sessions followed by the session identifier as demonstrated below.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions 2</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-EQL4CUpyDYs/YOVR00QgP_I/AAAAAAAAxVk/EhYP6K99Pioi_KUUqXS5BUQfn2cLYRIHACLcBGAsYHQ/s16000/8.png"/></span></p>
<p><span style="color: #000000;">Even though this section might seem like it was something that is common knowledge. But in both of our examples, we ran the sessions command from the Metasploit shell. But it is possible to use the sessions command from the meterpreter shell as well. When diverged into a meterpreter shell, you feel the need to get into another session then you don’t need to put the current session in the background, you can just run the sessions command directly from the meterpreter shell as we demonstrated below.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions 2
systeminfo
sessions 3
systeminfo</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-5s5rBojGm6U/YOVR6-KLw1I/AAAAAAAAxVs/MNs7Gk7zArs0b91GcHVGE_SmJMuUC2UoACLcBGAsYHQ/s16000/9.png"/></span></p>
<h3><span style="color: #800000;"><strong>Concurrent Meterpreter Commands</strong></span></h3>
<p><span style="color: #000000;">This option should not be confused with the one that we discussed earlier. It is the -C (Capital C). The difference with the one before is that you can use it to run the meterpreter commands along with various sessions. All the commands supported by the meterpreter shell can be used here but the only limit is the fact that those must be related to the sessions. Such screenshot command is cross-platform and can be run across multiple sessions as we demonstrated below. It requires the sessions identifiers to know which sessions should be targeted.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions -C screenshot -i 2,3</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-dhE4WCbiSSg/YOVR_KwcUFI/AAAAAAAAxV0/JjiZI9kdFIEBUVndBBZtp8hNH4B-frGmgCLcBGAsYHQ/s16000/10.png"/></span></p>
<p><span style="color: #000000;">From the previous image, we can see that the screenshots captured are saved inside the root directory with peculiar names. Instead of trying to pronounce them, we would like to show you as below. The two sessions belonged to the Windows 7 and Windows 10 systems who seemed to have the wallpapers to speak for themselves.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-HQ-2B0RDKX0/YOVSFKUVvGI/AAAAAAAAxV4/qWLvBWoVOPUdrRCM9h2R2ZmK6lOow6dbACLcBGAsYHQ/s16000/11.png"/></span></p>
<h3><span style="color: #800000;"><strong>Quiet Mode</strong></span></h3>
<p><span style="color: #000000;">The next option that we have to discover is the Quiet Mode. It can be triggered with the -q options with the session identifier to direct it to the particular session. When run along with the attempt without the quiet mode, you can observe that when we ran without it a message was shown stating that the interaction with the session was beginning. But when we used the quiet mode, we didn’t get the message as before.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions -q -i 2</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-cCaZeDvmTHM/YOVSLCr9qXI/AAAAAAAAxWA/DRgOIp31vWAjuQBKRqyJbYTJNGroW84-gCLcBGAsYHQ/s16000/12.png"/></span></p>
<h3><span style="color: #800000;"><strong>Killing a Particular Session</strong></span></h3>
<p><span style="color: #000000;">There can be various if one wants to kill or terminate a particular session. We all must have been in a scenario where we have a shell on our hands that is difficult to interact with or straight up not works at all. You can just terminate the sessions using the -k option and the session identifier to direct it as demonstrated below.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions
session -k 4
sessions</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-pScvsfj1ts8/YOVSQYKdDWI/AAAAAAAAxWI/NyWKRmn_nUU4lg10dUYVl8vCgDe4pMAeQCLcBGAsYHQ/s16000/13.png"/></span></p>
<h3><span style="color: #800000;"><strong>Extended Session Details</strong></span></h3>
<p><span style="color: #000000;">We went into the additional information about the session while using the verbose option. But if you are a penetration tester who deals with a significant number of sessions then having the information about the Encryption and other information in the paragraphs as verbose commands can be difficult to read and comprehend. This is where the -x option comes in handy as it adds that information to the session table as depicted below.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions -x</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-0cXT8tRfP-M/YOVSVcnqcEI/AAAAAAAAxWM/EekECokRaSQTuByoiQVygQTFXIW-ikb0wCLcBGAsYHQ/s16000/14.png"/></span></p>
<h3><span style="color: #800000;"><strong>Kill All Sessions</strong></span></h3>
<p><span style="color: #000000;">We did the killing a particular session with the -k (lowercase k) but in case you are in a situation where you are riddled with a long list of sessions as some exploits can generate a lot of sessions at once and then there are some persistence exploits that just never give up generating a session. This is where the -K (uppercase K) comes into the picture. You can use it to terminate all the sessions in your collection as demonstrated.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions -K</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-aFk9KGnRxng/YOVSabTmzbI/AAAAAAAAxWQ/Zr5unlBWrYkvuoksYV_13cDsOO7LP1OpgCLcBGAsYHQ/s16000/15.png"/></span></p>
<h3><span style="color: #800000;"><strong>Upgrading Shell to Meterpreter</strong></span></h3>
<p><span style="color: #000000;">We put off the most important to the last. While performing penetration testing it is possible to use be a situation where the exploit that you use gives you a reverse shell than a meterpreter shell. Although having a reverse shell has its uses but meterpreter shell can help you perform many actions with ease. It includes port forwarding, downloading files from the target machine and uploading files to the target machine, and much more. Hence, by using the -u option you won’t need to run a post-exploitation shell to meterpreter exploit. In the demonstration below we converted an SSH shell into a meterpreter with ease.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions
session -u 1
sessions</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-j0TrAyAYejQ/YOVSd9tqz_I/AAAAAAAAxWY/Gi1Zr6DT3Us3HWnxPWooUdCiiJ_1Mk6RQCLcBGAsYHQ/s16000/16.png"/></span></p>
<h3><span style="color: #800000;"><strong>Conclusion</strong></span></h3>
<p><span style="color: #000000;">Metasploit is one of the oldest Frameworks in this domain. It was designed in a way to ease the work of a Penetration Tester so that they can focus more on the attacking. Even after working with, it for years, it still surprises me with some hidden quirk that I didn’t know about. I will be continuing this journey and find out more about the legendary Metasploit Framework!</span></p>
<p><span style="color: #000000;"><strong>Author: Pavandeep Singh</strong> is a Technical Writer, Researcher, and Penetration Tester. Can be Contacted on <span style="color: #0000ff;"><strong>Twitter</strong> </span>and <span style="color: #0000ff;"><strong><a style="color: #0000ff;" href="https://www.linkedin.com/in/pavan2318/">LinkedIn</a></strong></span></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-related-none yarpp-template-thumbnails">
