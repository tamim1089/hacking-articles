<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/cloud-security/" rel="category tag">Cloud Security</a></span>            </div>
            <h1 class="post-title entry-title">AWS: Penetration Testing Lab Setup</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/aws-penetration-testing-lab-setup/" rel="bookmark"><time class="entry-date published" datetime="2025-06-20T19:57:35+00:00">June 20, 2025</time><time class="updated" datetime="2025-06-20T20:09:27+00:00">June 20, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">This guide will walk you through setting up a web server with a simulated SSRF vulnerability and a Kali Linux instance on Amazon Web Services (AWS).</span></p>
<h3><span style="color: #800000;">Prerequisites</span></h3>
<ul>
<li><span style="color: #000000;">An AWS account.</span></li>
<li><span style="color: #000000;">Basic understanding of AWS EC2 and IAM.</span></li>
<li><span style="color: #000000;">An SSH client (e.g., OpenSSH, PuTTY).</span></li>
</ul>
<h3><span style="color: #800000;">Part 1: Setting up the Vulnerable Web Server (Ubuntu EC2 Instance)</span></h3>
<p><span style="color: #000000;">This section details the steps to launch an Ubuntu EC2 instance, configure its security, and deploy a basic web application.</span></p>
<h4><span style="color: #000000;">Step 1: Sign in to AWS</span></h4>
<ul>
<li><span style="color: #000000;">Firstly, go to the <a href="https://aws.amazon.com/console/">AWS Management Console</a> login page.</span></li>
<li><span style="color: #000000;">Then, select <strong>“Sign in using root user email”</strong>.</span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEirZvVq5kHjVk0gPKWQChnmHxpGpgD57ySQKMI_9FNkcK6kbocikjPU8aAbhrBPGsqHjdTvUGn9WxlYLb-ON2JMab1EcABJAC3U9dx9n9MpRaYwW1zZYSjuayjoYS77djZhKIKbcrZztHgwATQp4IZMYl-k8wGZ7usQk4zcOT15ncv9DgUh_e7PZXDv_OFO/s16000/1.png"/></span></p>
<ul>
<li><span style="color: #000000;">Enter your root user email address and click <strong>“Next”</strong>.</span></li>
</ul>
<p><span style="color: #000000;"><img fetchpriority="high" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhiz20q197SVie3eypKwrNxYc3V4wgTE6GGJV8i2W_CElVt-7pVYSxN1InJjzqSMf1oN6DUDWtUmu79aSFCD2EnaImQFvA-daPSWwQG9gKEz5Q6JNVcegZ3SkTu9jSTJpfXJxmVsXsEWqjTwRi6l_KE3dGooVi6DPJyHDCC-O67d8nJla1BYCNobcbWBphp/s16000/2.png" alt="AWS Penetration Testing Lab Setup" width="425" height="406"/></span></p>
<ul>
<li><span style="color: #000000;">Follow the prompts to complete the login process.</span></li>
</ul>
<h4><span style="color: #000000;">Step 2: Navigate to EC2 Dashboard</span></h4>
<p><span style="color: #000000;">Once logged in, use the search bar at the top of the console.</span></p>
<p><span style="color: #000000;">Then, type “Ec2” and select <strong>“EC2 – Virtual Servers in the Cloud”</strong> from the services list.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiTaoqN4EvdXcATaYo8U0FuCWVxyI1AwnOWSfL_2WbUyJVt3GxeJ2s9lTfMASd1muPMuEo6cgAr0iY4nqEkUjkrYpRKrlCZcxVKlBEJ_gKwv4W1BpltTEF3wWIsWyEXwFiAYMpY6UBXUwU5fq71asX8e3rTw0798Mt0COP20DKM1bdCS_SawXcTSH4w8Bxn/s16000/3.png"/></span></p>
<h4><span style="color: #000000;">Step 3: Launch a New EC2 Instance</span></h4>
<p><span style="color: #000000;">In the EC2 Dashboard, under “Instances,” click on <strong>“Instances”</strong>.</span></p>
<p><span style="color: #000000;"><img decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhBtxyQYvhJ7qXvs5xj4aQhO-SrJ4dDYZgpRXXbXc2z09xCHHjl0b1EaJ4JPRJyqZuNbGXnMSt4W-ob1CfGCYBsWBH1Lx8qTfVoRL9kn7G_zSULzTOvzgTXuraZ0rD8UomFO3pBIIkOtftIffw5u7lDSatioNjZdbf8SbiaaTPhHWazhRSN9zvwsB_Zai6g/s16000/4.png" alt="AWS Penetration Testing Lab Setup" width="445" height="633"/></span></p>
<p><span style="color: #000000;">Then, click the <strong>“Launch instances”</strong> button.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjD_T3Cq284r-CxEwvCtYlGzuS5Aay0rGbLPTJCAmLEmRUGcxvxIZmYhvC8apV6EfW9UlEnpLVawX4iXk5clV9kJc5StvcW4jj5Lhyphenhyphen6L9PdzUAKWCMRcC-Y-swXoJgVfBB99sRpw86CVQfxiipDcqSwMyzd3HF1ObvQrK1KhyphenhyphenZXr87W4GAMx6eBkjGUvo4s/s16000/5.png"/></span></p>
<h4><span style="color: #000000;">Step 4: Configure Instance Details</span></h4>
<p><span style="color: #000000;"><strong>Name and tags:</strong></span></p>
<ul>
<li><span style="color: #000000;">Give your instance a descriptive name, e.g., lgt_web1.</span></li>
</ul>
<p><span style="color: #000000;"><strong>Application and OS Images (Amazon Machine Image – AMI):</strong></span></p>
<ul>
<li><span style="color: #000000;">Select <strong>“Ubuntu”</strong> from the “Quick Start” options.</span></li>
<li><span style="color: #000000;">Ensure “Free tier eligible” is selected if you are using a free tier account.</span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh7cR9hyopY48ZXio4WitNpOVVtEBpBLMn8xTaUbLqMPbenfHgc47j42CG3Z5U26VhJeWFsYDqHC4LXqOItSpSLc3m1Wog36eThaGBBeZ8xpFDmAgIofoFxBRh7b2GJiDoBiqAbiiPgHm8no35s6e-EjySOZiNZr9-NfUxqeaSfj9qpOHf3wzDgjIqYV95q/s16000/6.png" alt="AWS Penetration Testing Lab Setup" width="1059" height="672"/></span></p>
<p><span style="color: #000000;"><strong>Instance type &amp; Key pair (login):</strong></span></p>
<ul>
<li style="list-style-type: none;">
<ul>
<li><span style="color: #000000;">Click <strong>“Create new key pair”</strong>.</span></li>
</ul>
</li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEganxcDTSBiDkXhto1fOF2kUDUhHp821EpwMM9I_sGZPQa-PeEUYrKLwWMTLXMdWv0s1iMqmoagARymHHhzcYoyYUaRSbFcl-uqzfDkI90A7MaELEyjyVReViemgnnnwKJh0z-iuHU8V_d3tTE2TNmQUYQ7tqxh5gsymPPchc_KkUdFk-dmTRccE2AC_bqL/s16000/7.png"/></span></p>
<ul>
<li><span style="color: #000000;">Select an instance type that is “Free tier eligible,” such as t2.micro.</span></li>
</ul>
<ul>
<li><span style="color: #000000;">Enter a “Key pair name”, e.g., lgt_web1.</span>
<ul>
<li><span style="color: #000000;">Select <strong>“RSA”</strong> for Key pair type.</span></li>
<li><span style="color: #000000;">Choose <strong>“.pem”</strong> for Private key file format.</span></li>
<li><span style="color: #000000;">Click <strong>“Create key pair”</strong> . This will download the .pem file to your computer. <strong>Store it securely.</strong></span></li>
</ul>
</li>
</ul>
<p><span style="color: #000000;"><strong><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg_vkotPyHUtxFCUBGULXN9IkcNOE3ILA30eLTc49tDXjxzWO9-GLbrVy7ZfkWODvu2AWz02rTtFc3GgrXz_1kpYB3Kt7R6HwsWBs3tu1BZhh9vD_yHBSWAbryHIwsTTBSEQF5X2RhuMQiPA5rdEa5gazKMmfq4aV6DAGM-RjlMgzU5PTtKLLcQjRGUlfaA/s551/8.png" alt="AWS Penetration Testing Lab Setup" width="551" height="529"/></strong></span></p>
<p><span style="color: #000000;"><strong> </strong><strong>Review and Launch:</strong></span></p>
<ul>
<li><span style="color: #000000;">Review the summary of your instance configuration.</span></li>
<li><span style="color: #000000;">Click <strong>“Launch instance”</strong>.</span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjHpadB6bglclQockKNalRY_DlVR3nzY0Fg-v_ZEXSs9GnhcntpeGvbbeoRHC4fiY_HRwTRnRSkq-YwrB5YG7VsYN3pgPuYRTiGdgk7h0DsuFFenBgvheXjXlrzebYBpbJ0UKWqI-DqFl7U1adVWHMrOfvvCL4bd5hLPmlU5wwj1rB6PMtePT_29aM2ClAN/s643/9.png"/></span></p>
<p><span style="color: #000000;">You will see a success message confirming the launch, along with your instance ID .</span></p>
<p><span style="color: #000000;"><strong> <img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgSiDltPz6H9gSQMy0mjgJ2VoPYQcME36U0lsepCmjE9goA3Sazae6M_PebFgmSHr70Ya6m0MOFOnyLW5m9cThyphenhyphenKS1B7o4hqFpsLpOdD7gle5r-t89vYzW7xkaDinoCaqaas96QxpPYcpRAbbVVTifFb_hQfGgk5O7iwm7ulcVfzhQ2KuHf8mCYkQeTIPHB/s971/10.png" alt="AWS Penetration Testing Lab Setup" width="971" height="227"/></strong></span></p>
<h4><span style="color: #000000;">Step 5: Connect to the Ubuntu Instance via SSH</span></h4>
<ul>
<li><span style="color: #000000;">From the EC2 Instances page, select your newly launched lgt_web1 instance.</span></li>
<li><span style="color: #000000;">Click the <strong>“Connect”</strong> button.</span></li>
<li><span style="color: #000000;">Go to the <strong>“SSH client”</strong> tab.</span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj-XBZ-X3uUb0yivmUt_2o3m2GUiM5Utta7kBf5lcrzhhZ5Ucgcs05iO2XtjGlDHrRkznFmAkhrRr5q7hWWwtJsBeVAlVMZRnqVfskbfTh2zIMulg7kwAXOhyzw9QjMrYcE5y41sd1RqiPQGsqiR0ThC9BoxFyBaau2ck6fjIXy6i7BzgwyL7qOqW51T0n0/s1134/12.png"/></span></p>
<ul>
<li><span style="color: #000000;">Follow the instructions provided there:</span></li>
<li style="list-style-type: none;">
<ul>
<li><span style="color: #000000;">Locate your private key file (lgt_web1.pem).</span></li>
<li><span style="color: #000000;">Set appropriate permissions for your private key: chmod 400 lgt_web1.pem</span></li>
<li><span style="color: #000000;">Connect using the command format: ssh -i “lgt_web1.pem” ubuntu@&lt;Public DNS or IPv4 address&gt;.</span></li>
</ul>
</li>
</ul>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjMMn5Q036qVOnoXs3Hc7Tr09IDBFV31dUmLChxUDV5-zVDxK-yRaEegaUl36qYETEQqGAP2zOoPD9NqpW4249WnephpwvnlwatDH2Oh__S4cERv3K1LUddCwwtHqtBAUCd6luHrxwAKHhni73DWPHGkxHIjNk9x2qim9e-aAYWXcX7jIp5GU4J1iKjBvHS/s881/11.png" alt="AWS Penetration Testing Lab Setup" width="881" height="742"/></span></p>
<ol>
<li style="list-style-type: none;">
<ul>
<li><span style="color: #000000;">If prompted about authenticity, type yes and press Enter.</span></li>
</ul>
</li>
</ol>
<h4><span style="color: #000000;">Step 6: Configure Security Group for Web Access</span></h4>
<p><span style="color: #000000;">To allow access to your web server, you need to open HTTP and HTTPS ports in the instance’s security group.</span></p>
<ul>
<li><span style="color: #000000;">From the EC2 Instances page, select your lgt_web1 instance.</span></li>
<li><span style="color: #000000;">Scroll down to the “Security” tab and click on the <strong>“Security groups”</strong> link (e.g., sg-015f… ). This will take you to the security group details.</span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjvrthdqE7nz3G5nGBWzWCT1utOVXtXibecX1Uo_Qqu4_wQ1M8TBuaTaHrE-eNreJ2ADkRVp00u2fhw_w_hORPbcz1elsBPCpA9EF0pg-4H7_4q6p4xjAk_hoKPRt889d2wvvacGXdXhTu0kAjObXyr5z2XYyuThTyeXQ8GIeIHkLAsU3Aiy-9y8MDf6D9L/s1112/13.png"/></span></p>
<ul>
<li><span style="color: #000000;">On the Security group page, go to the “Inbound rules” tab and click <strong>“Edit inbound rules”</strong>.</span></li>
</ul>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgd_mCWBnEc8iFZXLykwRMZv9PEbmjQxzVwIVeAyKOt6J89DVMquCu1xH81RAfmhbQ4sZ-xesUbJgKFNQJUOAoJFtE4R8z5OGmEsoGJ27M1uQZwWLCZz2OybMLDc4KqQSZIZ89PIQyVA_PFylwxDgN4LjJgTrNyU1IQqX_iEMT_Qm6DvezzebzPXYv2JIdn/s975/14.png" alt="AWS Penetration Testing Lab Setup" width="975" height="183"/></span></p>
<ul>
<li><span style="color: #000000;">Click <strong>“Add rule”</strong>.</span>
<ul>
<li><span style="color: #000000;">For the first new rule:</span>
<ul>
<li><span style="color: #000000;">Type: <strong>“All TCP”</strong></span></li>
<li><span style="color: #000000;">Source: <strong>“Anywhere-IPv4”</strong> (0.0.0.0/0)</span></li>
</ul>
</li>
<li><span style="color: #000000;">For the second new rule:</span>
<ul>
<li><span style="color: #000000;">Type: <strong>“All UDP”</strong></span></li>
<li><span style="color: #000000;">Source: <strong>“Anywhere-IPv4”</strong> (0.0.0.0/0).</span></li>
</ul>
</li>
</ul>
</li>
<li><span style="color: #000000;">Click <strong>“Save rules”</strong> .</span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhsRZQ36EwOQQc7aFkpfBQvo5GpcgRQcd1IrD9CCrI7yW1AtVHdx9iAri-3-LQiDwXKRrbK6Je6g1shHaLoZ_B_-jMt_d2Ad5vaCtvV3NCiIe-RF14EgiH0OeSSiYtfX6EK4IPpXoJqXjOUalXOGBJlzTRFnrZMMiJJuxMAyoCY84UKrNsei6s9qF-PSCxp/s1014/15.png"/></span></p>
<h4><span style="color: #000000;">Step 7: Deploy the SSRF Vulnerability Lab</span></h4>
<p><span style="color: #000000;">Once connected to your Ubuntu instance via SSH:</span></p>
<ul>
<li><span style="color: #000000;">Navigate to the web server directory (e.g., /var/www/html/). You might need to create a directory for your lab: sudo mkdir /var/www/html/labssrf</span></li>
<li><span style="color: #000000;">Change to that directory: cd /var/www/html/labssrf</span></li>
<li><span style="color: #000000;">Create an index.php file for the SSRF lab (Image below shows index.php in the directory).</span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj_vzKQ-TgP5wmAchHfew-CKUXjQX8I6fx6JCgWFjrvNPGQT0BqLRgtsXIPGHwUQ9ihFx-3cobDPYbl39FBIPuJYyoeZphJ8s7PZc7hb31jT_Wp7MHUcicVJxPtgd60HNUuv76gmDmO9MScZMdy-k5H6g58WiT__m-PLu_WcPls9aRUDQV1XzB8-j8kR33Z/s668/16.png"/></span></p>
<p><span style="color: #000000;"> You’ll need to create this file and populate it with the vulnerable PHP code. (The document doesn’t provide the code, but you’d place it here).</span></p>
<ul>
<li><span style="color: #000000;">After deploying, you should be able to access the SSRF lab in your web browser by navigating to http://&lt;Your_Instance_Public_IP&gt;/labssrf/.</span></li>
</ul>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiqrarEX1im7zGcZmmVAwnAzJaveznuOBm1Cx44lVwokL7zUqghlDnb33t1y_VJNQNOjadi7e2k0b2Em6cnSoSlkuIpRj2us4fqzy5vrKBKsHZCzOsAh6ho6K6TdEwzAf8F2-Yf76ZWr9loH4GA6-5t4wxwOLywlF2aQSD7aGSmE_-3d7H12RD89bXEQsX8/s1402/17.png" alt="AWS Penetration Testing Lab Setup" width="1402" height="487"/></span></p>
<h4><span style="color: #000000;">Step 8: Create and Attach an IAM Role to the Instance</span></h4>
<p><span style="color: #000000;">This step assigns an IAM role with specific permissions to your EC2 instance, which is crucial for certain types of attacks (like privilege escalation via EC2 metadata).</span></p>
<p><span style="color: #000000;"><strong>Create IAM Role:</strong></span></p>
<ul>
<li><span style="color: #000000;">In the AWS Management Console search bar, type “iam” and select <strong>“IAM – Manage access to AWS resources”</strong>.</span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjo4QIjj2eqa06Vn2WT_22bDHRVhZyhcBfUbszkxyKaNC3J9h6wC8uYClYrgiM_1ot2e8veEMsxQF5Ivjw6c-QAcGeV4BwS7EtJcrCOjoKejNWSc0tTNLB7h6MlmMkATlR5l6KofQH6yIuEOYHzZm2NLmeP9aYr_WeTQQ6bVGhyphenhyphen1C_MmO_8wPPOxxJBysOp/s714/18.png"/></span></p>
<ul>
<li><span style="color: #000000;">In the IAM dashboard, click <strong>“Roles”</strong> under “Access management”.</span></li>
</ul>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjH1yHEn8mUvAsDFTdkzUE9qJryMNqgmv8c52CT4R3oupllpZe_2w_6Vf-nJWLDUbts1rvFq7_11yKOic3UyqWHvJePHOgBS1enBfbOURBUa29eO0vAjMKHgrGEH5puPGBjKkccsnsTjwxpLyQL_FLBH76IKecTCOFR3RfFce3EuPhUxA91Eoyakqzo7djn/s919/19.png" alt="AWS Penetration Testing Lab Setup" width="919" height="607"/></span></p>
<ul>
<li><span style="color: #000000;">Click <strong>“Create role”</strong>.</span></li>
<li><span style="color: #000000;"><strong>Trusted entity type:</strong> Select <strong>“AWS service”</strong>.</span></li>
<li><span style="color: #000000;"><strong>Use case:</strong> Select <strong>“EC2”</strong>.</span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhhoc_EDi8ZS-B0NLnMc8fd6m7NN2kdvKwELzUtiM-NdZtLZCAuhdpRbTcsztkCytISUt0EM1KtXkbu47Ms99ES17-dylttXfcfqvXJyio6gjcveHgW7bZWDly9vqZrxWj6FfB7tmLk2FZ5WxVsU8_tWdk0FwKMmWopgzjwx7cp5F2rvVBUsPnC7_vMos0I/s1066/20.png"/></span></p>
<ul>
<li><span style="color: #000000;">Click <strong>“Next”</strong>.</span></li>
<li><span style="color: #000000;"><strong>Permissions policies:</strong> Search for amazonec2full and select <strong>“AmazonEC2FullAccess”</strong>.</span></li>
</ul>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjPHcUplwWtQiezHM20_GTTQ4KZPXXI1Vo6wPzqeinIctaPEtjsniXCY2Ib2Rvn3J37M68RKWJFw7-P8v_iY9KV5J2VQqoYGU1Uc3LaUAbIUT9opIHfpzUMj7UxGxF4mtphJspx1E44-KflJkNxxaG1Ni3Qmzs_j53eXcWmcIXqwKWauYL_1EdbtfEt7zbI/s1042/21.png" alt="AWS Penetration Testing Lab Setup" width="1042" height="390"/></span></p>
<ul>
<li><span style="color: #000000;">Click <strong>“Next”</strong> &amp; <strong>Name, review, and create:</strong></span>
<ul>
<li><span style="color: #000000;">Set a <strong>“Role name”</strong>, e.g., Ec2_role.</span></li>
<li><span style="color: #000000;">Review the policy and click <strong>“Create role”</strong>.</span></li>
</ul>
</li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEizisNL7LNlpVioCYmibZrozwgapH3cTtYCYGUP9dPyvCrAB4dqY7JcxKp3GbZzwpkSRU0jwk9HeSjzJZxvdjXy84H4rw2bfTWtGoxKCGnxSxrKZ7h8kizLgZrsYCjpTLQCGycqQ2s-mF2zJzKiI7BnHjRI9vkFsCabn7NBbbdEOF9vK-Sn3lkY9DXdPMJb/s855/22.png"/></span></p>
<p><span style="color: #000000;"><strong>Attach IAM Role to Instance:</strong></span></p>
<ul>
<li><span style="color: #000000;">Go back to the EC2 Instances page (select your lgt_web1 instance).</span></li>
<li><span style="color: #000000;">Click <strong>“Actions”</strong> -&gt; <strong>“Security”</strong> -&gt; <strong>“Modify IAM role”</strong>.</span></li>
</ul>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiVrP8RXsUfd23WTCyP9K9yydKEnCDYwLyK6gHiiRBfou8cUo1x872rid_UGkP88m5DL40lFCQ2fHLRWTpH9VTMahoTw6GVS_aF2qYznSndTaxvqofNbLNVwShhYaKQ-5GpYsWcAVfC6KeV6TnPPKmz6SFE_uhX7Oc7DYO1Fn_f9OYPQb2YP1BTxNOqYH7L/s969/23.png" alt="AWS Penetration Testing Lab Setup" width="969" height="304"/></span></p>
<ul>
<li><span style="color: #000000;">In the “Modify IAM role” dialog, select the Ec2_role you just created from the dropdown. Click <strong>“Update IAM role”</strong>.</span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj-EpN1az-syX3g_N_ek_paPosWPPh66O6BUWWdFP1q1yfPdT75F3ZEOurbVlqBXCnIb7FJE66PJAH39Wlyupq1e01kRcj-huIGhzPESxyMMdwQcW7_mvI_0_7xQV7VRp_F4Ui4EyMkKwgCvbetow4MEJ7DUs0ldrP1hF18wsPo_5SBSkWZhdvmBQ3I4mHH/s993/24.png"/></span></p>
<h4><span style="color: #000000;">Step 9: Modify Instance Metadata Options (IMDSv2)</span></h4>
<p><span style="color: #000000;">IMDSv2 adds a layer of security to the instance metadata service. For some lab scenarios, you might need to adjust this.</span></p>
<ol>
<li><span style="color: #000000;">From the EC2 Instances page, select your lgt_web1 instance.</span></li>
<li><span style="color: #000000;">Firstly, click <strong>“Actions”</strong> -&gt; <strong>“Instance settings”</strong> -&gt; <strong>“Modify instance metadata options”</strong>.</span></li>
<li><span style="color: #000000;">Then, ensure “Enable” is checked for “Instance metadata service.”</span></li>
<li><span style="color: #000000;">You can set IMDSv2 to “Optional” or “Required” depending on your lab’s needs. The image shows “Optional”. Click <strong>“Save”</strong>.</span></li>
</ol>
<p><span style="color: #000000;"><strong> <img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjfTv0w5wNqV5SPt6eJU-VHjI0gY7je_PTtXufjAQUC1VnoPmw2K5Vk_NhP37OUP2OGlkBUYeWWLkLdFqCZ4EIze3Uq7B4w5pIpPFKjHODtIs4OC7RIGEpAmjLBGv5xgJS9_0Z0aat9deAfe0crGBg84pVAgb0nVtysy5PLz99Xv2BmhlbcVPrTiR-UZMVh/s495/25.png"/></strong></span></p>
<h3><span style="color: #800000;">Part 2: Setting up the Attacker Machine (Kali Linux EC2 Instance)</span></h3>
<p><span style="color: #000000;">This section details the steps to launch a Kali Linux EC2 instance, which will serve as your attacker machine.</span></p>
<h4><span style="color: #000000;">Step 1: Launch a New EC2 Instance (for Kali)</span></h4>
<ul>
<li><span style="color: #000000;">From the EC2 Instances page, click <strong>“Launch instances”</strong> again.</span></li>
</ul>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhBFg-vicLK0zUUKumPQYQQGUedpb_CAYUYlMeMG9ya2DnTRdIWKSgcCeQejQffM5X__EDQnjQ2864SHSMAKCWwUAxbG3B3fqOyMvLRP6fy5-DVWFfDiV9OMzf55i0G5DSTIvdYXVbmHnGH3lymkjSK-B3HPPrvCP41aRAFAtJzkAV64BYspAsUrJtUr0Ef/s1149/26.png" alt="AWS Penetration Testing Lab Setup" width="1149" height="625"/></span></p>
<ul>
<li><span style="color: #000000;"><strong>Name and tags:</strong></span>
<ul>
<li><span style="color: #000000;">Give your instance a name, e.g., Kali linux.</span></li>
</ul>
</li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEitZ3ZTWT9CJ3J45AT5kU84iqjTU_CBEwMv0nBSQf2tQEdLLgR9MCxUYtOHMGc4Sn-Pk5-ZjTs2ISsSAgqAdMfSvDPaQ3KeggESHPApzivsuV1zxAfBubnqpNKPloonoLKfSYXzJeEQyUWXDVeb8BViSre_bqUTnHi8rJ7nQDci7HjfoGRihSvPhJTU3Bqz/s966/29.png"/></span></p>
<p> </p>
<p><span style="color: #000000;"><strong>Application and OS Images (Amazon Machine Image – AMI):</strong></span></p>
<ul>
<li><span style="color: #000000;">Click <strong>“Browse more AMIs”</strong>.</span></li>
</ul>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhBFg-vicLK0zUUKumPQYQQGUedpb_CAYUYlMeMG9ya2DnTRdIWKSgcCeQejQffM5X__EDQnjQ2864SHSMAKCWwUAxbG3B3fqOyMvLRP6fy5-DVWFfDiV9OMzf55i0G5DSTIvdYXVbmHnGH3lymkjSK-B3HPPrvCP41aRAFAtJzkAV64BYspAsUrJtUr0Ef/s1149/26.png" alt="AWS Penetration Testing Lab Setup" width="1149" height="625"/></span></p>
<p> </p>
<ul>
<li><span style="color: #000000;">Here, search for “kali linux” in the search bar.</span></li>
<li><span style="color: #000000;">Now, go to the <strong>“AWS Marketplace AMIs”</strong> tab.</span></li>
<li><span style="color: #000000;">Then, select the appropriate Kali Linux AMI. Note that Kali Linux AMIs often have an associated cost (e.g., $0.046/Hr as shown in the images.</span></li>
<li><span style="color: #000000;">Click <strong>“Subscribe on instance launch”</strong>.</span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhQfMaMkLuMZNsJtz11PrhxEwX2VaCHsOQOMzPaReF2Lg71c9KZzZsT0PzIKOO5OpZqzB26CRlbLJj2lLopKBhI8s3oE4XlTTvRR5XwJinFsv6K7S58-p_BClfvMI8TXnRKkovKKo9CGhT1OcdoVw9sIvuZ2UftLvTk-ZV2NbhoJ2TA2qFkUa5zu5u3gagy/s1314/27.png"/></span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiwYZkGxem55seSmvyZTWJ1iV3UJICC7pthynCpIuBqsPq87haPa0kMPQfYexN68UE_8DyTdWjbRiM2eJqhsp01ue7qNV4kWqq5hQf8ocZogLVusc8a_w055HBV_xssv8JlB4q00aU9DB-c5Pn1uheiMuhC0jRb9fX1Kws9yxYEVVtx0Z-aQCBrWxqthKTV/s905/28.png" alt="AWS Penetration Testing Lab Setup" width="905" height="532"/></span></p>
<p><span style="color: #000000;"><strong>Instance type:</strong></span></p>
<ul>
<li><span style="color: #000000;">Choose an instance type, usually t2.medium as shown in the example (Image 34 summary, though not explicitly chosen in a previous image).</span></li>
</ul>
<p><span style="color: #000000;"><strong>Key pair (login):</strong></span></p>
<ul>
<li><span style="color: #000000;">Then, create a new key pair for Kali, e.g., kali_key, similar to how you did for the Ubuntu instance.</span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjDPYTf0ARcTWK5gVFSVBhrSFuqQ58HLab8reGDcvqkgbizkD10Y4ZZ9TrnpBBKPVShG1DZe-TP2bNh0tVTqLApxJAYpRLTHBqvcO3jXi-0iLzIW9wRHQMRpQfos8NAzqKpcLpUsa5onoBf6fAoKovQUWIX-UTNEXWwtHkUWGA9Nxsusg5wyRM3MYFOiD4P/s505/30.png"/>                </span></p>
<p><span style="color: #000000;"><strong>Network settings:</strong></span></p>
<ul>
<li><span style="color: #000000;">Firstly, click <strong>“Edit”</strong> next to “Network settings”.</span></li>
</ul>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj0nHbxV3APGmwm3zjCrwIGxSdYkJ3vME7S18_2gQ4D297yV4yRJvCYcWELhjPvHzQO9hktwW_Ob1pz9SKbEcjHNpdKkfyse6_Cqw92uLxg1CPOBB5w7J54X_saNbmIo9btSQfIOg3JH2VXrTvVPzGZgBfduCvybWerR38Fr1t6SiPcLnQsi7Z2aYTKf2e5/s938/31.png" alt="AWS Penetration Testing Lab Setup" width="938" height="531"/></span></p>
<ul>
<li><span style="color: #000000;">Ensure “Auto-assign public IP” is enabled.</span></li>
<li><span style="color: #000000;">For <strong>“Firewall (security groups)”</strong>, choose <strong>“Create security group”</strong>.</span></li>
<li><span style="color: #000000;">Add inbound rules:</span>
<ul>
<li><span style="color: #000000;">Add a rule for <strong>“All TCP”</strong> from “Anywhere” (0.0.0.0/0).</span></li>
<li><span style="color: #000000;">Add a rule for <strong>“All UDP”</strong> from “Anywhere” (0.0.0.0/0)</span></li>
</ul>
</li>
<li><span style="color: #000000;">Click <strong>“Add security group rule”</strong> as needed.</span></li>
</ul>
<p><span style="color: #000000;"><strong> <img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj0TC-Gt06WWszMH-i34wnrc7Y3EFb1rItXG9JnvI8EVy1OswNwQeDLl_FhHDOvoWu3cpHcSgUeSwZe4VWupRizO5rte5vcpnKu99untBljP_3tWekLIICiliWDLbexxDGNd4aJMYaz8LOBUade2l_hV59KDRk1ZSFt3mYIqqoOp7e7-LvzJ9DGOtFKOzNZ/s927/32.png" alt="AWS Penetration Testing Lab Setup" width="927" height="815"/></strong></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi0uibFrADObMHS7RYvzFjK0-CpDCMDrN1G_-nUy_yr56c2bFFsoR1QYjv7-0zbk3-NfF2rgtTf3QYwAnB-7tERhjaaZcoTUCyH3Hy4bNfF2q1U4K5ucoHcN7z4INTMesLSPVZFumm73FI_fXJE0WthvllsM8WrmFd5VOH8_BGQ_gfdGM7yTbWYL5Fw_Wqo/s919/33.png"/></span></p>
<p><span style="color: #000000;"><strong>Review and Launch:</strong></span></p>
<ul>
<li><span style="color: #000000;">Review the summary and click <strong>“Launch instance”</strong>.\</span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhfFMhlw8hQmzwsVpJCznyxbfDll2cAZAfHjTy2mTstcceXDW_uefknmunaZjDLNuUi7yHgb4XnORvcOiUIZmxEjxLfHmqroIPeiyWVoyweCAX0Yg87YM1hYkLVf6KDfNrUfPlDT3PDsyT-AalLf2uQS2lRAcFb_IiIIX5_6EgEbVr2VxPbbLf_65BARfzT/s622/34.png"/></span></p>
<h4><span style="color: #000000;">Step 2: Verify Kali Linux Instance State and Security Group</span></h4>
<ul>
<li><span style="color: #000000;">After launching, go back to the EC2 Instances page. You should see both your lgt_web1 (Ubuntu) and Kali linux instances. The Kali instance will likely be in an “Initializing” state initially.</span></li>
</ul>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjvPw-jO4g9IWCzN0RcRdMH_n8nTT7djkLWZr3pI9TbKOPblIcwoHomLXu2vwQE7Z3ipihSabkjlEJIiKcMGYC99Md98UogLoxOgJwbop-M5-6cVoflAbRZN2sI5HGcHYrKckkku4GzpJPgclsSiIlPmG4Dhyphenhyphenqd3uovzhWBED-47Arom76Dy3vzBr_ggbIp/s1333/35.png" alt="AWS Penetration Testing Lab Setup" width="1333" height="192"/></span></p>
<ul>
<li><span style="color: #000000;">Once Kali linux is running, select it.</span></li>
<li><span style="color: #000000;">Then, go to the <strong>“Security”</strong> tab and click on the associated <strong>“Security groups”</strong> link.</span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjIlXxffkRSai0cqA5ELdBSDcYkDhNjHA2t94W8PGAEvOmh_v5WgnFjcArg6xJlDYFFWGQDYvU4F-wfRpE51gvR3_c8ReZaGvN8DqJsyID5U1T4xd1WA90vT7HeDrHWzhGJqFOm8b3GetDongJlFbMkf4gvBQSg0PRSQjtgvUeGY1A5XgC7gn3Ltbmqtzj7/s1139/36.png"/></span></p>
<ul>
<li><span style="color: #000000;">On the security group page, click <strong>“Edit inbound rules”</strong>.</span></li>
</ul>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhSpLJ0OuRuP8Mk6KAk3W3niSUcLPa0WjcFuyxq3t0EMJF0VkoqisoGNxRhwS_37pUjgNSL94WaHsaoXiKjfNOulcSQlJjEB_A1Q5o2CkwkILNGEFjmFtGotqogNs5dMUU9-_zQTvzniUIesgYIHeh5_sWqqAGS66hNjzgXdJzgMp4N730rvnU_45Z31X2b/s1001/37.png" alt="AWS Penetration Testing Lab Setup" width="1001" height="368"/></span></p>
<ul>
<li><span style="color: #000000;">Add an <strong>“All ICMP – IPv4”</strong> rule with “Anywhere” (0.0.0.0/0) source to allow ping requests. Click <strong>“Save rules”.</strong></span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhIUsJGRpdvNYmkZ8YoLQ0xZOz1HsXnGiHiUFirZe0jhRqrJmKuAswB5_FvJ7StPQ5OkRGWNiv9F1lWnZmRnvu8c41CSH9Uqpf8nFDl-INYnTkI5JNY8jMh6CyZN6uZgyTAvhdlDPVzejAnuYXcZQHDHN1OY_E2SEhb_Uh-t3wqudLj0rQC7ZwbBv9Pdxbq/s1061/38.png"/></span></p>
<h4><span style="color: #000000;">Step 3: Start the Ubuntu Web Server Instance (if stopped)</span></h4>
<p><span style="color: #000000;">If your lgt_web1 instance was stopped, you can start it:</span></p>
<ul>
<li><span style="color: #000000;">Firstly, select lgt_web1 from the EC2 Instances page.</span></li>
<li><span style="color: #000000;">Then. click <strong>“Instance state”</strong> -&gt; <strong>“Start instance”</strong>.</span></li>
</ul>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjkjliquTE6bfPWIK4UJNAK_7GhA00jdZuSn0xcPOSb-QBNhRT5tRBWvBmhZ2scBoySrG-8E0i-4xvO8JzguMRBRL7g222Q8Awhlsuz-hMCP7zEP37ynlfpOzK4_ddqNeJnbPNnKMKUfQDiB7hAT58E3Mp8dIZxTil2Qw_CQNYrwwAk7cxYZMA9Gkdp6ZGe/s1205/39.png" alt="AWS Penetration Testing Lab Setup" width="1205" height="219"/></span></p>
<ul>
<li><span style="color: #000000;">Verify the instance is running.</span></li>
</ul>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhaOGh79p-_g5jhvmT3yFfagwQSuPqsx4Srmmu86y7VLfw8RGj8xLIMg_5qQ5qU9beU15EnNrnSQ-OWZ2bo7sa4You8JXtJkuPycyNyS_1pM-KtJ7_UkEj2CRz36gvC3Xd4SPpqPtd9hCoQy3KWr0ezSO1cvJBXYBeYB-ltm0flyYv3EuAGf1g-oEqIVhOn/s1183/40.png"/></span></p>
<ul>
<li><span style="color: #000000;">Ensure its security group has the necessary rules.</span></li>
</ul>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEizLXWnaSAHSSVkKSwsiy-maCBeOFOiCuvs11g5Kp0XtrK6ca8XdB0iZC_SoIutPnnYHFq9FtP0yxoaFNEfmCS43QSeH_7D60oGGjzTIDwh2zUUpZm8-yx6hq7dUB-iS0BNrTNov-4rnbAtda2zrWzi0E9UeoqVXTxyo1bc-gNA8qtj8hpslergXuuF4L0_/s990/41.png" alt="AWS Penetration Testing Lab Setup" width="990" height="399"/></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi6P9uz1jkk0uDkC2mCaObUxPvz_QeiDWIaNqYxmdsNHAAy2BQ6fqDFAbjQV_b9zsO4qpLQmuw1z1Q1ivswLhI5Nq_OyeUnaYwJF6i8fIqhxX1EAE1UY1DqhqKIqXAU7byKVQ9anXwe2VGEzLq8Qztw5Nhz7043sUb192Nfl3070lVBeC6_pDbuhbCc744s/s1093/42.png"/></span></p>
<h4><span style="color: #000000;">Step 4: Test Connectivity from Kali Linux</span></h4>
<ol>
<li><span style="color: #000000;">Firstly, connect to your Kali Linux instance via SSH using its key pair and public IP/DNS, similar to how you connected to the Ubuntu instance.</span></li>
<li><span style="color: #000000;">Then once connected to Kali, try to ping your Ubuntu instance’s public IP address (or private IP if they are in the same VPC and allowed by security groups).</span>
<ul>
<li><span style="color: #000000;">Example: ping 13.233.102.95 (Replace with your Ubuntu instance’s IP).</span></li>
</ul>
</li>
</ol>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiem7WEt22KBK82ywKJzaIbyj-Jjgh4_Uki5360eAmtpsXibFkY7oaWgeep2zcuaaDZk99PtChsZWPyVSPmkLdu5hyJB4Es5eeVhufWeKIqKXXPV2SqDIcKyxuOlHO5s4nQhBW0nGeC1HLjuE_nESqL4smI6LiT4YGiwVvl1bQHZz2Z7ZhGfo_4hZM80lo2/s1052/43.png" alt="AWS Penetration Testing Lab Setup" width="1052" height="260"/></span></p>
<ol>
<li style="list-style-type: none;">
<ul>
<li><span style="color: #000000;">A successful ping indicates network connectivity between your Kali attacker machine and the vulnerable web server.</span></li>
</ul>
</li>
</ol>
<p><span style="color: #000000;">Finally, this completes the setup of your AWS lab environment with a vulnerable web server and an attacker Kali Linux machine. You can now proceed with your security testing and exploit development.</span></p>
<p><span style="color: #000000;">To learn more about Cloud Security. Follow this <a href="https://www.hackingarticles.in/category/cloud-security/">link.</a></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
