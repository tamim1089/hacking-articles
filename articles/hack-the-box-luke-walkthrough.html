<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/ctf-challenges/" rel="category tag">CTF Challenges</a>, <a href="https://www.hackingarticles.in/category/ctf-challenges/hackthebox/" rel="category tag">HackTheBox</a></span>            </div>
            <h1 class="post-title entry-title">Hack the Box: Luke Walkthrough</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/hack-the-box-luke-walkthrough/" rel="bookmark"><time class="entry-date published" datetime="2019-09-20T15:17:31+00:00">September 20, 2019</time><time class="updated" datetime="2025-06-27T12:34:57+00:00">June 27, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">Hello! Everyone and Welcome to yet another CTF challenge from Hack the Box, called ‘Luke,’ which is available online for those who want to increase their skills in penetration testing and Black box testing. Luke is a retired vulnerable lab presented by Hack the Box for making online penetration testing practice suitable to your experience level; they have a large collection of vulnerable labs as challenges ranging from beginner to expert level.</span></p>
<p><span style="color: #000000;"><strong>Level:</strong> Easy</span></p>
<p><span style="color: #000000;"><strong>Task:</strong> Find user.txt and root.txt in the victim’s machine</span></p>
<h3><span style="color: #800000;">Penetration Methodologies</span></h3>
<ul>
<li><strong><span style="color: #000000;">Scanning</span></strong></li>
<li style="list-style-type: none;">
<ul>
<li><span style="color: #000000;">Nmap</span></li>
</ul>
</li>
<li><strong><span style="color: #000000;">Enumeration</span></strong>
<ul>
<li><span style="color: #000000;">   Logging in FTP as anonymous</span></li>
<li><span style="color: #000000;">   Browsing HTTP service</span></li>
<li><span style="color: #000000;">   Directory Scanning using Dirsearch</span></li>
</ul>
</li>
<li><strong><span style="color: #000000;">Exploitation</span></strong>
<ul>
<li><span style="color: #000000;">   Extracting Authentication token using curl   </span></li>
<li><span style="color: #000000;">   Extracting User information using curl</span></li>
<li><span style="color: #000000;">   Extracting Password using curl</span></li>
</ul>
</li>
<li><strong><span style="color: #000000;">Privilege Escalation</span></strong>
<ul>
<li><span style="color: #000000;">   Logging in Ajenti Panel</span></li>
</ul>
</li>
<li><strong><span style="color: #000000;">Capturing the flag</span></strong></li>
</ul>
<h3><span style="color: #000000;">Walkthrough</span></h3>
<h3><span style="color: #800000;">Network Scanning</span></h3>
<p><span style="color: #000000;">Let’s get started then!</span></p>
<p><span style="color: #000000;">Since these labs have a static IP, the IP address for Luke is 10.10.10.137. Let us scan the VM with the most popular port scanning tool, nmap.</span></p>
<pre class="lang:default decode:true ">nmap -A 10.10.10.137</pre>
<p><img decoding="async" src="https://1.bp.blogspot.com/-xk-rreU2ENQ/XYTpCT3xwNI/AAAAAAAAgi0/nYUAyuxok4gOCwvjxKBtbYuPaB6zJ-u5wCLcBGAsYHQ/s1600/1.png"/></p>
<p><span style="color: #000000;">From the result above we found five working ports on the VM, port 21, 22, 80, 3000, 8000.</span></p>
<p><span style="color: #000000;">Here, we can saw that FTP allow anonymous login. So, we check it.</span></p>
<pre class="lang:default decode:true ">ftp 10.10.10.137
ftp&gt; ls
ftp&gt; cd webapp
ftp&gt; ls
ftp&gt; get for_Chihiro.txt</pre>
<p><img decoding="async" src="https://1.bp.blogspot.com/-3mmvE2ac4pU/XYTpE1srQlI/AAAAAAAAgjU/URWkKDzAr3wQgxC_lQK1qa57bqhL0UF7ACLcBGAsYHQ/s1600/2.png"/></p>
<p><span style="color: #000000;">Through FTP login we found a for_Chihiro.txt file, where Chihiro or Derry might be usernames.</span></p>
<pre class="lang:default decode:true ">cat for_Chihiro.txt</pre>
<p><img decoding="async" src="https://1.bp.blogspot.com/-uQTAhSf9UAk/XYTpFIsIAEI/AAAAAAAAgjc/GGpeOpsGmNQ_xnfkiDNKCAC3G4qIEPWFQCLcBGAsYHQ/s1600/3.png"/></p>
<p><span style="color: #000000;">We found that the HTTP service runs on port 80, from nmap results. So, we browse the IP address of Target in the browser. We found a simple HTML page.</span></p>
<p><img decoding="async" src="https://1.bp.blogspot.com/-XUaUFSGdEds/XYTpFIR23HI/AAAAAAAAgjY/so_vykNywzIwGjvZ8DdyGYtFAbvDSdU0gCLcBGAsYHQ/s1600/4.png"/></p>
<p><span style="color: #000000;">We also started a Directory Bruteforce in order to enumerate the machine further. This gave us some directories and files namely config.php, management etc.</span></p>
<pre class="lang:default decode:true ">./dirsearch.py -u http://10.10.10.137 -e php -x 400, 403, 404</pre>
<p><img decoding="async" src="https://1.bp.blogspot.com/-Kw0aQPZXpyU/XYTpF6r_ICI/AAAAAAAAgjg/7k_JbyRRhD8QgezDmG_1TOgvWfVAbQWfgCLcBGAsYHQ/s1600/5.png"/></p>
<p><span style="color: #000000;">We enumerated all of them. Among which config.php gave us some database credentials as shown in the image below.</span></p>
<p><img decoding="async" src="https://1.bp.blogspot.com/-UmHcQ90RweQ/XYTpGD6h4XI/AAAAAAAAgjo/tXvbnK-l7D829fhchUDSdjFxhNVGAVfeACLcBGAsYHQ/s1600/6.png"/></p>
<p><span style="color: #000000;">We tried credentials on 10.10.10.137/management. But it gave back an unauthorized error. We will come back to it again.</span></p>
<p><img decoding="async" src="https://1.bp.blogspot.com/-ka6aROfXzWo/XYTpGJ4Qh4I/AAAAAAAAgjk/kCGHUV8X6LM3_-P4mw1DUafi-FDEo2YlACLcBGAsYHQ/s1600/7.png"/></p>
<p><span style="color: #000000;">Back to our nmap scan, we found that a Nodejs service running on port 3000. On browsing the IP Address with 3000 port, we got a message that says that auth token is not supplied.</span></p>
<p><img decoding="async" src="https://1.bp.blogspot.com/-tvqDZjfAwc8/XYTpG7eTANI/AAAAAAAAgjs/2S48zL_vca4oBoKI76hJOOIBRTaE9PFwACLcBGAsYHQ/s1600/8.png"/></p>
<p><span style="color: #000000;">We further did a Directory Bruteforce on port 3000. We found pages named /login and /users.</span></p>
<pre class="lang:default decode:true ">./dirsearch.py -u http://10.10.10.137:3000 -e php -x 400, 403, 404</pre>
<p><img decoding="async" src="https://1.bp.blogspot.com/-e7wkDwJFDjo/XYTpHIjDTvI/AAAAAAAAgjw/IKjfYMOORoY2ZDacgTUf0XHkUA9thUbgwCLcBGAsYHQ/s1600/9.png"/></p>
<p><span style="color: #000000;">After a bit of research, we can use the curl command to authenticate JWT token. For more, you can read this article from <a style="color: #000000;" href="https://nieldw.medium.com/using-curl-to-authenticate-with-jwt-bearer-tokens-55b7fac506bd">here</a>.</span></p>
<p><span style="color: #000000;">The tricky part here is the username is admin and not root which we guessed.</span></p>
<p><span style="color: #000000;">So, the curl command with the admin as username and password we got earlier.</span></p>
<pre class="lang:default decode:true ">curl --header "Content-Type: application/json" --request POST --data '{"username":"admin", "password":"Zk6heYCyv6ZE9Xcg"}' http://10.10.10.137:3000/login</pre>
<p><img decoding="async" src="https://1.bp.blogspot.com/-5BPaJ9Fjlg4/XYTpCZJmLfI/AAAAAAAAgiw/fRPNlMvcmTMIXBh0TU0IQ8t19wgiyBrIgCLcBGAsYHQ/s1600/10.png"/></p>
<p><span style="color: #000000;">This gave us the auth token.</span></p>
<p><span style="color: #000000;">We enumerated usernames using the curl command with the help of the Authentication token we found earlier. This gave the users information as shown in the image given below.</span></p>
<pre class="lang:default decode:true ">curl -X GET -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiaWF0IjoxNTY4OTU2MTc5LCJleHAiOjE1NjkwNDI1Nzl9.h_myZ4FZXFxldR_L2ZK23py2EF410E6ipZn_X_lo310' http://10.10.10.137:3000/users</pre>
<p><img decoding="async" src="https://1.bp.blogspot.com/-UU-HIPBVrAI/XYTpCUMRuEI/AAAAAAAAgi4/JJjMqu3QRG8LwVxDJbqfv_Rmdq3qvsEEQCLcBGAsYHQ/s1600/11.png"/></p>
<p><span style="color: #000000;">We enumerated all users using the curl command. This gave use password for those users as shown in the image given below.</span></p>
<pre class="lang:default decode:true ">curl -X GET -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiaWF0IjoxNTY4OTU2MTc5LCJleHAiOjE1NjkwNDI1Nzl9.h_myZ4FZXFxldR_L2ZK23py2EF410E6ipZn_X_lo310’ http://10.10.10.137:3000/users/Derry</pre>
<p><img decoding="async" src="https://1.bp.blogspot.com/-_OLhvTCSEV4/XYTpC5llWGI/AAAAAAAAgi8/0hTChhddZEwu16ku9Fhn0w9cg10_8R5nwCLcBGAsYHQ/s1600/12.png"/></p>
<p><span style="color: #000000;">We logged in the management page successfully using the credentials of user Derry.</span></p>
<p><span style="color: #000000;"><strong>User Name: Derry</strong></span></p>
<p><span style="color: #000000;"><strong>Password: rZ86wwLvx7jUxtch</strong></span></p>
<p><img decoding="async" src="https://1.bp.blogspot.com/-l4ahgsVuwNM/XYTpDDclr6I/AAAAAAAAgjA/7J9-uP-4ImUtEOYzYf5oI0c9JhYVOekQgCLcBGAsYHQ/s1600/13.png"/></p>
<p><span style="color: #000000;">After logging in we found files named config.json, config.php and login.php. We enumerated all these files among which config.json seemed interesting.</span></p>
<p><img decoding="async" src="https://1.bp.blogspot.com/-Qx_IHdRuGyE/XYTpDebAMRI/AAAAAAAAgjE/f3ca2LPEUkU5vVvAUlMlnvmqVNDzuxKbgCLcBGAsYHQ/s1600/14.png"/></p>
<p><span style="color: #000000;">The config.json file had some information related to ‘ajenti’ service running on port 8000 and a password.</span></p>
<p><img decoding="async" src="https://1.bp.blogspot.com/-xbMK9UFu6Yg/XYTpD7lbECI/AAAAAAAAgjI/gWfgqjDbO_YYwHsegSgK0dwGUgsXbJYAQCLcBGAsYHQ/s1600/15.png"/></p>
<p><span style="color: #000000;">We browsed the IP Address with the port 8000, It gave us another login form. We used the following credentials into the form. This successfully gave us the ajenti panel as shown in the image given below:</span></p>
<p><strong><span style="color: #000000;">Username: root</span></strong></p>
<p><strong><span style="color: #000000;">Password: KpMasng655EtTy9Z</span></strong></p>
<p><img decoding="async" src="https://1.bp.blogspot.com/-wBji1JQ7-wU/XYTpD6F3J6I/AAAAAAAAgjM/76OLXGd25G0nCwyirkshDmdCmbuOSQksACLcBGAsYHQ/s1600/16.png"/></p>
<p><span style="color: #000000;">After Enumerating a bit, we saw the option to open terminal. On opening the terminal, we checked the user and group details using id command. It is a root shell. Here we enumerated the shell for the user and the root flags.</span></p>
<p><img decoding="async" src="https://1.bp.blogspot.com/-mAFylcymbkg/XYTpEToxwJI/AAAAAAAAgjQ/YR6iYWzURr09T_QGwGFEHiCDCOer9nx9ACLcBGAsYHQ/s1600/17.png"/></p>
<p><span style="color: #000000;"><strong>Author: Prabhjot Dunglay</strong> is a Cyber Security Enthusiast with 2 years of experience in Penetration Testing at Hacking Articles. Contact <a style="color: #000000;" href="https://www.linkedin.com/in/prabhjotdunglay">here</a>.</span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
