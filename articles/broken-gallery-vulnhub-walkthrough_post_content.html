<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/ctf-challenges/" rel="category tag">CTF Challenges</a>, <a href="https://www.hackingarticles.in/category/ctf-challenges/vulnhub/" rel="category tag">VulnHub</a></span>            </div>
            <h1 class="post-title entry-title">Broken: Gallery Vulnhub Walkthrough</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/broken-gallery-vulnhub-walkthrough/" rel="bookmark"><time class="entry-date published" datetime="2019-08-18T18:46:50+00:00">August 18, 2019</time><time class="updated" datetime="2025-06-10T20:11:18+00:00">June 10, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">We have another CTF challenges for CTF players that named as “Broken” and it can be download from vulnhub from<strong><em> <a style="color: #000000;" href="https://www.vulnhub.com/entry/broken-gallery,344/">here</a></em></strong>. The credit goes “Avraham Cohen” for designing this VM machine for beginners. This is a Linux based CTF challenge where you can use your basic pentest skill for Compromising this VM to escalate the root privilege shell.</span></p>
<h3><span style="color: #800000;">Penetration Testing Methodologies</span></h3>
<p><span style="color: #000000;"><strong>Network Scanning</strong></span></p>
<ul>
<li><span style="color: #000000;">Netdiscover</span></li>
<li><span style="color: #000000;">Nmap</span></li>
</ul>
<p><span style="color: #000000;"><strong>Enumeration</strong></span></p>
<p><span style="color: #000000;"><strong>Exploiting</strong></span></p>
<ul>
<li><span style="color: #000000;">Brute Force</span></li>
<li><span style="color: #000000;">Post enumeration</span></li>
</ul>
<p><span style="color: #000000;"><strong>Privilege escalation </strong></span></p>
<ul>
<li><span style="color: #000000;">Abusing sudo rights</span></li>
</ul>
<h3><span style="color: #000000;"><strong><u>Walkthrough </u></strong></span></h3>
<h3><span style="color: #800000;"><strong>Network Scanning</strong></span></h3>
<p><span style="color: #000000;">Let’s begin with the network scan using netdiscover to identify the host machine IP.</span></p>
<pre class="lang:default decode:true">netdiscover</pre>
<p><span style="color: #000000;">And this gave <strong>192.168.1.107</strong> as Host IP, now we will move toward ports and service scan further.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-86kay6sejiA/XVma-ApoEAI/AAAAAAAAgKA/kw2v1Kw30igNlMpzMoskdn3pS02OhnmngCLcBGAs/s1600/1.png"/></span></p>
<p><span style="color: #000000;">For deep network scan we always prefer to use nmap aggressive scan and this time also we will go with the same approach, thus will run the below command to enumerate running services and open port.</span></p>
<pre class="lang:default decode:true">nmap -A 192.168.1.107</pre>
<p><span style="color: #000000;">From its scan result, we found port 22 and 80 is open for SSH and HTTP service respectively.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-Dgn0-PHLxPI/XVma_W7UmLI/AAAAAAAAgKM/lCKoL1YqiIY6ZqdifMRdh7sGkfNpbTeVACLcBGAs/s1600/2.png"/></span></p>
<h3><span style="color: #800000;"><strong>Enumeration</strong></span></h3>
<p><span style="color: #000000;">For more detail we need to start enumeration against the host machine, therefore, we navigate to a web browser for exploring HTTP service.</span></p>
<p><span style="color: #000000;"> We obtained some files as shown in the given below image. Thus, we downloaded and explored each file but didn’t found any remarkable clue for further move.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-e2CEILOJaRg/XVma_bMxZ_I/AAAAAAAAgKQ/o2kBiAjQoo4xItR9JNsoByxm_SOomLXYACLcBGAs/s1600/3.png"/></span></p>
<p><span style="color: #000000;">Considering above file name could be helpful in generating a wordlist for brute force attack, I saved above file names and all relevant hint in two text files and named them “<em>user</em>” &amp; “<em>pwd</em>” as shown below.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-teQKE1mqwj0/XVma_jk-I5I/AAAAAAAAgKU/Ui4JkVFKOiY2TxC17B8cC2w-gYpKHFzswCLcBGAs/s1600/4.png"/></span></p>
<h3><span style="color: #800000;"><strong>Exploiting </strong></span></h3>
<p><span style="color: #000000;">Now it was time to use hydra for making brute force attack on port 22 for SSH login thus we run below command in our local machine.</span></p>
<pre class="lang:default decode:true">hydra -L user -P pwd 192.168.1.107 ssh</pre>
<p><span style="color: #000000;">Great!! It works and we have broken: </span><span style="color: #000000;">broken</span><span style="color: #000000;"> </span><span style="color: #000000;">as SSH login credential.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-0qO5MXIj7Xk/XVmbAMLY2hI/AAAAAAAAgKY/mjQ0pFdX40sBSlQbKPc__q-cTwP8bkiWwCLcBGAs/s1600/5.png"/></span></p>
<p><span style="color: #000000;">With the help of above credential, we logged in and access the low privilege through user broken and notice that he has sudo rights for <strong>timedatectl</strong> and <strong>reboot</strong> to be executed with root privilege.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-ibQXUhP0YWk/XVmbArixXQI/AAAAAAAAgKc/EZrMNna2YQwXCQmLLVBR2MLpO0zTL-yyACLcBGAs/s1600/6.png"/></span></p>
<h3><span style="color: #000000;"><strong><span style="color: #800000;">Privilege Escalation</span> </strong></span></h3>
<p><span style="color: #000000;">To escalate the root privilege, we went for post enumerating and looked for <strong>.bash_history</strong> file.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-w9kyilkz0MA/XVmbAutyWpI/AAAAAAAAgKg/2rbBh-ssWooFIkK2bJojNxtzXypzJdsrwCLcBGAs/s1600/7.png"/></span></p>
<p><span style="color: #000000;">In this file, we noticed some interesting action has been performed by the author which was pointing towards a file name “<strong>password-policy.sh</strong>” that exist inside <em>/etc/init.d</em> moreover a command to set time-date using “<strong>timedatectl” </strong>command and much more.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-Yu7jMG3GH4g/XVmbBLKP0FI/AAAAAAAAgKk/k4tIQjcKEdsHJ8yYKgKDr__fJLAFnpAwACLcBGAs/s1600/8.png"/></span></p>
<p><span style="color: #000000;">Very fast we open the <strong>password-policy.sh </strong>that exist inside <em>/etc/init.d </em>and found the command for change the root password into “<em>TodayIsAgoodDay</em>” when met to the specific condition that i.e time-date.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-VDX2v5dnzu0/XVmbBgqZYLI/AAAAAAAAgKo/9DtTTeuEsE8juZCfF3s2Mnddwz7kKq18QCLcBGAs/s1600/9.png"/></span></p>
<p><span style="color: #000000;">So we run timedatectl command along with sudo permissions and to set date and time and then reboot the machine as followed in the below commands </span></p>
<p><span style="color: #000000;">Reference: <a href="https://www.tecmint.com/set-time-timezone-and-synchronize-time-using-timedatectl-command/"><strong>Here</strong></a></span></p>
<pre class="lang:default decode:true">sudo timedatectl set-time '2015-11-20 16:14:50'
sudo /sbin/reboot</pre>
<p><img decoding="async" style="color: #000000;" src="https://1.bp.blogspot.com/-bLDK5F5mp6o/XVma-cbJnFI/AAAAAAAAgKE/TbaceKasqIMEutFUwV8ac6tjg6uvb5xHgCLcBGAs/s1600/10.png"/></p>
<p><span style="color: #000000;">Now we again connect to the host machine via ssh as done previously and then try to access the root shell by switching the user account. As we were hoping the password should be changed into “TodayIsAgoodDay<em>” </em>therefore we use it as for login as root.</span></p>
<p><span style="color: #000000;">Yes, it works, and we have successfully obtained the root shell and with this, the task finished here.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-lAsqSGQRUks/XVma-ewO7gI/AAAAAAAAgKI/u0yPnxKiHWcCpsLeweiO8HGzXsTfX708QCLcBGAs/s1600/11.png"/></span></p>
<p><span style="color: #000000;"><strong>Author: </strong>Aarti Singh is a Researcher and Technical Writer at Hacking Articles an Information Security Consultant Social Media Lover and Gadgets. Contact<strong><a style="color: #000000;" href="https://www.linkedin.com/in/aarti--singh/"> here</a></strong></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
<!-- YARPP Thumbnails -->
<h3>Related posts:</h3>
<div class="yarpp-thumbnails-horizontal">
<a class="yarpp-thumbnail" rel="norewrite" href="https://www.hackingarticles.in/chronos-vulnhub-walkthrough/" title="Chronos Vulnhub Walkthrough">
<span class="yarpp-thumbnail-default"><img src="https://www.hackingarticles.in/wp-content/plugins/yet-another-related-posts-plugin/images/default.png" alt="Default Thumbnail" data-pin-nopin="true"/></span><span class="yarpp-thumbnail-title">Chronos Vulnhub Walkthrough</span></a>
<a class="yarpp-thumbnail" rel="norewrite" href="https://www.hackingarticles.in/digital-world-local-vengeance-vulnhub-walkthrough/" title="digital world.local: Vengeance Vulnhub Walkthrough">
<span class="yarpp-thumbnail-default"><img src="https://www.hackingarticles.in/wp-content/plugins/yet-another-related-posts-plugin/images/default.png" alt="Default Thumbnail" data-pin-nopin="true"/></span><span class="yarpp-thumbnail-title">digital world.local: Vengeance Vulnhub Walkthrough</span></a>
</div>
</div>
            </div><!-- .entry-content -->
            <footer class="post-footer entry-footer">
                                                
            </footer><!-- .entry-footer -->
            
	<nav class="navigation post-navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://www.hackingarticles.in/dpwwn2-vulnhub-walkthrough/" rel="prev">dpwwn:2 Vulnhub Walkthrough</a></div><div class="nav-next"><a href="https://www.hackingarticles.in/hands-on-red-team-tactics-a-red-team-edition-book/" rel="next">Hands-on Red Team Tactics – A Red Team Edition book</a></div></div>
	</nav>        </div>
