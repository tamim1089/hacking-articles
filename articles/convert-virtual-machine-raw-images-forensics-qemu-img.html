<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/cyber-forensics-tricks/" rel="category tag">Cyber Forensics</a></span>            </div>
            <h1 class="post-title entry-title">Convert Virtual Machine to Raw Images for Forensics (Qemu-Img)</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/convert-virtual-machine-raw-images-forensics-qemu-img/" rel="bookmark"><time class="entry-date published" datetime="2018-02-01T06:22:11+00:00">February 1, 2018</time><time class="updated" datetime="2025-05-21T08:20:20+00:00">May 21, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <h3><span style="color: #800000;">Introduction to Qemu-img for Virtual Disk Conversion</span></h3>
<p><span style="color: #000000;">This is a very handy little application. The QEMU team developed it. The software is very useful when dealing with virtualization, and you can find Qemu-img available for both Windows and Linux. You can change the format of a given virtual disk file to most of the popular virtual disk formats used across platforms. For example, if you are using VirtualBox in Windows and want to migrate the virtual disk for use on a Mac in Parallels, this simple program enables you to achieve that with minimum effort.</span></p>
<p><span style="color: #000000;">However, our purpose in writing about this today slightly differs from Qemu-img’s mainstream usage. Instead, we want to focus on using this application to convert a virtual disk image—whether whole or split—into a <strong>.raw</strong> file that most popular forensic frameworks can utilize.</span></p>
<h3 data-start="1042" data-end="1097"><span style="color: #800000;">Using Qemu-img for Disk Conversion in Forensics</span></h3>
<p><span style="color: #000000;">Let’s start up Qemu-img on our Linux machine</span></p>
<p><span style="color: #000000;">At the terminal prompt type <strong>“qemu-img –h”</strong></span></p>
<p><span style="color: #000000;">This will show you all the options that can be used with qemu-img</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-vHoe4KLT1Fk/WnKt9ysxm5I/AAAAAAAAT4Y/G0zPGKJNpSAOMs5b_cFpdW4oH3pX6pdowCLcBGAs/s1600/1.PNG"/></span></p>
<p><span style="color: #000000;">Right at the end of the information presented after using the command given above, we can see all the formats that this application supports.</span></p>
<p><span style="color: #000000;">Here is a list of all the formats that are compatible with Qemu-img</span></p>
<p><span style="color: #000000;"><img decoding="async" class="alignnone" src="https://2.bp.blogspot.com/-gqJLdE4t_jk/WnKt-4KVrTI/AAAAAAAAT4k/crDZpP2e5oc46LDt6p0pYej6B1pqIbzDwCLcBGAs/s1600/2.PNG" alt="convert virtual machine raw images forensics QEMU-img" width="733" height="57"/></span></p>
<p><span style="color: #000000;">Now let’s see how this application comes in handy for use in forensics.</span></p>
<p><span style="color: #000000;">In a situation where an investigator includes a virtual disk as part of the acquisition and requires further dedicated analysis, they can convert the virtual disk into the .raw format.</span></p>
<h5><span style="color: #000000;">Let’s begin.</span></h5>
<p><span style="color: #000000;">Since our goal is to analyze the virtual disk, we are using the image file from Windows 7 installed on VMWare. The file in question is in <strong>.vmdk</strong> format.</span></p>
<p><span style="color: #000000;">Just a heads up, when you convert a virtual disk file to a <strong>.raw</strong> file, the size of the converted file can be quite big, so make sure you have enough space.</span></p>
<p><span style="color: #000000;">Here is our <strong>.vmdk</strong> file</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-DQApM6ywPbo/WnKt_LKKX7I/AAAAAAAAT4o/lXnBOZyV8uA5MQOjTJ3LHHm2ZR7Oo7t7QCLcBGAs/s1600/3.PNG"/></span></p>
<p><span style="color: #000000;">For ease of use, we have placed the <strong>.vmdk</strong> file in a folder named <strong>Qmeu </strong>on the desktop<strong>. </strong>The terminal is opened from within the folder.</span></p>
<p><span style="color: #000000;">At the terminal prompt type <strong>“qemu-img convert -f vmdk -O raw Windows\ 7.vmdk win7.raw”</strong></span></p>
<p><span style="color: #000000;">A breakdown of the command that we just gave:</span></p>
<p><span style="color: #000000;">qemu-img convert is invoking the convert function of qemu-img.</span></p>
<p><span style="color: #000000;"><strong>-f </strong>is the format of the input file, which in this case is <strong>.vmdk</strong></span></p>
<p><span style="color: #000000;"><strong>-O </strong>is the format of the output file that we want, a <strong>.raw</strong> file.</span></p>
<p><span style="color: #000000;"><strong>Windows\ 7.vmdk </strong>is the name of the input file that we have in our folder.</span></p>
<p><span style="color: #000000;"><strong>win7.raw </strong>is the name we have given the output file with its file extension.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-Tr_HmpjGI6k/WnKt__wkx1I/AAAAAAAAT40/IW6eWb8l2F8F7qgASDiwa3EQD7GzGkDEQCLcBGAs/s1600/6.PNG"/></span></p>
<p><span style="color: #000000;">Give it a few minutes and check the folder, you will find the converted file.</span></p>
<p><span style="color: #000000;">As you can see, the size of the .raw file is 10.7 GB and the size of the .vmdk file was 6.0 GB, that’s quite a jump in size!</span></p>
<p><span style="color: #000000;"><img fetchpriority="high" decoding="async" class="alignnone" src="https://3.bp.blogspot.com/-jowtOJhFCAc/WnKt_h1TnpI/AAAAAAAAT4w/2EkQobdnEmwT4Jwd5WGgrIcUF7NFmn5-QCLcBGAs/s1600/5.PNG" alt="convert virtual machine raw images forensics QEMU-img" width="457" height="283"/></span></p>
<h3><span style="color: #800000;">Carving and Mounting the .raw File</span></h3>
<p><span style="color: #000000;">We can now use <strong>Foremost</strong> to carve the <strong>.</strong>raw file to see what’s inside.</span></p>
<p><span style="color: #000000;">At the terminal type <strong>“foremost -t jpeg, png -i win7 -o output”</strong></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-Tr_HmpjGI6k/WnKt__wkx1I/AAAAAAAAT40/IW6eWb8l2F8F7qgASDiwa3EQD7GzGkDEQCLcBGAs/s1600/6.PNG"/></span></p>
<p><span style="color: #000000;">With this command, we are carving the <strong>.raw</strong> file for <strong>.jpeg </strong>and <strong>.png</strong> files which will be collected in a folder named <strong>output</strong>. If you have any doubts about foremost you can refer to <a style="color: #000000;" href="http://www.hackingarticles.in/forensic-data-carving-using-foremost/">this</a> article.</span></p>
<p><span style="color: #000000;">As you can see, our <strong>.raw</strong> file has been successfully carved, the results are visible below</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-a0rGvu8isAk/WnKuAMhlvpI/AAAAAAAAT44/QO3WGMtKq7UIUp-RchDeyCXJh_NVf0P-ACLcBGAs/s1600/7.png"/></span></p>
<p><span style="color: #000000;">We have successfully carved a .raw file made from a virtual disk. Now, let’s mount the.raw file to view its contents. For this operation, we will be using a Windows machine.</span></p>
<p><span style="color: #000000;">Then, we will mount this.raw file using FTK Imager to examine its contents. The image mounting option is available under the File menu. Then, navigate to the .raw file from within the mounting menu. </span></p>
<p><span style="color: #000000;"><img decoding="async" class="alignnone" src="https://2.bp.blogspot.com/-bC_nzfszmdM/WnKuAa4nGMI/AAAAAAAAT48/q-rwI_tMrEUF2pkoiG0z1OLnuoAAIB47gCLcBGAs/s1600/8.PNG" alt="convert virtual machine raw images forensics QEMU-img" width="775" height="279"/></span></p>
<p><span style="color: #000000;">Select<strong> Mount, </strong>leave the other options as they are and the file will appear on the <strong>Mapped Image List.</strong></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-So1SEYKQeKg/WnKuAc09QKI/AAAAAAAAT5A/1TA53VNqW1EMAlpy3JGoyN-VPyN5To9LwCLcBGAs/s1600/9.PNG"/></span></p>
<p><span style="color: #000000;">Next, we navigate to <strong>My Computer</strong> and we can see that the <strong>.raw</strong> has been mounted as a partition.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-JXnyQxD5VfE/WnKt-P7VWwI/AAAAAAAAT4g/a_yQC_Zk4TEZ81uwyB3LdLYMYNiyeAslgCLcBGAs/s1600/10.PNG"/></span></p>
<p><span style="color: #000000;">You can see and explore the Windows file system for content.</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://4.bp.blogspot.com/-Tsmzzcmy8CI/WnKt-I4qtWI/AAAAAAAAT4c/ihApxQeDQ4oYSuTfo98AJ98-V1NOWL9DQCLcBGAs/s1600/11.PNG" alt="convert virtual machine raw images forensics QEMU-img" width="698" height="578"/></span></p>
<h3><span style="color: #800000;">Conclusion </span></h3>
<p><span style="color: #000000;">Qemu-img is a very simple application with high potential. You can find it to be a very valuable tool in your forensic toolkit due to its large list of compatible formats. It will make sure that the format of the acquired image does not keep you from using your forensic tool of choice to run your investigation or carve out data.</span></p>
<p><span style="color: #000000;">We hope you enjoy using this tool.</span></p>
<p><span style="color: #000000;">Have fun and stay ethical.</span></p>
<p><span style="color: #000000;">To learn more about Cyber Forensics. Follow this</span> <strong><a href="https://www.hackingarticles.in/category/cyber-forensics-tricks/">Link</a></strong></p>
<p><span style="color: #000000;"><strong>Author: </strong></span><span style="color: #000000;">Abhimanyu Dev is a Certified Ethical Hacker, penetration tester, information security analyst and researcher. Connect with him <strong><a style="color: #000000;" href="http://www.linkedin.com/in/abhimanyudev">here</a></strong></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-related-none yarpp-template-thumbnails">
