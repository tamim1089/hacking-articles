<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/penetration-testing/" rel="category tag">Penetration Testing</a></span>            </div>
            <h1 class="post-title entry-title">Post Exploitation in Windows using dir Command</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/post-exploitation-windows-using-dir-command/" rel="bookmark"><time class="entry-date published updated" datetime="2018-01-16T10:03:41+00:00">January 16, 2018</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">In this article, we will learn how to use Windows Command Line Command “<strong>dir</strong>”. We will also learn to extract files, get information about Number of files of a particular extension and much more using the Metasploit framework. </span></p>
<p><span style="color: #000000;"><strong>dir Command: </strong>It displays a list of a directory’s files and subdirectories.</span></p>
<p><span style="color: #000000;"><strong>Syntax</strong></span></p>
<p><span style="color: #000000;">dir [&lt;Drive&gt;:] [&lt;Path&gt;] [&lt;FileName&gt;] [/p] [/q] [/a [[:] &lt;Attributes&gt;]] [/s] [/b]</span></p>
<ol>
<li><span style="color: #000000;"><strong>[/p]:</strong> Displays one screen of the listing at a time.</span></li>
<li><span style="color: #000000;"><strong>[/q]:</strong> Displays file ownership information.</span></li>
<li><span style="color: #000000;"><strong>[/s]:</strong> Lists every occurrence of the specified file name within the specified directory and all subdirectories.</span></li>
<li><span style="color: #000000;"><strong>[/b]:</strong> Displays a bare list of directories and files, with no additional information.</span></li>
<li><span style="color: #000000;"><strong>[/a]:</strong> Attributes (Additional Options).</span></li>
</ol>
<p><span style="color: #000000;">It is usually attached with options such as</span></p>
<ul>
<li><span style="color: #000000;"><strong>[/ad]:</strong>  Directories</span></li>
<li><span style="color: #000000;"><strong>[/ah]:</strong>  Hidden files</span></li>
<li><span style="color: #000000;"><strong>[/as]:</strong>  System files</span></li>
<li><span style="color: #000000;"><strong>[/a-attribute]:</strong> Not (It is used when opposite of the attribute is to be obtained)</span></li>
</ul>
<p><span style="color: #000000;">Now to use dir for Post Exploitation, we will need an Administrator Privileged shell. This can be found <a style="color: #000000;" href="https://www.hackingarticles.in/multiple-ways-to-bypass-uac-using-metasploit/">here</a>.</span></p>
<p><span style="color: #000000;">We will use different combinations of the attributes and parameters to extract data from the victim’s system.</span></p>
<h3><span style="color: #800000;"><strong>Find Directories using a search string</strong></span></h3>
<p><span style="color: #000000;">Here, we are using the following options with dir command:</span></p>
<ul>
<li><span style="color: #000000;"><strong>[/b]</strong> to get a bare search,</span></li>
<li><span style="color: #000000;"><strong>[/s]</strong> to get a verbose result,</span></li>
<li><span style="color: #000000;"><strong>[/ad]</strong> to get the list of directories,</span></li>
</ul>
<p><span style="color: #000000;">Containing string <strong>*sales*</strong> in their name.</span></p>
<p><span style="color: #000000;"><strong>Syntax:</strong> dir /b /s /ad [directory]\*string*</span></p>
<pre class="lang:default decode:true">dir /b /s /a-d d:\*sales*</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-A-wlT0bwsVs/Wl3LE76_-9I/AAAAAAAATSA/Pshs_ljoAlEhZlLqFBW6vb6CGdbF0NfzwCLcBGAs/s1600/1.png"/></span></p>
<h3><span style="color: #800000;"><strong>Find the Number of Files/Directories in a Directory</strong></span></h3>
<p><span style="color: #000000;">If we need the Number of files, i.e. no. of files we have to add find command by piping [<strong>|</strong>] it with dir.</span></p>
<pre class="lang:default decode:true">dir /b | find /c /v ""</pre>
<p><span style="color: #000000;">Here [/b] to get a bare search and [<strong>/c</strong>] switch tells the find tool to Number how many lines contain our search terms, and [<strong>/v</strong>] switch will show any lines that don’t contain the string of words which we have specified in this case <strong>“”</strong>. As a file name can be nothing (“”) so it will Number all the file names.</span></p>
<p><span style="color: #000000;">Here, we are using</span></p>
<p><span style="color: #000000;">Above command return number of files in the Directory, we are currently in. In my case, it returns 22, which means the victim has <strong>22 files</strong> in his D:\ directory.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-eZE13ihtH8g/Wl3LE3ADGKI/AAAAAAAATR8/0F-JNLVyVVwmUBGhVT3PhhA3K7UEWcTEwCEwYBhgL/s1600/2.png"/></span></p>
<h3><span style="color: #800000;"><strong>Find the Number of files</strong></span></h3>
<p><span style="color: #000000;">Here, we are using</span></p>
<pre class="lang:default decode:true">dir /b /s /a-d d:\*sales* | find /c /v ""</pre>
<p><span style="color: #000000;"><strong>[/ad]</strong> is for Directories.</span></p>
<p><span style="color: #000000;"><strong>[-] </strong>is used as NOT so [/a-d] is for not directories i.e. files</span></p>
<p><span style="color: #000000;">Also, find /c /v “” is used to get the Number. From given below image we can observe here it found <strong>5 files</strong> inside the sales folder.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-yMbWN2QJM5o/Wl3LFqKz8rI/AAAAAAAATSE/RAphNWAuOVY6LCjINSCSQBBGUBog0mr6QCEwYBhgL/s1600/3.png"/></span></p>
<h3><span style="color: #800000;"><strong>Find the Number of Directories </strong></span></h3>
<p><span style="color: #000000;"><strong>Syntax:</strong> dir /b /s /ad [directory]\*string* | find /c /v “”</span></p>
<pre class="lang:default decode:true">dir /b /s /ad d:\*sales* | find /c /v ""</pre>
<p><span style="color: #000000;">Here we need to get the Number of directories named *sales* It can be anything mentioned in *string*.</span></p>
<p><span style="color: #000000;">[/ad] is for Directories</span></p>
<p><span style="color: #000000;">Here <strong>find /c /v ””</strong> is used to get a Number and from given below image we can observe here it found <strong>5 subdirectories</strong> inside sales folder.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-shuICw9M5X0/Wl3LF8Y0s3I/AAAAAAAATSI/0Po89m2BYt0kSYICBd33sgTs8K1Jb1vqACEwYBhgL/s1600/4.png"/></span></p>
<h3><span style="color: #800000;"><strong>Find Files of a Particular Extension</strong></span></h3>
<p><span style="color: #000000;">In the given example, I searched for .xlsx files which are MS-Excel Files, but we can use it for an extension file like pdf, png, exe, docs etc.</span></p>
<p><span style="color: #000000;"><strong>Syntax:</strong> dir /b /s [directory]\*extension*</span></p>
<pre class="lang:default decode:true">dir /b /s d:\*.xlsx*</pre>
<p><span style="color: #000000;">From given below image we can read the name of <strong>excel</strong> <strong>files</strong> inside D: drive.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-JZ7_y4sA80M/Wl3LGWdTNcI/AAAAAAAATSM/9Z1MFYltNJQx8hYFGR3TLsEG5runbYiUQCEwYBhgL/s1600/6.png"/></span></p>
<h3><span style="color: #800000;"><strong>Find the Number of Files of a particular Extension</strong></span></h3>
<p><span style="color: #000000;">If we add find /c /v”” we will get the Number of files of a particular extension as shown below.</span></p>
<pre class="lang:default decode:true">dir /b /s d:\*.xlsx* | find /c /v ""</pre>
<p><span style="color: #000000;"> From given below image we can observe here it found <strong>4 excel</strong> <strong>files</strong> inside D: drive.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-ibccrr6f3zk/Wl3LHGv-01I/AAAAAAAATSc/O2yDPeYN3so7eXDNOVvqFo9B0ZjCOFZugCEwYBhgL/s1600/7.png"/></span></p>
<h3><span style="color: #800000;"><strong>Find the Number of Hidden Files/Directories</strong></span></h3>
<p><span style="color: #000000;">To get hidden files we will use the attribute [/ah].</span></p>
<p><span style="color: #000000;">And when combined with find /c /v “”, we will get the Number of the hidden files/directories in the given directory as shown below.</span></p>
<p><span style="color: #000000;"><strong>Syntax: </strong>dir /b /ah [directory] | find /c /v “”</span></p>
<pre class="lang:default decode:true">dir /b /ah d:\ | find /c /v ""</pre>
<p><span style="color: #000000;">From given below image we can observe here it found <strong>3 hidden</strong> <strong>files</strong> inside D: drive.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-EtN_aJgLT-Q/Wl3LHekoIpI/AAAAAAAATSc/1zK2w6Ox7rYKfrKuZxd3ArALw5GiCGLRgCEwYBhgL/s1600/8.png"/></span></p>
<h3><span style="color: #800000;"><strong>Find the Hidden Files/Directories in a Directory</strong></span></h3>
<p><span style="color: #000000;">To view the Hidden Files in the given directory we will use attribute [/ah] with [/b] to get a bare result of the hidden files.</span></p>
<p><span style="color: #000000;"><strong>Syntax:</strong> dir /b /ah [directory]</span></p>
<pre class="lang:default decode:true">dir /b /ah d:\</pre>
<p><span style="color: #000000;">From given below image we can read the name of <strong>hidden</strong> <strong>files</strong> inside D: drive.</span></p>
<p><span style="color: #000000;"><strong> </strong><img decoding="async" src="https://1.bp.blogspot.com/-b6SFdPJp0wA/Wl3LIPBQl8I/AAAAAAAATSc/-WUpD8MhD5sSgU8N5-EKIggTh3DDbu6WgCEwYBhgL/s1600/9.png"/></span></p>
<h3><span style="color: #800000;"><strong>Find the System Files Stored in a Directory</strong></span></h3>
<p><span style="color: #000000;">To get the System Files we will use another attribute which is [/as], combined with [/b] it will give the names of the system files stored in the given directory.</span></p>
<pre class="lang:default decode:true">dir /b /as d:\</pre>
<p><span style="color: #000000;">From given below image we can read the name of <strong>system files</strong> inside D: drive.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-qRS6VP0tGjo/Wl3LEzk5JnI/AAAAAAAATSc/GiudWJPrToEXdyeoQbq0_DrgxpC9XRUowCEwYBhgL/s1600/10.png"/></span></p>
<p><span style="color: #000000;"><strong>Author:</strong> Pavandeep Singh is An <strong>Ethical Hacker</strong>, <strong>Cyber Security Expert, Penetration Tester,</strong> India. Contact <a style="color: #000000;" href="https://www.linkedin.com/in/pavandeep-singh-6b1074132"><strong>here</strong></a></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
