<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/penetration-testing/" rel="category tag">Penetration Testing</a></span>            </div>
            <h1 class="post-title entry-title">Run OS Command against Multiple Session in Metasploit</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/run-os-command-against-multiple-session-in-metasploit/" rel="bookmark"><time class="entry-date published" datetime="2017-03-23T18:00:03+00:00">March 23, 2017</time><time class="updated" datetime="2025-05-27T12:03:47+00:00">May 27, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">Again we are sharing our experience with our visitors to enhance their skills and ability. In this article, you will learn how to manage multiple sessions of different targets in a network. Once you hacked more than one system in a network and received multiple meterpreter session in your Kali Linux then how will you retrieve data simultaneously from all targets.</span></p>
<p><span style="color: #000000;"><strong>Let’s Proceed</strong></span></p>
<p><span style="color: #000000;">First, an attacker needs to create a payload and share it in the network with his targets, then start multi handler in the Metasploit framework. Now when the available targets will open the payload in their system, the attacker will receive the series of sessions.</span></p>
<p><span style="color: #000000;">Here you can see from the given screenshot I have to receive two sessions from a different system.</span></p>
<pre class="lang:default decode:true">msf exploit(handler) &gt; sessions</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-hSPXYY0OiDQ/WNQMHlqCdFI/AAAAAAAAPmg/gX-RD_Mhn_weUfbyu1EKLaU_Yn3s9BphgCLcB/s1600/1.png"/></span></p>
<p><span style="color: #000000;">In order to gather the information from both targeted system simultaneously, I had used post exploitation which let an attacker execute the same command for multiple sessions at a time.</span></p>
<p><span style="color: #000000;">This module executes an arbitrary command line</span></p>
<pre class="lang:default decode:true">msf exploit(handler) &gt; use post/multi/general/execute
msf post(execute) &gt; set command ipconfig
msf post(execute) &gt; set session 1
msf post(execute) &gt;exploit</pre>
<p><span style="color: #000000;"> In the given screenshot, you can see I have executed ipconfig to know the network configuration for session 1 and here the target IP is 192.168.0.100 as result.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-gUXlh1qkvqE/WNQMHsySGSI/AAAAAAAAPmk/t4NrHBILujMKftVg6-9s7eP220OuITaVACLcB/s1600/2.png"/></span></p>
<p><span style="color: #000000;">Then in the next step, I just need to change the session from 1 into 2 so that I can know network configuration for session 2 also and here the target IP is 192.168.0.105 as result.</span></p>
<pre class="lang:default decode:true">msf post(execute) &gt; set session 2
msf post(execute) &gt;exploit</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-a7Evky3RquQ/WNQMHhYWY1I/AAAAAAAAPmo/ScKOFjK_j3M2mC2zI37nsnOM7aexp-HKACLcB/s1600/3.png"/></span></p>
<p><span style="color: #000000;"><strong>Author</strong>: Aarti Singh is a Researcher and Technical Writer at Hacking Articles an Information Security Consultant Social Media Lover and Gadgets. Contact<a style="color: #000000;" href="https://www.linkedin.com/in/aarti--singh/"><strong> here</strong></a></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
