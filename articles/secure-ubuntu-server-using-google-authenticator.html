<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/penetration-testing/" rel="category tag">Penetration Testing</a></span>            </div>
            <h1 class="post-title entry-title">How to secure Ubuntu Server using Google Authenticator</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/secure-ubuntu-server-using-google-authenticator/" rel="bookmark"><time class="entry-date published updated" datetime="2017-09-07T11:54:13+00:00">September 7, 2017</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">Hello friends, today we are going to implement two-factor authentication on ubuntu. Two-factor authentication adds an extra layer of security. We are going to use google authenticator to implement two-factor authentication.</span></p>
<p><span style="color: #000000;">Before we start, once we have set this up, we will not be able to log into the account (or issue sudo commands) without a six-digit code from the authenticator. This also adds another step for us. Remember, however, this added step brings with it an extra layer of security we wouldn’t have otherwise.</span></p>
<p><span style="color: #000000;">First we are going to install google authenticator on our Ubuntu.</span></p>
<pre class="lang:default decode:true">sudo apt-get install libpam-google-authenticator</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-UUarrzmw0iI/WbEtTmDygZI/AAAAAAAAROs/7pUHaky5AdEx99CchPGuN3nsBSD6KGU-ACLcBGAs/s1600/1.png"/></span></p>
<p><span style="color: #000000;">After we install it we are going to configure our authenticator. Open /etc/pam.d/common-auth</span></p>
<pre class="lang:default decode:true">sudo gedit /etc/pam.d/common-auth</pre>
<p> </p>
<p><span style="color: #000000;"><strong> </strong></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-FQmMApvBsHk/WbEtTSKjX6I/AAAAAAAAROo/zeoWnPN2QkcO-BMW5mQSyDRh5esYiJmYwCLcBGAs/s1600/2.png"/></span></p>
<p><span style="color: #000000;">Add a line <strong>auth required pam_google_authenticator.so</strong></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-txAmGhxtNYM/WbEtTo3mLVI/AAAAAAAAROw/BS29clw_vdkTp5bXyUHMx1czo_HCPT5KgCLcBGAs/s1600/3.png"/></span></p>
<p><span style="color: #000000;">Now install google authenticator on your smartphone.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-YmwiNtXUkbk/WbEtTwn7WjI/AAAAAAAARO0/n-dDGlazgKsEjcTAqRV35w5jxVp7ywSCgCLcBGAs/s640/4.png"/></span></p>
<p><span style="color: #000000;">After configuring the authenticator we are going to setup <strong>google-authenticator. </strong>Now run command <strong>google-authenticator </strong>on terminal. When prompted select yes for time-based authentication. In time based authentication OTP will be valid for a particular period of time.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-llsdnrDYpd8/WbEtUKJs41I/AAAAAAAARO4/uaA5SxVFLQ8kcstOg_Xu8EQREfYCE05GwCLcBGAs/s1600/5.png"/></span></p>
<p><span style="color: #000000;">Now it will generate password and a QR-code. You can either create an account manually or simply scan the QR-code on your phone to setup your account.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-U2A8vpZue7A/WbEtUSLl21I/AAAAAAAARO8/EjrJbEKsLR44VkQk__hnIm_tqBX3T9eKACLcBGAs/s1600/6.png"/></span></p>
<p><span style="color: #000000;">Once you have created the account on your smartphone it will look something like this.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-GNDxUws1hAI/WbEtU8NUldI/AAAAAAAARPE/gaCVNIjeG4YOiyt3Pt31qTdIQK9njAdVACLcBGAs/s640/7.png"/></span></p>
<p><span style="color: #000000;">After creating the account on your smartphone, select yes to update google authenticator on terminal.</span></p>
<p>After updating it will ask multiple options to select the type of authentication you want. You can customize it according to your need.</p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-YJbNufPRgHo/WbEtU_68llI/AAAAAAAARPA/Xm_CPNRK5aAXcILtB_oTogJOgzFNaUhCQCLcBGAs/s1600/8.png"/></span></p>
<p><span style="color: #000000;">Now we restart our system to check if the authenticator is working.</span></p>
<p><img decoding="async" src="https://1.bp.blogspot.com/-ooX_Pehdry4/WbEy6TKGfTI/AAAAAAAARPc/BOJVxUVcOfQURrUkWSZ-6h4Id2TBeEOVQCLcBGAs/s1600/9.png"/></p>
<p><span style="color: #000000;">Now when we try to login it asks for verification code that will be available on your smartphone.</span></p>
<p><span style="color: #000000;"><strong>Author</strong>: Sayantan Bera is a technical writer at hacking articles and cyber security enthusiast. Contact <a href="https://www.linkedin.com/in/sayantan-bera-2098a613b/"><strong>Here</strong></a></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
