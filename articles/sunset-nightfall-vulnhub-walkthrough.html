<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/ctf-challenges/" rel="category tag">CTF Challenges</a>, <a href="https://www.hackingarticles.in/category/ctf-challenges/vulnhub/" rel="category tag">VulnHub</a></span>            </div>
            <h1 class="post-title entry-title">Sunset: Nightfall Vulnhub Walkthrough</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/sunset-nightfall-vulnhub-walkthrough/" rel="bookmark"><time class="entry-date published" datetime="2019-09-02T17:01:20+00:00">September 2, 2019</time><time class="updated" datetime="2025-06-10T20:11:12+00:00">June 10, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">We have another CTF challenges for CTF players that named as ‚ÄúSunset: nightfall‚Äù and it can be download from vulnhub from <span style="color: #0000ff;"><strong><a style="color: #0000ff;" href="https://www.vulnhub.com/entry/sunset-nightfall,355/">here</a></strong></span>. The credit goes to ‚Äúwhitecr0wz‚Äù for designing this VM machine for beginners. This is a Linux based CTF challenge where you can use your basic pentest skill for Compromising this VM to escalate the root privilege shell.</span></p>
<p><span style="color: #000000;"><strong>Level:</strong> Easy</span></p>
<p><span style="color: #000000;"><strong>Task:</strong> Boot to Root</span></p>
<h3><span style="color: #800000;"><strong>Penetrating Methodologies</strong></span></h3>
<p><span style="color: #000000;"><strong>Network Scanning </strong></span></p>
<ul>
<li><span style="color: #000000;">Netdiscover</span></li>
<li><span style="color: #000000;">Nmap</span></li>
</ul>
<p><span style="color: #000000;"><strong>Enumeration </strong></span></p>
<ul>
<li><span style="color: #000000;">Enum4linux</span></li>
</ul>
<p><span style="color: #000000;"><strong>Exploiting</strong></span></p>
<ul>
<li><span style="color: #000000;">FTP Brute force</span></li>
<li><span style="color: #000000;">Injecting blank SSH key</span></li>
<li><span style="color: #000000;">SSH login</span></li>
</ul>
<p><span style="color: #000000;"><strong>Privilege Escalation</strong></span></p>
<ul>
<li><span style="color: #000000;">SUID Binaries</span></li>
<li><span style="color: #000000;">Sudo Rights</span></li>
</ul>
<h3><span style="color: #800000;">Walkthrough</span></h3>
<h3><span style="color: #800000;">Network Scanning</span></h3>
<p><span style="color: #000000;">Let‚Äôs begin with the network scan using netdiscover to identify the host machine IP.</span></p>
<pre class="lang:default decode:true">netdiscover</pre>
<p><span style="color: #000000;">And this gave 192.168.0.24 as Host IP, now we will move toward ports and service scan further.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-GgTMED_Th6A/XW1HGmPgzuI/AAAAAAAAgY8/nHBVr0Pz8nA4wDND4IdQYc1Is9njctM4ACLcBGAs/s1600/1.png"/></span></p>
<p><span style="color: #000000;">For deep network scan we always prefer to use nmap aggressive scan and this time also we will go with the same approach, thus will run the below command to enumerate running services and open port.</span></p>
<pre class="lang:default decode:true">nmap -A 192.168.0.24</pre>
<p><span style="color: #000000;">From its scan result, we found that it has multiple open ports for various services but here port 21 i.e. look interesting as it is using pyftplib for ftp.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-e8kM_ehTccc/XW1HIEm-JCI/AAAAAAAAgZM/VmIt3QpKVPEyCeW1ssRAAXyNUv27iah2gCLcBGAs/s1600/2.png"/></span></p>
<h3><span style="color: #800000;"><strong>Enumeration</strong></span></h3>
<p><span style="color: #000000;">For more detail we need to start enumeration against the host machine, therefore, we navigate to a web browser for exploring HTTP service but we found nothing at this place.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-dLKpv-2i4z4/XW1HInom3LI/AAAAAAAAgZU/SPXBUbuutawDjasSJpUqmogdMYdJztOyACLcBGAs/s1600/3.png"/></span></p>
<p><span style="color: #000000;">While enumerating SMB service we found two use name ‚Äúnightfall‚Äù &amp; ‚Äúmatt‚Äù with the help of Enum4linux.</span></p>
<pre class="lang:default decode:true">enum4linux 192.168.0.24</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-83egfDl0L5I/XW1HIWHgXaI/AAAAAAAAgZQ/kLCGvTrJkUUn1u3YPVYGgj_nJA74s8QEQCLcBGAs/s1600/4.png"/></span></p>
<h3><span style="color: #800000;"><strong>Exploiting</strong></span></h3>
<p><span style="color: #000000;">Since we have enumerated two usernames let‚Äôs go for brute force attack with the help of hydra and try to find its password for login into FTP</span></p>
<pre class="lang:default decode:true">hydra -l matt -P /usr/share/wordlists/rockyou.txt 192.168.0.24 ftp -e nsr</pre>
<p><span style="color: #000000;">Great!<strong> ‚ÄúCheese‚Äù </strong>üòäis the password of user <strong>‚Äúmatt‚Äù</strong> let‚Äôs use this credential for ftp login.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-ouNSdG9JC2U/XW1HI-VMZiI/AAAAAAAAgZY/FGJgc7VNkxIO-bgOAcQ0ZLLwqmSXI9ZAwCLcBGAs/s1600/5.png"/></span></p>
<p><span style="color: #000000;">We logged into FTP successfully, therefore we decide to upload a malicious file inside /var/www/html but unfortunately, we were unable to access that directory.</span></p>
<p><span style="color: #000000;">This is due to pyftplib which is using python library for FTP and might be File sharing is allowed on any particular directory hence we are unable to access /var/www/html directory.</span></p>
<p><span style="color: #000000;">But still we have another approach i.e. uploading SSH key which means we will try to inject our created SSH key inside the host machine and access the tty shell of the host machine via ssh and this can be achieved when we will create an <strong>.ssh</strong> named folder and upload our ssh key inside it.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-2SntJqhjGJ0/XW1HJaj7A_I/AAAAAAAAgZc/ZXcXiiZ6ugkgg5w5BRgFylPSN-KskWDiQCLcBGAs/s1600/6.png"/></span></p>
<p><span style="color: #000000;">Thus, in our local machine, we created a ssh key with a blank passphrase using ssh-keygen and it will create two files. Then we copied<strong> id_rsa.pub</strong> file into another file and named ‚Äúauthorized_keys‚Äù and now we need to transfer this file inside the host machine.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-MWGvRHsltds/XW1HJx-xc4I/AAAAAAAAgZk/4dafA4Mf4io3b3m0uEA18U4BeDoF3BsxwCLcBGAs/s1600/7.png"/></span></p>
<p><span style="color: #000000;">As we already have FTP access of the host machine, therefore, it becomes easy to for us to upload authorized_keys inside the .ssh directory which we have created earlier.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-CxE0RcPPJrc/XW1HJs6jVhI/AAAAAAAAgZg/BwyTrIlZvpI0xn3k_4BqX6QkVfshae_NgCLcBGAs/s1600/8.png"/></span></p>
<p><span style="color: #000000;">So, when we try to connect with ssh as <strong>matt</strong> user, we got login successfully as shown in the below image. At this phase, we have compromised the host machine but to get access of the root shell we need to bypass user privileges, therefore without wasting time we try to identify SUID enabled binaries with the help of find command.</span></p>
<pre class="lang:default decode:true">ssh matt@192.168.0.27
find / -perm -u=s -type f 2&gt;/dev/null</pre>
<p><span style="color: #000000;">So, we found<em> /script/find</em> has SUID permissions and it works similarly as Linux-Find utility thus we try to execute /bin/sh command and obtained access of the nightfall shell.</span></p>
<pre class="lang:default decode:true">./find . -exec /bin/sh -p \; -quit</pre>
<p><span style="color: #000000;">So, we got access of nightfall shell where we found our 1<sup>st</sup> flag from inside user.txt file.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-TVRray0oSxE/XW1HKMB1EWI/AAAAAAAAgZo/bnR9LdB9BqAjw4kdX8gCbM7ynKPrHXyvQCLcBGAs/s1600/9.png"/></span></p>
<p><span style="color: #000000;">But this was limited shell thus to access proper shell as nightfall, we try to apply the previous approach of placing blank passphrase ssh key. Therefore inside /home/nightfall we created a <strong>.ssh</strong> named folder and upload the<strong> authorized_key</strong> which we had created previously.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-i5kVB_Aeomg/XW1HGa9wP4I/AAAAAAAAgY4/jO9Qwhqqeo0WIXGJKh96uq6epyhBrr9uQCLcBGAs/s1600/11.png"/></span></p>
<h3><span style="color: #000000;"><strong><span style="color: #800000;">Privilege Escalation</span> </strong></span></h3>
<p><span style="color: #000000;">Now repeat the same and try to connect with ssh as nightfall and you will get ssh shell, like us as shown in below image. Further, we check sudo right for nightfall and observed he has sudo right for cat program which means we can read higher privilege files such as the shadow.</span></p>
<pre class="lang:default decode:true ">ssh nightfall@192.168.0.24
sudo -l</pre>
<p><span style="color: #000000;">we have executed the following command for reading shadow file and obtain some hash values.</span></p>
<pre class="lang:default decode:true">sudo -u root cat /etc/shadow</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-t98s65Uxs_w/XW1HGsgKKCI/AAAAAAAAgZA/z8TJWX-BU3wGy2_RwtwM00PV4-OjbE2bgCLcBGAs/s1600/12.png"/></span></p>
<p><span style="color: #000000;">So, we saved the hash of user: root in a text file and then use john the ripper for cracking hash.</span></p>
<p><span style="color: #000000;">Booomm!! We got user: <strong>root </strong>password: <strong>miguel2</strong></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-YpZk9hwLUIk/XW1HHhRSZ4I/AAAAAAAAgZE/DWfkmWirFDMZviHPNW8iyTo_azowYUmFQCLcBGAs/s1600/13.png"/></span></p>
<p><span style="color: #000000;">Using above credential i.e. <strong>root:miguel2</strong> we got the root shell access and inside /root directory we found our final flag.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-OTo7xAj_vBc/XW1HHmbguKI/AAAAAAAAgZI/2yh61TfxAkERsbwnAtiy0GXISkld_kHJgCLcBGAs/s1600/14.png"/></span></p>
<p><span style="color: #000000;"><strong>Author:¬†</strong>Aarti Singh is a Researcher and Technical Writer at Hacking Articles an Information Security Consultant Social Media Lover and Gadgets. Contact<strong><a style="color: #000000;" href="https://www.linkedin.com/in/aarti--singh/">¬†here</a></strong></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
